{"uid":"116e08f5dcf631dc","name":"Создание Space-документа для роли owner","fullName":"tests.test_backend.document.access_doc.test_create_doc_access_by_roles#test_create_and_archive_space_doc_access_by_roles","historyId":"d9ef71fb375b91e3448c594aa8e7af45","time":{"start":1762517725646,"stop":1762517725800,"duration":154},"description":"\n    Тест для проверки создания и архивирования Space-документа с разными клиентскими ролями.\n    Тест выполняет следующие шаги для каждой роли:\n    1. Создает Space-документ с использованием предоставленной клиентской роли.\n    2. Проверяет, что статус ответа соответствует ожидаемому результату.\n    3. Если создание документа успешно (статус 200):\n       - Проверяет, что заголовок созданного документа соответствует ожидаемому.\n       - Архивирует созданный Space-документ и проверяет статус запроса на архивирование.\n    ","descriptionHtml":"<pre><code>Тест для проверки создания и архивирования Space-документа с разными клиентскими ролями.\nТест выполняет следующие шаги для каждой роли:\n1. Создает Space-документ с использованием предоставленной клиентской роли.\n2. Проверяет, что статус ответа соответствует ожидаемому результату.\n3. Если создание документа успешно (статус 200):\n   - Проверяет, что заголовок созданного документа соответствует ожидаемому.\n   - Архивирует созданный Space-документ и проверяет статус запроса на архивирование.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: assert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"request = <FixtureRequest for <Function test_create_and_archive_space_doc_access_by_roles[owner]>>\nmain_space = '6866309d85fb8d104544a61e', client_fixture = 'owner_client'\nexpected_status = 200\n\n    @pytest.mark.parametrize(\n        'client_fixture, expected_status',\n        [\n            ('owner_client', 200),\n            ('manager_client', 200),\n            ('member_client', 200),\n            ('guest_client', 403),\n        ],\n        ids=['owner', 'manager', 'member', 'guest'],\n    )\n    def test_create_and_archive_space_doc_access_by_roles(request, main_space, client_fixture, expected_status):\n        \"\"\"\n        Тест для проверки создания и архивирования Space-документа с разными клиентскими ролями.\n        Тест выполняет следующие шаги для каждой роли:\n        1. Создает Space-документ с использованием предоставленной клиентской роли.\n        2. Проверяет, что статус ответа соответствует ожидаемому результату.\n        3. Если создание документа успешно (статус 200):\n           - Проверяет, что заголовок созданного документа соответствует ожидаемому.\n           - Архивирует созданный Space-документ и проверяет статус запроса на архивирование.\n        \"\"\"\n        api_client = request.getfixturevalue(client_fixture)\n        role = client_fixture.replace('_client', '')\n        current_date = datetime.now().strftime('%Y.%m.%d_%H:%M:%S')\n        title = f'{current_date} {role} Space Doc'\n    \n        allure.dynamic.title(f'Создание Space-документа для роли {role}')\n    \n        with allure.step(f'{role} создаёт Space-документ, {expected_status}'):\n            resp = api_client.post(\n                **create_document_endpoint(kind='Space', kind_id=main_space, space_id=main_space, title=title)\n            )\n>           assert resp.status_code == expected_status\nE           assert 400 == 200\nE            +  where 400 = <Response [400]>.status_code\n\ntests/test_backend/document/access_doc/test_create_doc_access_by_roles.py:41: AssertionError","flaky":true,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"description":"\n    Тест для проверки создания и архивирования Space-документа с разными клиентскими ролями.\n    Тест выполняет следующие шаги для каждой роли:\n    1. Создает Space-документ с использованием предоставленной клиентской роли.\n    2. Проверяет, что статус ответа соответствует ожидаемому результату.\n    3. Если создание документа успешно (статус 200):\n       - Проверяет, что заголовок созданного документа соответствует ожидаемому.\n       - Архивирует созданный Space-документ и проверяет статус запроса на архивирование.\n    ","status":"failed","statusMessage":"AssertionError: assert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"request = <FixtureRequest for <Function test_create_and_archive_space_doc_access_by_roles[owner]>>\nmain_space = '6866309d85fb8d104544a61e', client_fixture = 'owner_client'\nexpected_status = 200\n\n    @pytest.mark.parametrize(\n        'client_fixture, expected_status',\n        [\n            ('owner_client', 200),\n            ('manager_client', 200),\n            ('member_client', 200),\n            ('guest_client', 403),\n        ],\n        ids=['owner', 'manager', 'member', 'guest'],\n    )\n    def test_create_and_archive_space_doc_access_by_roles(request, main_space, client_fixture, expected_status):\n        \"\"\"\n        Тест для проверки создания и архивирования Space-документа с разными клиентскими ролями.\n        Тест выполняет следующие шаги для каждой роли:\n        1. Создает Space-документ с использованием предоставленной клиентской роли.\n        2. Проверяет, что статус ответа соответствует ожидаемому результату.\n        3. Если создание документа успешно (статус 200):\n           - Проверяет, что заголовок созданного документа соответствует ожидаемому.\n           - Архивирует созданный Space-документ и проверяет статус запроса на архивирование.\n        \"\"\"\n        api_client = request.getfixturevalue(client_fixture)\n        role = client_fixture.replace('_client', '')\n        current_date = datetime.now().strftime('%Y.%m.%d_%H:%M:%S')\n        title = f'{current_date} {role} Space Doc'\n    \n        allure.dynamic.title(f'Создание Space-документа для роли {role}')\n    \n        with allure.step(f'{role} создаёт Space-документ, {expected_status}'):\n            resp = api_client.post(\n                **create_document_endpoint(kind='Space', kind_id=main_space, space_id=main_space, title=title)\n            )\n>           assert resp.status_code == expected_status\nE           assert 400 == 200\nE            +  where 400 = <Response [400]>.status_code\n\ntests/test_backend/document/access_doc/test_create_doc_access_by_roles.py:41: AssertionError","steps":[{"name":"owner создаёт Space-документ, 200","time":{"start":1762517725646,"stop":1762517725800,"duration":154},"status":"failed","statusMessage":"AssertionError: assert 400 == 200\n +  where 400 = <Response [400]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/document/access_doc/test_create_doc_access_by_roles.py\", line 41, in test_create_and_archive_space_doc_access_by_roles\n    assert resp.status_code == expected_status\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.document.access_doc"},{"name":"suite","value":"test_create_doc_access_by_roles"},{"name":"host","value":"runnervmf2e7y"},{"name":"thread","value":"2576-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.document.access_doc.test_create_doc_access_by_roles"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"client_fixture","value":"'owner_client'"},{"name":"expected_status","value":"200"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":4,"broken":0,"skipped":0,"passed":15,"unknown":0,"total":19},"items":[{"uid":"1684475045471c61","reportUrl":"https://vaizcom.github.io/autotests/422/#testresult/1684475045471c61","status":"passed","time":{"start":1762516930152,"stop":1762516930742,"duration":590}},{"uid":"8f76face0e151436","reportUrl":"https://vaizcom.github.io/autotests/421/#testresult/8f76face0e151436","status":"failed","statusDetails":"AssertionError: assert 400 == 200\n +  where 400 = <Response [400]>.status_code","time":{"start":1762516770965,"stop":1762516771100,"duration":135}},{"uid":"1a183d96db7a56dd","reportUrl":"https://vaizcom.github.io/autotests/421/#testresult/1a183d96db7a56dd","status":"failed","statusDetails":"AssertionError: assert 400 == 200\n +  where 400 = <Response [400]>.status_code","time":{"start":1762516306826,"stop":1762516306961,"duration":135}},{"uid":"7e067641de1e7100","reportUrl":"https://vaizcom.github.io/autotests/421/#testresult/7e067641de1e7100","status":"failed","statusDetails":"AssertionError: assert 400 == 200\n +  where 400 = <Response [400]>.status_code","time":{"start":1762514763589,"stop":1762514763737,"duration":148}},{"uid":"47f61bbb5f53ec6b","reportUrl":"https://vaizcom.github.io/autotests/420/#testresult/47f61bbb5f53ec6b","status":"passed","time":{"start":1762507445327,"stop":1762507445857,"duration":530}},{"uid":"a8a5f9ed1a67d3c1","reportUrl":"https://vaizcom.github.io/autotests/420/#testresult/a8a5f9ed1a67d3c1","status":"passed","time":{"start":1762506143458,"stop":1762506146112,"duration":2654}},{"uid":"16e15e2998c576a7","reportUrl":"https://vaizcom.github.io/autotests/419/#testresult/16e15e2998c576a7","status":"passed","time":{"start":1762505265247,"stop":1762505265721,"duration":474}},{"uid":"6498aa33ff20e634","reportUrl":"https://vaizcom.github.io/autotests/418/#testresult/6498aa33ff20e634","status":"passed","time":{"start":1762354237540,"stop":1762354238065,"duration":525}},{"uid":"2f5e7664e3715036","reportUrl":"https://vaizcom.github.io/autotests/417/#testresult/2f5e7664e3715036","status":"passed","time":{"start":1762353171221,"stop":1762353171772,"duration":551}},{"uid":"2c58a5bd591d6356","reportUrl":"https://vaizcom.github.io/autotests/416/#testresult/2c58a5bd591d6356","status":"passed","time":{"start":1762349760440,"stop":1762349761027,"duration":587}},{"uid":"231da3e9087fd1b7","reportUrl":"https://vaizcom.github.io/autotests/415/#testresult/231da3e9087fd1b7","status":"passed","time":{"start":1762331773413,"stop":1762331773856,"duration":443}},{"uid":"39b5735627e0fbf7","reportUrl":"https://vaizcom.github.io/autotests/414/#testresult/39b5735627e0fbf7","status":"passed","time":{"start":1762328781838,"stop":1762328782405,"duration":567}},{"uid":"51da8835617ef389","reportUrl":"https://vaizcom.github.io/autotests/413/#testresult/51da8835617ef389","status":"passed","time":{"start":1762270397022,"stop":1762270397612,"duration":590}},{"uid":"fa9b4f135e562a70","reportUrl":"https://vaizcom.github.io/autotests/412/#testresult/fa9b4f135e562a70","status":"passed","time":{"start":1762269532287,"stop":1762269533029,"duration":742}},{"uid":"6bf9c8d8de7d5c75","reportUrl":"https://vaizcom.github.io/autotests/411/#testresult/6bf9c8d8de7d5c75","status":"passed","time":{"start":1762269392801,"stop":1762269393918,"duration":1117}},{"uid":"7946bf9e865c9fc7","reportUrl":"https://vaizcom.github.io/autotests/410/#testresult/7946bf9e865c9fc7","status":"passed","time":{"start":1762269271321,"stop":1762269271770,"duration":449}},{"uid":"3146b17987491ee7","reportUrl":"https://vaizcom.github.io/autotests/409/#testresult/3146b17987491ee7","status":"passed","time":{"start":1762268651945,"stop":1762268652428,"duration":483}},{"uid":"d09c2623afe8381d","reportUrl":"https://vaizcom.github.io/autotests/408/#testresult/d09c2623afe8381d","status":"passed","time":{"start":1762244983577,"stop":1762244984203,"duration":626}}]},"tags":["backend"]},"source":"116e08f5dcf631dc.json","parameterValues":["'owner_client'","200"]}