{"uid":"81a46044286bc157","name":"Тестирование получения задач под ролью Client_with_access_only_in_space","fullName":"tests.test_backend.task_service.get_tasks.access_get_tasks.test_get_tasks_project_filters#test_get_tasks_limited_access_filtered_by_project","historyId":"11380f2b22d8d6e095eff9b3c1385257","time":{"start":1763996398348,"stop":1763996447845,"duration":49497},"description":"\n        Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n        но при этом запрос выполняется успешно (HTTP 200).\n        ","descriptionHtml":"<pre><code>    Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n    но при этом запрос выполняется успешно (HTTP 200).\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Ожидался пустой список задач для client_with_access_only_in_space\nassert 51201 == 0\n +  where 51201 = len([{'_id': '632880f6aa99c1540a2738b6', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738c2', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738cd', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738da', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f7aa99c1540a2738e7', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f7aa99c1540a2738f4', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, ...])","statusTrace":"request = <FixtureRequest for <Function test_get_tasks_limited_access_filtered_by_project[access_only_in_space]>>\nclient_fixture = 'client_with_access_only_in_space'\nmain_project = '686672af85fb8d104544e798'\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title(\"GetTasks: Проверка что список задач пустой для пользователей которые не имеют доступ к project\")\n    @pytest.mark.parametrize(\n        'client_fixture',\n        ['client_with_access_only_in_space', 'client_with_access_only_in_project'],\n        ids=['access_only_in_space', 'no_access_to_main_project'],\n    )\n    def test_get_tasks_limited_access_filtered_by_project(request, client_fixture, main_project, main_space):\n        \"\"\"\n            Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n            но при этом запрос выполняется успешно (HTTP 200).\n            \"\"\"\n        role_name = client_fixture.capitalize()\n        allure.dynamic.title(f\"Тестирование получения задач под ролью {role_name}\")\n    \n        client = request.getfixturevalue(client_fixture)\n    \n        with allure.step(f\"{client_fixture}: вызвать GetTasks с фильтром project\"):\n            resp = client.post(**get_tasks_endpoint(space_id=main_space, project=main_project))\n    \n        with allure.step(\"Проверить HTTP 200\"):\n            assert resp.status_code == 200\n    \n        with allure.step(\"Проверить что список задач пустой\"):\n            payload = resp.json().get(\"payload\", {})\n            assert \"tasks\" in payload and isinstance(payload[\"tasks\"], list)\n>           assert len(payload[\"tasks\"]) == 0, f\"Ожидался пустой список задач для {client_fixture}\"\nE           AssertionError: Ожидался пустой список задач для client_with_access_only_in_space\nE           assert 51201 == 0\nE            +  where 51201 = len([{'_id': '632880f6aa99c1540a2738b6', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738c2', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738cd', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738da', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f7aa99c1540a2738e7', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f7aa99c1540a2738f4', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, ...])\n\ntests/test_backend/task_service/get_tasks/access_get_tasks/test_get_tasks_project_filters.py:81: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"description":"\n        Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n        но при этом запрос выполняется успешно (HTTP 200).\n        ","status":"failed","statusMessage":"AssertionError: Ожидался пустой список задач для client_with_access_only_in_space\nassert 51201 == 0\n +  where 51201 = len([{'_id': '632880f6aa99c1540a2738b6', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738c2', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738cd', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738da', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f7aa99c1540a2738e7', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f7aa99c1540a2738f4', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, ...])","statusTrace":"request = <FixtureRequest for <Function test_get_tasks_limited_access_filtered_by_project[access_only_in_space]>>\nclient_fixture = 'client_with_access_only_in_space'\nmain_project = '686672af85fb8d104544e798'\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title(\"GetTasks: Проверка что список задач пустой для пользователей которые не имеют доступ к project\")\n    @pytest.mark.parametrize(\n        'client_fixture',\n        ['client_with_access_only_in_space', 'client_with_access_only_in_project'],\n        ids=['access_only_in_space', 'no_access_to_main_project'],\n    )\n    def test_get_tasks_limited_access_filtered_by_project(request, client_fixture, main_project, main_space):\n        \"\"\"\n            Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n            но при этом запрос выполняется успешно (HTTP 200).\n            \"\"\"\n        role_name = client_fixture.capitalize()\n        allure.dynamic.title(f\"Тестирование получения задач под ролью {role_name}\")\n    \n        client = request.getfixturevalue(client_fixture)\n    \n        with allure.step(f\"{client_fixture}: вызвать GetTasks с фильтром project\"):\n            resp = client.post(**get_tasks_endpoint(space_id=main_space, project=main_project))\n    \n        with allure.step(\"Проверить HTTP 200\"):\n            assert resp.status_code == 200\n    \n        with allure.step(\"Проверить что список задач пустой\"):\n            payload = resp.json().get(\"payload\", {})\n            assert \"tasks\" in payload and isinstance(payload[\"tasks\"], list)\n>           assert len(payload[\"tasks\"]) == 0, f\"Ожидался пустой список задач для {client_fixture}\"\nE           AssertionError: Ожидался пустой список задач для client_with_access_only_in_space\nE           assert 51201 == 0\nE            +  where 51201 = len([{'_id': '632880f6aa99c1540a2738b6', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738c2', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738cd', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738da', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f7aa99c1540a2738e7', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f7aa99c1540a2738f4', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, ...])\n\ntests/test_backend/task_service/get_tasks/access_get_tasks/test_get_tasks_project_filters.py:81: AssertionError","steps":[{"name":"client_with_access_only_in_space: вызвать GetTasks с фильтром project","time":{"start":1763996398348,"stop":1763996447280,"duration":48932},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверить HTTP 200","time":{"start":1763996447281,"stop":1763996447281,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверить что список задач пустой","time":{"start":1763996447281,"stop":1763996447844,"duration":563},"status":"failed","statusMessage":"AssertionError: Ожидался пустой список задач для client_with_access_only_in_space\nassert 51201 == 0\n +  where 51201 = len([{'_id': '632880f6aa99c1540a2738b6', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738c2', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738cd', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f6aa99c1540a2738da', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f7aa99c1540a2738e7', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '632880f7aa99c1540a2738f4', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, ...])\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/task_service/get_tasks/access_get_tasks/test_get_tasks_project_filters.py\", line 81, in test_get_tasks_limited_access_filtered_by_project\n    assert len(payload[\"tasks\"]) == 0, f\"Ожидался пустой список задач для {client_fixture}\"\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":3,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.task_service.get_tasks.access_get_tasks"},{"name":"suite","value":"test_get_tasks_project_filters"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2653-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.task_service.get_tasks.access_get_tasks.test_get_tasks_project_filters"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"client_fixture","value":"'client_with_access_only_in_space'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":19,"unknown":0,"total":20},"items":[{"uid":"6e8e94eaccdb20c6","reportUrl":"https://vaizcom.github.io/autotests/470/#testresult/6e8e94eaccdb20c6","status":"passed","time":{"start":1763995225446,"stop":1763995225932,"duration":486}},{"uid":"8042746bffca0983","reportUrl":"https://vaizcom.github.io/autotests/469/#testresult/8042746bffca0983","status":"passed","time":{"start":1763993478452,"stop":1763993478992,"duration":540}},{"uid":"764bba44816385ff","reportUrl":"https://vaizcom.github.io/autotests/468/#testresult/764bba44816385ff","status":"passed","time":{"start":1763734843369,"stop":1763734843932,"duration":563}},{"uid":"af3ba1df7b6822dd","reportUrl":"https://vaizcom.github.io/autotests/467/#testresult/af3ba1df7b6822dd","status":"passed","time":{"start":1763733023952,"stop":1763733024208,"duration":256}},{"uid":"4f64bcd8e4d30cae","reportUrl":"https://vaizcom.github.io/autotests/466/#testresult/4f64bcd8e4d30cae","status":"passed","time":{"start":1763726677747,"stop":1763726677971,"duration":224}},{"uid":"7edc7f60e70a1295","reportUrl":"https://vaizcom.github.io/autotests/465/#testresult/7edc7f60e70a1295","status":"passed","time":{"start":1763720218937,"stop":1763720219117,"duration":180}},{"uid":"d20018dd9eabebae","reportUrl":"https://vaizcom.github.io/autotests/464/#testresult/d20018dd9eabebae","status":"passed","time":{"start":1763715528432,"stop":1763715528799,"duration":367}},{"uid":"673b4d7994db2e9c","reportUrl":"https://vaizcom.github.io/autotests/463/#testresult/673b4d7994db2e9c","status":"passed","time":{"start":1763714947889,"stop":1763714948139,"duration":250}},{"uid":"8daaaf54df35936c","reportUrl":"https://vaizcom.github.io/autotests/462/#testresult/8daaaf54df35936c","status":"passed","time":{"start":1763711382828,"stop":1763711383007,"duration":179}},{"uid":"dc1ff88b94d959d8","reportUrl":"https://vaizcom.github.io/autotests/461/#testresult/dc1ff88b94d959d8","status":"passed","time":{"start":1763710404656,"stop":1763710404890,"duration":234}},{"uid":"8bf61f0267c71a9","reportUrl":"https://vaizcom.github.io/autotests/460/#testresult/8bf61f0267c71a9","status":"passed","time":{"start":1763651931550,"stop":1763651931785,"duration":235}},{"uid":"5f7bebf597858227","reportUrl":"https://vaizcom.github.io/autotests/459/#testresult/5f7bebf597858227","status":"passed","time":{"start":1763650071263,"stop":1763650071492,"duration":229}},{"uid":"4c3074338f365e84","reportUrl":"https://vaizcom.github.io/autotests/458/#testresult/4c3074338f365e84","status":"passed","time":{"start":1763631444443,"stop":1763631444807,"duration":364}},{"uid":"760111f1aa7cbcfe","reportUrl":"https://vaizcom.github.io/autotests/457/#testresult/760111f1aa7cbcfe","status":"passed","time":{"start":1763628801151,"stop":1763628801507,"duration":356}},{"uid":"8dce441df16a669e","reportUrl":"https://vaizcom.github.io/autotests/456/#testresult/8dce441df16a669e","status":"passed","time":{"start":1763559938075,"stop":1763559938326,"duration":251}},{"uid":"598a17362055abe5","reportUrl":"https://vaizcom.github.io/autotests/455/#testresult/598a17362055abe5","status":"passed","time":{"start":1763542885568,"stop":1763542885828,"duration":260}},{"uid":"e7bf0ff077ddafb4","reportUrl":"https://vaizcom.github.io/autotests/454/#testresult/e7bf0ff077ddafb4","status":"passed","time":{"start":1763540612851,"stop":1763540613257,"duration":406}},{"uid":"41d3b0fa1c9f457","reportUrl":"https://vaizcom.github.io/autotests/453/#testresult/41d3b0fa1c9f457","status":"passed","time":{"start":1763478065164,"stop":1763478065758,"duration":594}},{"uid":"20ac2da772965f05","reportUrl":"https://vaizcom.github.io/autotests/452/#testresult/20ac2da772965f05","status":"passed","time":{"start":1763476247663,"stop":1763476247907,"duration":244}}]},"tags":["backend"]},"source":"81a46044286bc157.json","parameterValues":["'client_with_access_only_in_space'"]}