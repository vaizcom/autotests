{"uid":"31afc1be34e0c642","name":"Несоответствие kind и kindId — kind=Space с kindId от Member","fullName":"tests.test_backend.document.test_get_documents#test_get_documents_mismatched_kind_and_id","historyId":"c6ebe153916ef8adca939bf2b8259299","time":{"start":1763387976863,"stop":1763387976993,"duration":130},"status":"failed","statusMessage":"AssertionError: assert 503 == 403\n +  where 503 = <Response [503]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f061917eb10>\ntemp_space = '691b29650d8887e706faae80'\nrequest = <FixtureRequest for <Function test_get_documents_mismatched_kind_and_id[space-wrong-id]>>\nkind = 'Space', wrong_fixture = 'temp_member'\ncase_title = 'kind=Space с kindId от Member'\n\n    @pytest.mark.parametrize(\n        'kind, wrong_fixture, case_title',\n        [\n            ('Project', 'temp_member', 'kind=Project с kindId от Member'),\n            ('Member', 'temp_project', 'kind=Member с kindId от Project'),\n            ('Space', 'temp_member', 'kind=Space с kindId от Member'),\n        ],\n        ids=['project-wrong-id', 'member-wrong-id', 'space-wrong-id'],\n    )\n    def test_get_documents_mismatched_kind_and_id(owner_client, temp_space, request, kind, wrong_fixture, case_title):\n        kind_id = request.getfixturevalue(wrong_fixture)\n        allure.dynamic.title(f'Несоответствие kind и kindId — {case_title}')\n    \n        with allure.step(f'Отправка запроса с kind={kind} и kindId от {wrong_fixture}'):\n            response = owner_client.post(**get_documents_endpoint(kind=kind, kind_id=kind_id, space_id=temp_space))\n    \n        with allure.step('Ожидаем ошибку 403'):\n>           assert response.status_code == 403\nE           assert 503 == 403\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/test_get_documents.py:210: AssertionError","flaky":true,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1763387735904,"stop":1763387735904,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1763387735904,"stop":1763387735904,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1763387735904,"stop":1763387735904,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1763387735904,"stop":1763387735904,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1763387737613,"stop":1763387737917,"duration":304},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"temp_space","time":{"start":1763387748989,"stop":1763387749547,"duration":558},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"temp_member","time":{"start":1763387788223,"stop":1763387788464,"duration":241},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 503 == 403\n +  where 503 = <Response [503]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f061917eb10>\ntemp_space = '691b29650d8887e706faae80'\nrequest = <FixtureRequest for <Function test_get_documents_mismatched_kind_and_id[space-wrong-id]>>\nkind = 'Space', wrong_fixture = 'temp_member'\ncase_title = 'kind=Space с kindId от Member'\n\n    @pytest.mark.parametrize(\n        'kind, wrong_fixture, case_title',\n        [\n            ('Project', 'temp_member', 'kind=Project с kindId от Member'),\n            ('Member', 'temp_project', 'kind=Member с kindId от Project'),\n            ('Space', 'temp_member', 'kind=Space с kindId от Member'),\n        ],\n        ids=['project-wrong-id', 'member-wrong-id', 'space-wrong-id'],\n    )\n    def test_get_documents_mismatched_kind_and_id(owner_client, temp_space, request, kind, wrong_fixture, case_title):\n        kind_id = request.getfixturevalue(wrong_fixture)\n        allure.dynamic.title(f'Несоответствие kind и kindId — {case_title}')\n    \n        with allure.step(f'Отправка запроса с kind={kind} и kindId от {wrong_fixture}'):\n            response = owner_client.post(**get_documents_endpoint(kind=kind, kind_id=kind_id, space_id=temp_space))\n    \n        with allure.step('Ожидаем ошибку 403'):\n>           assert response.status_code == 403\nE           assert 503 == 403\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/test_get_documents.py:210: AssertionError","steps":[{"name":"Отправка запроса с kind=Space и kindId от temp_member","time":{"start":1763387976864,"stop":1763387976993,"duration":129},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Ожидаем ошибку 403","time":{"start":1763387976993,"stop":1763387976993,"duration":0},"status":"failed","statusMessage":"AssertionError: assert 503 == 403\n +  where 503 = <Response [503]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/document/test_get_documents.py\", line 210, in test_get_documents_mismatched_kind_and_id\n    assert response.status_code == 403\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"temp_member::0","time":{"start":1763387989196,"stop":1763387989197,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"temp_space::0","time":{"start":1763387989198,"stop":1763387989326,"duration":128},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.document"},{"name":"suite","value":"test_get_documents"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2589-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.document.test_get_documents"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"case_title","value":"'kind=Space с kindId от Member'"},{"name":"kind","value":"'Space'"},{"name":"wrong_fixture","value":"'temp_member'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":5,"broken":0,"skipped":0,"passed":38,"unknown":0,"total":43},"items":[{"uid":"fe97e279871372ee","reportUrl":"https://vaizcom.github.io/autotests/448/#testresult/fe97e279871372ee","status":"passed","time":{"start":1763373286285,"stop":1763373286472,"duration":187}},{"uid":"918fc19cb601965c","reportUrl":"https://vaizcom.github.io/autotests/448/#testresult/918fc19cb601965c","status":"failed","statusDetails":"AssertionError: assert 503 == 403\n +  where 503 = <Response [503]>.status_code","time":{"start":1763372688199,"stop":1763372688362,"duration":163}},{"uid":"ad6a262413cfdb14","reportUrl":"https://vaizcom.github.io/autotests/447/#testresult/ad6a262413cfdb14","status":"passed","time":{"start":1763366513021,"stop":1763366513250,"duration":229}},{"uid":"93f4300a7d880659","reportUrl":"https://vaizcom.github.io/autotests/446/#testresult/93f4300a7d880659","status":"passed","time":{"start":1763130588199,"stop":1763130588447,"duration":248}},{"uid":"d309f88300e34be3","reportUrl":"https://vaizcom.github.io/autotests/445/#testresult/d309f88300e34be3","status":"passed","time":{"start":1763114279513,"stop":1763114279753,"duration":240}},{"uid":"e4ade1a922ce3aa6","reportUrl":"https://vaizcom.github.io/autotests/444/#testresult/e4ade1a922ce3aa6","status":"passed","time":{"start":1763046958521,"stop":1763046958722,"duration":201}},{"uid":"aafd6e116a2197c7","reportUrl":"https://vaizcom.github.io/autotests/443/#testresult/aafd6e116a2197c7","status":"passed","time":{"start":1763042620132,"stop":1763042620334,"duration":202}},{"uid":"71446caee530e800","reportUrl":"https://vaizcom.github.io/autotests/442/#testresult/71446caee530e800","status":"passed","time":{"start":1763040532226,"stop":1763040532421,"duration":195}},{"uid":"ba7810199e72bf24","reportUrl":"https://vaizcom.github.io/autotests/441/#testresult/ba7810199e72bf24","status":"passed","time":{"start":1763037220339,"stop":1763037220612,"duration":273}},{"uid":"d068e717d6462369","reportUrl":"https://vaizcom.github.io/autotests/440/#testresult/d068e717d6462369","status":"passed","time":{"start":1763034808793,"stop":1763034809013,"duration":220}},{"uid":"30775b5d53f60d8e","reportUrl":"https://vaizcom.github.io/autotests/439/#testresult/30775b5d53f60d8e","status":"passed","time":{"start":1763023117241,"stop":1763023117484,"duration":243}},{"uid":"d1e2b8fb0ff77ca5","reportUrl":"https://vaizcom.github.io/autotests/438/#testresult/d1e2b8fb0ff77ca5","status":"passed","time":{"start":1763020711452,"stop":1763020711705,"duration":253}},{"uid":"672f44f38ed89119","reportUrl":"https://vaizcom.github.io/autotests/437/#testresult/672f44f38ed89119","status":"passed","time":{"start":1762972963621,"stop":1762972963827,"duration":206}},{"uid":"10a2661433cb40ae","reportUrl":"https://vaizcom.github.io/autotests/436/#testresult/10a2661433cb40ae","status":"passed","time":{"start":1762972298515,"stop":1762972298769,"duration":254}},{"uid":"5c77b37e0b8a65d9","reportUrl":"https://vaizcom.github.io/autotests/434/#testresult/5c77b37e0b8a65d9","status":"passed","time":{"start":1762950692863,"stop":1762950693049,"duration":186}},{"uid":"baf041c31ddf6c73","reportUrl":"https://vaizcom.github.io/autotests/433/#testresult/baf041c31ddf6c73","status":"passed","time":{"start":1762949021629,"stop":1762949021869,"duration":240}},{"uid":"ae23d7c33be6c1fa","reportUrl":"https://vaizcom.github.io/autotests/432/#testresult/ae23d7c33be6c1fa","status":"passed","time":{"start":1762947232084,"stop":1762947232324,"duration":240}},{"uid":"53b5faab432d37ae","reportUrl":"https://vaizcom.github.io/autotests/432/#testresult/53b5faab432d37ae","status":"failed","statusDetails":"AssertionError: assert 503 == 403\n +  where 503 = <Response [503]>.status_code","time":{"start":1762939582189,"stop":1762939582301,"duration":112}},{"uid":"f5009a74386452c1","reportUrl":"https://vaizcom.github.io/autotests/431/#testresult/f5009a74386452c1","status":"passed","time":{"start":1762855699924,"stop":1762855700206,"duration":282}},{"uid":"aa410bdea6c9f0a4","reportUrl":"https://vaizcom.github.io/autotests/430/#testresult/aa410bdea6c9f0a4","status":"passed","time":{"start":1762780843574,"stop":1762780843758,"duration":184}}]},"tags":["backend"]},"source":"31afc1be34e0c642.json","parameterValues":["'kind=Space с kindId от Member'","'Space'","'temp_member'"]}