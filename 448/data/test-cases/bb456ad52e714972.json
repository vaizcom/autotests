{"uid":"bb456ad52e714972","name":"Проверка доступа к документам: пользователь без доступа (foreign_client)","fullName":"tests.test_backend.document.access_doc.test_matrix_access_docs#test_document_access_denied_for_foreign_client","historyId":"7178898f53000b718b1270e4271b6985","time":{"start":1763372672311,"stop":1763372672474,"duration":163},"description":"\n    Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n    ","descriptionHtml":"<pre><code>Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Ожидался статус 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"foreign_client = <tests.core.client.APIClient object at 0x7f77c97746d0>\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title('Проверка доступа к документам: пользователь без доступа (foreign_client)')\n    def test_document_access_denied_for_foreign_client(foreign_client, main_space):\n        \"\"\"\n        Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n        \"\"\"\n        with allure.step('Отправка запроса для получения доступа к документам'):\n            response = foreign_client.post(**get_document_endpoint(document_id=main_space, space_id=main_space))\n    \n        with allure.step(\"Проверка, что запрос отклонён (ожидается 400 и код ошибки 'NotFound')\"):\n>           assert response.status_code == 400, f'Ожидался статус 400, получен {response.status_code}'\nE           AssertionError: Ожидался статус 400, получен 503\nE           assert 503 == 400\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/access_doc/test_matrix_access_docs.py:16: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1763372463637,"stop":1763372463637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1763372463637,"stop":1763372463637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1763372463637,"stop":1763372463637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1763372463637,"stop":1763372463637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"foreign_client","time":{"start":1763372466280,"stop":1763372467261,"duration":981},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1763372467539,"stop":1763372467828,"duration":289},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1763372467828,"stop":1763372468114,"duration":286},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n    ","status":"failed","statusMessage":"AssertionError: Ожидался статус 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"foreign_client = <tests.core.client.APIClient object at 0x7f77c97746d0>\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title('Проверка доступа к документам: пользователь без доступа (foreign_client)')\n    def test_document_access_denied_for_foreign_client(foreign_client, main_space):\n        \"\"\"\n        Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n        \"\"\"\n        with allure.step('Отправка запроса для получения доступа к документам'):\n            response = foreign_client.post(**get_document_endpoint(document_id=main_space, space_id=main_space))\n    \n        with allure.step(\"Проверка, что запрос отклонён (ожидается 400 и код ошибки 'NotFound')\"):\n>           assert response.status_code == 400, f'Ожидался статус 400, получен {response.status_code}'\nE           AssertionError: Ожидался статус 400, получен 503\nE           assert 503 == 400\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/access_doc/test_matrix_access_docs.py:16: AssertionError","steps":[{"name":"Отправка запроса для получения доступа к документам","time":{"start":1763372672312,"stop":1763372672473,"duration":161},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка, что запрос отклонён (ожидается 400 и код ошибки 'NotFound')","time":{"start":1763372672473,"stop":1763372672473,"duration":0},"status":"failed","statusMessage":"AssertionError: Ожидался статус 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/document/access_doc/test_matrix_access_docs.py\", line 16, in test_document_access_denied_for_foreign_client\n    assert response.status_code == 400, f'Ожидался статус 400, получен {response.status_code}'\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.document.access_doc"},{"name":"suite","value":"test_matrix_access_docs"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2573-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.document.access_doc.test_matrix_access_docs"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":0,"skipped":11,"passed":27,"unknown":0,"total":41},"items":[{"uid":"79f67eb15c3bc609","reportUrl":"https://vaizcom.github.io/autotests/447/#testresult/79f67eb15c3bc609","status":"passed","time":{"start":1763366454736,"stop":1763366454920,"duration":184}},{"uid":"38a207c73e20bd64","reportUrl":"https://vaizcom.github.io/autotests/446/#testresult/38a207c73e20bd64","status":"passed","time":{"start":1763130520470,"stop":1763130520915,"duration":445}},{"uid":"cdbc03546ab93332","reportUrl":"https://vaizcom.github.io/autotests/445/#testresult/cdbc03546ab93332","status":"passed","time":{"start":1763114218660,"stop":1763114218859,"duration":199}},{"uid":"e343898bf371ad27","reportUrl":"https://vaizcom.github.io/autotests/444/#testresult/e343898bf371ad27","status":"passed","time":{"start":1763046903095,"stop":1763046903258,"duration":163}},{"uid":"b090da5202130e81","reportUrl":"https://vaizcom.github.io/autotests/443/#testresult/b090da5202130e81","status":"passed","time":{"start":1763042549774,"stop":1763042550228,"duration":454}},{"uid":"757ad45396e8b9e5","reportUrl":"https://vaizcom.github.io/autotests/442/#testresult/757ad45396e8b9e5","status":"passed","time":{"start":1763040480035,"stop":1763040480306,"duration":271}},{"uid":"47a6c2ef9da29907","reportUrl":"https://vaizcom.github.io/autotests/441/#testresult/47a6c2ef9da29907","status":"passed","time":{"start":1763037160350,"stop":1763037160548,"duration":198}},{"uid":"fae3fba9a8f52f9c","reportUrl":"https://vaizcom.github.io/autotests/440/#testresult/fae3fba9a8f52f9c","status":"passed","time":{"start":1763034752550,"stop":1763034752976,"duration":426}},{"uid":"1ce665916478f1a1","reportUrl":"https://vaizcom.github.io/autotests/439/#testresult/1ce665916478f1a1","status":"passed","time":{"start":1763023056989,"stop":1763023057503,"duration":514}},{"uid":"fd64fb0e165d86ce","reportUrl":"https://vaizcom.github.io/autotests/438/#testresult/fd64fb0e165d86ce","status":"passed","time":{"start":1763020651449,"stop":1763020651973,"duration":524}},{"uid":"d9aa65da9ef8e65c","reportUrl":"https://vaizcom.github.io/autotests/437/#testresult/d9aa65da9ef8e65c","status":"passed","time":{"start":1762972911447,"stop":1762972911803,"duration":356}},{"uid":"6f984ab181707c35","reportUrl":"https://vaizcom.github.io/autotests/436/#testresult/6f984ab181707c35","status":"passed","time":{"start":1762972235096,"stop":1762972235602,"duration":506}},{"uid":"aa18250399f4f96b","reportUrl":"https://vaizcom.github.io/autotests/434/#testresult/aa18250399f4f96b","status":"passed","time":{"start":1762950641865,"stop":1762950642217,"duration":352}},{"uid":"f0778c354f682d51","reportUrl":"https://vaizcom.github.io/autotests/433/#testresult/f0778c354f682d51","status":"passed","time":{"start":1762948961751,"stop":1762948961953,"duration":202}},{"uid":"3202576dbc69d38e","reportUrl":"https://vaizcom.github.io/autotests/432/#testresult/3202576dbc69d38e","status":"passed","time":{"start":1762947167565,"stop":1762947167764,"duration":199}},{"uid":"e001e82879e63600","reportUrl":"https://vaizcom.github.io/autotests/432/#testresult/e001e82879e63600","status":"failed","statusDetails":"AssertionError: Ожидался статус 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","time":{"start":1762939571019,"stop":1762939571324,"duration":305}},{"uid":"7772fb15418bd348","reportUrl":"https://vaizcom.github.io/autotests/431/#testresult/7772fb15418bd348","status":"passed","time":{"start":1762855635384,"stop":1762855635923,"duration":539}},{"uid":"2623217a7a933d3d","reportUrl":"https://vaizcom.github.io/autotests/430/#testresult/2623217a7a933d3d","status":"passed","time":{"start":1762780787724,"stop":1762780787858,"duration":134}},{"uid":"b26194729f9ca860","reportUrl":"https://vaizcom.github.io/autotests/429/#testresult/b26194729f9ca860","status":"passed","time":{"start":1762778944824,"stop":1762778945152,"duration":328}},{"uid":"8b6a15b497024df8","reportUrl":"https://vaizcom.github.io/autotests/427/#testresult/8b6a15b497024df8","status":"passed","time":{"start":1762773886164,"stop":1762773886599,"duration":435}}]},"tags":["backend"]},"source":"bb456ad52e714972.json","parameterValues":[]}