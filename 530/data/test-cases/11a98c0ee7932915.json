{"uid":"11a98c0ee7932915","name":"Проверка доступа project_client к основному документу, проектному документу и отсутствия доступа к персональному документу","fullName":"tests.test_backend.document.access_doc.test_matrix_access_docs#test_project_client_document_access","historyId":"17c35716fd17ff2ac0102f987f030015","time":{"start":1768298686371,"stop":1768298686489,"duration":118},"description":"\n    Проверяем, что project_client имеет доступ к main_space_doc и main_project_doc, но не имеет доступа к main_personal_doc.\n    ","descriptionHtml":"<pre><code>Проверяем, что project_client имеет доступ к main_space_doc и main_project_doc, но не имеет доступа к main_personal_doc.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Доступ к MAIN_SPACE_DOC_ID должен быть разрешён\nassert 503 == 200\n +  where 503 = <Response [503]>.status_code","statusTrace":"client_with_access_only_in_project = <tests.core.client.APIClient object at 0x7f78efae7c90>\nmain_space = '6866309d85fb8d104544a61e'\nmain_space_doc = '68a5b3f4a136528e28f58d65'\nmain_project_doc = '68a81156e503a7ab645236c1'\nmain_personal_doc = '68a5b40ba136528e28f58dba'\n\n    @allure.parent_suite(\"Document Service\")\n    @allure.suite(\"Access document\")\n    @allure.title(\n        'Проверка доступа project_client к основному документу, проектному документу и отсутствия доступа к персональному документу'\n    )\n    def test_project_client_document_access(\n            client_with_access_only_in_project, main_space, main_space_doc, main_project_doc, main_personal_doc\n    ):\n        \"\"\"\n        Проверяем, что project_client имеет доступ к main_space_doc и main_project_doc, но не имеет доступа к main_personal_doc.\n        \"\"\"\n    \n        with allure.step('Проверка доступа project_client к основному документу MAIN_SPACE_DOC_ID'):\n            response_space = client_with_access_only_in_project.post(**get_document_endpoint(document_id=main_space_doc, space_id=main_space))\n>           assert response_space.status_code == 200, 'Доступ к MAIN_SPACE_DOC_ID должен быть разрешён'\nE           AssertionError: Доступ к MAIN_SPACE_DOC_ID должен быть разрешён\nE           assert 503 == 200\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/access_doc/test_matrix_access_docs.py:53: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1768298486051,"stop":1768298486051,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1768298486051,"stop":1768298486051,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1768298486051,"stop":1768298486051,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1768298486051,"stop":1768298486051,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1768298488144,"stop":1768298488609,"duration":465},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1768298488609,"stop":1768298489052,"duration":443},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"client_with_access_only_in_project","time":{"start":1768298493891,"stop":1768298494148,"duration":257},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_personal_doc","time":{"start":1768298686247,"stop":1768298686247,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space_doc","time":{"start":1768298686247,"stop":1768298686247,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_project_doc","time":{"start":1768298686247,"stop":1768298686247,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Проверяем, что project_client имеет доступ к main_space_doc и main_project_doc, но не имеет доступа к main_personal_doc.\n    ","status":"failed","statusMessage":"AssertionError: Доступ к MAIN_SPACE_DOC_ID должен быть разрешён\nassert 503 == 200\n +  where 503 = <Response [503]>.status_code","statusTrace":"client_with_access_only_in_project = <tests.core.client.APIClient object at 0x7f78efae7c90>\nmain_space = '6866309d85fb8d104544a61e'\nmain_space_doc = '68a5b3f4a136528e28f58d65'\nmain_project_doc = '68a81156e503a7ab645236c1'\nmain_personal_doc = '68a5b40ba136528e28f58dba'\n\n    @allure.parent_suite(\"Document Service\")\n    @allure.suite(\"Access document\")\n    @allure.title(\n        'Проверка доступа project_client к основному документу, проектному документу и отсутствия доступа к персональному документу'\n    )\n    def test_project_client_document_access(\n            client_with_access_only_in_project, main_space, main_space_doc, main_project_doc, main_personal_doc\n    ):\n        \"\"\"\n        Проверяем, что project_client имеет доступ к main_space_doc и main_project_doc, но не имеет доступа к main_personal_doc.\n        \"\"\"\n    \n        with allure.step('Проверка доступа project_client к основному документу MAIN_SPACE_DOC_ID'):\n            response_space = client_with_access_only_in_project.post(**get_document_endpoint(document_id=main_space_doc, space_id=main_space))\n>           assert response_space.status_code == 200, 'Доступ к MAIN_SPACE_DOC_ID должен быть разрешён'\nE           AssertionError: Доступ к MAIN_SPACE_DOC_ID должен быть разрешён\nE           assert 503 == 200\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/access_doc/test_matrix_access_docs.py:53: AssertionError","steps":[{"name":"Проверка доступа project_client к основному документу MAIN_SPACE_DOC_ID","time":{"start":1768298686371,"stop":1768298686489,"duration":118},"status":"failed","statusMessage":"AssertionError: Доступ к MAIN_SPACE_DOC_ID должен быть разрешён\nassert 503 == 200\n +  where 503 = <Response [503]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/document/access_doc/test_matrix_access_docs.py\", line 53, in test_project_client_document_access\n    assert response_space.status_code == 200, 'Доступ к MAIN_SPACE_DOC_ID должен быть разрешён'\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"suite","value":"Access document"},{"name":"parentSuite","value":"Document Service"},{"name":"tag","value":"backend"},{"name":"host","value":"runnervmi13qx"},{"name":"thread","value":"2651-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.document.access_doc.test_matrix_access_docs"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":4,"broken":0,"skipped":14,"passed":108,"unknown":0,"total":126},"items":[{"uid":"eb9845b5b7ff10c8","reportUrl":"https://vaizcom.github.io/autotests/529/#testresult/eb9845b5b7ff10c8","status":"passed","time":{"start":1767849875352,"stop":1767849876050,"duration":698}},{"uid":"4973733232f1ef42","reportUrl":"https://vaizcom.github.io/autotests/528/#testresult/4973733232f1ef42","status":"passed","time":{"start":1766507767537,"stop":1766507768494,"duration":957}},{"uid":"bda08f4030e9523f","reportUrl":"https://vaizcom.github.io/autotests/527/#testresult/bda08f4030e9523f","status":"passed","time":{"start":1766506420087,"stop":1766506421145,"duration":1058}},{"uid":"237d7a51e27f44b2","reportUrl":"https://vaizcom.github.io/autotests/526/#testresult/237d7a51e27f44b2","status":"passed","time":{"start":1766505271343,"stop":1766505272065,"duration":722}},{"uid":"65fbe2935533a788","reportUrl":"https://vaizcom.github.io/autotests/525/#testresult/65fbe2935533a788","status":"passed","time":{"start":1766504212385,"stop":1766504213146,"duration":761}},{"uid":"8df64947d9c01e34","reportUrl":"https://vaizcom.github.io/autotests/524/#testresult/8df64947d9c01e34","status":"passed","time":{"start":1766502976783,"stop":1766502977503,"duration":720}},{"uid":"cae264e1cf249117","reportUrl":"https://vaizcom.github.io/autotests/523/#testresult/cae264e1cf249117","status":"passed","time":{"start":1766497109025,"stop":1766497111405,"duration":2380}},{"uid":"db66e7b1fcae273f","reportUrl":"https://vaizcom.github.io/autotests/522/#testresult/db66e7b1fcae273f","status":"passed","time":{"start":1766488758651,"stop":1766488759197,"duration":546}},{"uid":"8e0c840d0d30268f","reportUrl":"https://vaizcom.github.io/autotests/521/#testresult/8e0c840d0d30268f","status":"passed","time":{"start":1766487316128,"stop":1766487316825,"duration":697}},{"uid":"4ab44cf822c0b8b2","reportUrl":"https://vaizcom.github.io/autotests/520/#testresult/4ab44cf822c0b8b2","status":"passed","time":{"start":1766412223556,"stop":1766412224119,"duration":563}},{"uid":"46595d235a171d93","reportUrl":"https://vaizcom.github.io/autotests/519/#testresult/46595d235a171d93","status":"passed","time":{"start":1766406187325,"stop":1766406187969,"duration":644}},{"uid":"5ba3d0e186b79e08","reportUrl":"https://vaizcom.github.io/autotests/518/#testresult/5ba3d0e186b79e08","status":"passed","time":{"start":1766403848314,"stop":1766403848940,"duration":626}},{"uid":"1c0244335fab7621","reportUrl":"https://vaizcom.github.io/autotests/517/#testresult/1c0244335fab7621","status":"passed","time":{"start":1766402436591,"stop":1766402437395,"duration":804}},{"uid":"147c427ab7d66dc1","reportUrl":"https://vaizcom.github.io/autotests/516/#testresult/147c427ab7d66dc1","status":"passed","time":{"start":1766067328237,"stop":1766067328861,"duration":624}},{"uid":"7f1b85b4f2321e1b","reportUrl":"https://vaizcom.github.io/autotests/515/#testresult/7f1b85b4f2321e1b","status":"passed","time":{"start":1766042794004,"stop":1766042794542,"duration":538}},{"uid":"e20ac21553adf62d","reportUrl":"https://vaizcom.github.io/autotests/514/#testresult/e20ac21553adf62d","status":"passed","time":{"start":1765984152215,"stop":1765984152922,"duration":707}},{"uid":"676127e82102e5f9","reportUrl":"https://vaizcom.github.io/autotests/513/#testresult/676127e82102e5f9","status":"passed","time":{"start":1765975498329,"stop":1765975500749,"duration":2420}},{"uid":"158a2ea5881bf730","reportUrl":"https://vaizcom.github.io/autotests/512/#testresult/158a2ea5881bf730","status":"passed","time":{"start":1765891696725,"stop":1765891697476,"duration":751}},{"uid":"35588420d287a800","reportUrl":"https://vaizcom.github.io/autotests/511/#testresult/35588420d287a800","status":"passed","time":{"start":1765889894603,"stop":1765889895169,"duration":566}},{"uid":"a0b1987fb7c7931b","reportUrl":"https://vaizcom.github.io/autotests/510/#testresult/a0b1987fb7c7931b","status":"passed","time":{"start":1765881015038,"stop":1765881015687,"duration":649}}]},"tags":["backend"]},"source":"11a98c0ee7932915.json","parameterValues":[]}