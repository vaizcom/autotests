{"uid":"c59039833ec79314","name":"Негативный кейс: missing kindId","fullName":"tests.test_backend.document.test_get_documents#test_get_documents_invalid_inputs","historyId":"d09e58488a9672e588e2aa3f059c9050","time":{"start":1763387975791,"stop":1763387975919,"duration":128},"status":"failed","statusMessage":"AssertionError: Ожидался статус 400, но получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f061917eb10>\ntemp_space = '691b29650d8887e706faae80'\ntemp_project = '691b29650d8887e706faaf10', kind = 'Project', kind_id = None\nspace_id = 'valid_space_id', expected_status = 400, case_id = 'missing kindId'\n\n    @pytest.mark.parametrize(\n        'kind, kind_id, space_id, expected_status, case_id',\n        [\n            ('Project', 'nonexistent-id', 'valid_space_id', 400, 'invalid kindId'),\n            ('WrongKind', 'valid_project_id', 'valid_space_id', 400, 'invalid kind'),\n            (None, 'valid_project_id', 'valid_space_id', 400, 'missing kind'),\n            ('Project', None, 'valid_space_id', 400, 'missing kindId'),\n        ],\n        ids=['invalid kindId', 'invalid kind', 'missing kind', 'missing kindId'],\n    )\n    def test_get_documents_invalid_inputs(\n        owner_client, temp_space, temp_project, kind, kind_id, space_id, expected_status, case_id\n    ):\n        allure.dynamic.title(f'Негативный кейс: {case_id}')\n    \n        if kind_id == 'valid_project_id':\n            kind_id = temp_project\n    \n        with allure.step(f'Отправка запроса и проверка статуса {expected_status}, проверка ошибки \"InvalidForm\"'):\n            response = owner_client.post(**get_documents_endpoint(kind=kind, kind_id=kind_id, space_id=temp_space))\n>           assert (\n                response.status_code == expected_status\n            ), f'Ожидался статус {expected_status}, но получен {response.status_code}'\nE           AssertionError: Ожидался статус 400, но получен 503\nE           assert 503 == 400\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/test_get_documents.py:76: AssertionError","flaky":true,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1763387735904,"stop":1763387735904,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1763387735904,"stop":1763387735904,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1763387735904,"stop":1763387735904,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1763387735904,"stop":1763387735904,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1763387737613,"stop":1763387737917,"duration":304},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"temp_space","time":{"start":1763387748989,"stop":1763387749547,"duration":558},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"temp_project","time":{"start":1763387749547,"stop":1763387750035,"duration":488},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Ожидался статус 400, но получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f061917eb10>\ntemp_space = '691b29650d8887e706faae80'\ntemp_project = '691b29650d8887e706faaf10', kind = 'Project', kind_id = None\nspace_id = 'valid_space_id', expected_status = 400, case_id = 'missing kindId'\n\n    @pytest.mark.parametrize(\n        'kind, kind_id, space_id, expected_status, case_id',\n        [\n            ('Project', 'nonexistent-id', 'valid_space_id', 400, 'invalid kindId'),\n            ('WrongKind', 'valid_project_id', 'valid_space_id', 400, 'invalid kind'),\n            (None, 'valid_project_id', 'valid_space_id', 400, 'missing kind'),\n            ('Project', None, 'valid_space_id', 400, 'missing kindId'),\n        ],\n        ids=['invalid kindId', 'invalid kind', 'missing kind', 'missing kindId'],\n    )\n    def test_get_documents_invalid_inputs(\n        owner_client, temp_space, temp_project, kind, kind_id, space_id, expected_status, case_id\n    ):\n        allure.dynamic.title(f'Негативный кейс: {case_id}')\n    \n        if kind_id == 'valid_project_id':\n            kind_id = temp_project\n    \n        with allure.step(f'Отправка запроса и проверка статуса {expected_status}, проверка ошибки \"InvalidForm\"'):\n            response = owner_client.post(**get_documents_endpoint(kind=kind, kind_id=kind_id, space_id=temp_space))\n>           assert (\n                response.status_code == expected_status\n            ), f'Ожидался статус {expected_status}, но получен {response.status_code}'\nE           AssertionError: Ожидался статус 400, но получен 503\nE           assert 503 == 400\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/test_get_documents.py:76: AssertionError","steps":[{"name":"Отправка запроса и проверка статуса 400, проверка ошибки \"InvalidForm\"","time":{"start":1763387975791,"stop":1763387975919,"duration":128},"status":"failed","statusMessage":"AssertionError: Ожидался статус 400, но получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/document/test_get_documents.py\", line 76, in test_get_documents_invalid_inputs\n    assert (\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"temp_project::0","time":{"start":1763387989197,"stop":1763387989197,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"temp_space::0","time":{"start":1763387989198,"stop":1763387989326,"duration":128},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.document"},{"name":"suite","value":"test_get_documents"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2589-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.document.test_get_documents"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"case_id","value":"'missing kindId'"},{"name":"expected_status","value":"400"},{"name":"kind","value":"'Project'"},{"name":"kind_id","value":"None"},{"name":"space_id","value":"'valid_space_id'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":5,"broken":0,"skipped":0,"passed":38,"unknown":0,"total":43},"items":[{"uid":"88bb41703b37c0db","reportUrl":"https://vaizcom.github.io/autotests/448/#testresult/88bb41703b37c0db","status":"passed","time":{"start":1763373281237,"stop":1763373281429,"duration":192}},{"uid":"2f0f9d891154dccf","reportUrl":"https://vaizcom.github.io/autotests/448/#testresult/2f0f9d891154dccf","status":"failed","statusDetails":"AssertionError: Ожидался статус 400, но получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","time":{"start":1763372686727,"stop":1763372686893,"duration":166}},{"uid":"b12811981c00fd75","reportUrl":"https://vaizcom.github.io/autotests/447/#testresult/b12811981c00fd75","status":"passed","time":{"start":1763366506110,"stop":1763366506340,"duration":230}},{"uid":"d8f0c1d2df4e8ac8","reportUrl":"https://vaizcom.github.io/autotests/446/#testresult/d8f0c1d2df4e8ac8","status":"passed","time":{"start":1763130582166,"stop":1763130582423,"duration":257}},{"uid":"c4490c4089af6832","reportUrl":"https://vaizcom.github.io/autotests/445/#testresult/c4490c4089af6832","status":"passed","time":{"start":1763114273613,"stop":1763114273851,"duration":238}},{"uid":"142a4f26eb42f735","reportUrl":"https://vaizcom.github.io/autotests/444/#testresult/142a4f26eb42f735","status":"passed","time":{"start":1763046953311,"stop":1763046953511,"duration":200}},{"uid":"75562f902caa39db","reportUrl":"https://vaizcom.github.io/autotests/443/#testresult/75562f902caa39db","status":"passed","time":{"start":1763042609534,"stop":1763042609831,"duration":297}},{"uid":"b2ccaf35a5ebd4c5","reportUrl":"https://vaizcom.github.io/autotests/442/#testresult/b2ccaf35a5ebd4c5","status":"passed","time":{"start":1763040527055,"stop":1763040527251,"duration":196}},{"uid":"7b3ac2caa5a16b3e","reportUrl":"https://vaizcom.github.io/autotests/441/#testresult/7b3ac2caa5a16b3e","status":"passed","time":{"start":1763037214145,"stop":1763037214392,"duration":247}},{"uid":"d159a10f854552b2","reportUrl":"https://vaizcom.github.io/autotests/440/#testresult/d159a10f854552b2","status":"passed","time":{"start":1763034803033,"stop":1763034803237,"duration":204}},{"uid":"30bfa7e4b87be3a2","reportUrl":"https://vaizcom.github.io/autotests/439/#testresult/30bfa7e4b87be3a2","status":"passed","time":{"start":1763023111110,"stop":1763023111352,"duration":242}},{"uid":"f5d6ce630ea359e0","reportUrl":"https://vaizcom.github.io/autotests/438/#testresult/f5d6ce630ea359e0","status":"passed","time":{"start":1763020705491,"stop":1763020705737,"duration":246}},{"uid":"49f202b20d676d6f","reportUrl":"https://vaizcom.github.io/autotests/437/#testresult/49f202b20d676d6f","status":"passed","time":{"start":1762972958285,"stop":1762972958486,"duration":201}},{"uid":"a5b4803d94b243dd","reportUrl":"https://vaizcom.github.io/autotests/436/#testresult/a5b4803d94b243dd","status":"passed","time":{"start":1762972292297,"stop":1762972292562,"duration":265}},{"uid":"fbc5f1ffd31df1fe","reportUrl":"https://vaizcom.github.io/autotests/434/#testresult/fbc5f1ffd31df1fe","status":"passed","time":{"start":1762950687772,"stop":1762950687955,"duration":183}},{"uid":"dce3000899953d85","reportUrl":"https://vaizcom.github.io/autotests/433/#testresult/dce3000899953d85","status":"passed","time":{"start":1762949015731,"stop":1762949015980,"duration":249}},{"uid":"26577b689ae79988","reportUrl":"https://vaizcom.github.io/autotests/432/#testresult/26577b689ae79988","status":"passed","time":{"start":1762947225589,"stop":1762947225836,"duration":247}},{"uid":"de9bc874a0dcc99","reportUrl":"https://vaizcom.github.io/autotests/432/#testresult/de9bc874a0dcc99","status":"failed","statusDetails":"AssertionError: Ожидался статус 400, но получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","time":{"start":1762939581262,"stop":1762939581375,"duration":113}},{"uid":"7814f63a4e3a06bc","reportUrl":"https://vaizcom.github.io/autotests/431/#testresult/7814f63a4e3a06bc","status":"passed","time":{"start":1762855692341,"stop":1762855693385,"duration":1044}},{"uid":"f92f3bea02d3c2ba","reportUrl":"https://vaizcom.github.io/autotests/430/#testresult/f92f3bea02d3c2ba","status":"passed","time":{"start":1762780838502,"stop":1762780838716,"duration":214}}]},"tags":["backend"]},"source":"c59039833ec79314.json","parameterValues":["'missing kindId'","400","'Project'","None","'valid_space_id'"]}