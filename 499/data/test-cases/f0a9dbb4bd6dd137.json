{"uid":"f0a9dbb4bd6dd137","name":"Multiple edit Tasks: неверный taskId должен попасть в failed при статусе 200","fullName":"tests.test_backend.task_service.multiple_edit_tasks.test_multiple_edit_tasks_assignees#test_multiple_edit_tasks_invalid_id_failed","historyId":"3e4d63694e8e787a655e9e9a3c140e39","time":{"start":1765458188995,"stop":1765458189578,"duration":583},"description":"\n    Передаём один валидный taskId и один несуществующий.\n    Ожидаем HTTP 200 и что невалидный id попадает в список failed ответа.\n    ","descriptionHtml":"<pre><code>Передаём один валидный taskId и один несуществующий.\nОжидаем HTTP 200 и что невалидный id попадает в список failed ответа.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: {\"payload\":null,\"type\":\"MultipleEditTasks\",\"error\":{\"code\":\"InvalidForm\",\"fields\":[{\"name\":\"actionType\",\"codes\":[\"actionType must be one of the following values: editTask, moveTaskToGroup, moveTaskToBoard, deleteTask, archiveTask, editMilestone\"],\"meta\":{}}],\"originalType\":\"MultipleEditTasks\"}}\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f7a7e437090>\nmain_space = '6866309d85fb8d104544a61e', main_board = '6866731185fb8d104544e826'\nmake_task_in_main = <function make_task_in_main.<locals>._create_task at 0x7f7a7e1137e0>\n\n    @allure.parent_suite(\"multiple_edit_tasks\")\n    @allure.title(\"Multiple edit Tasks: неверный taskId должен попасть в failed при статусе 200\")\n    def test_multiple_edit_tasks_invalid_id_failed(owner_client, main_space, main_board, make_task_in_main):\n        \"\"\"\n        Передаём один валидный taskId и один несуществующий.\n        Ожидаем HTTP 200 и что невалидный id попадает в список failed ответа.\n        \"\"\"\n        with allure.step(\"Готовим валидную задачу и невалидный taskId\"):\n            valid_task = make_task_in_main({\"name\": \"Valid task\"})\n            valid_id = valid_task[\"_id\"]\n            replaced_digit = \"0\" if valid_id[-1] != \"0\" else \"1\"\n            invalid_id = valid_id[:-1] + replaced_digit\n    \n        with allure.step(\"Вызываем multiple_edit_tasks с валидным и невалидным taskId\"):\n            payload = [\n                {\"taskId\": valid_id, \"assignees\": []},\n                {\"taskId\": invalid_id, \"assignees\": []},\n            ]\n            resp = owner_client.post(**multiple_edit_tasks_endpoint(\n                space_id=main_space,\n                tasks=payload,\n            ))\n>           assert resp.status_code == 200, resp.text\nE           AssertionError: {\"payload\":null,\"type\":\"MultipleEditTasks\",\"error\":{\"code\":\"InvalidForm\",\"fields\":[{\"name\":\"actionType\",\"codes\":[\"actionType must be one of the following values: editTask, moveTaskToGroup, moveTaskToBoard, deleteTask, archiveTask, editMilestone\"],\"meta\":{}}],\"originalType\":\"MultipleEditTasks\"}}\nE           assert 400 == 200\nE            +  where 400 = <Response [400]>.status_code\n\ntests/test_backend/task_service/multiple_edit_tasks/test_multiple_edit_tasks_assignees.py:84: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1765457368185,"stop":1765457368185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1765457368185,"stop":1765457368185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1765457368185,"stop":1765457368691,"duration":506},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1765457368185,"stop":1765457368185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1765457368185,"stop":1765457368185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1765457370634,"stop":1765457370872,"duration":238},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1765457370872,"stop":1765457371085,"duration":213},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_board","time":{"start":1765457726227,"stop":1765457726691,"duration":464},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_task_in_main","time":{"start":1765458188995,"stop":1765458188995,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Передаём один валидный taskId и один несуществующий.\n    Ожидаем HTTP 200 и что невалидный id попадает в список failed ответа.\n    ","status":"failed","statusMessage":"AssertionError: {\"payload\":null,\"type\":\"MultipleEditTasks\",\"error\":{\"code\":\"InvalidForm\",\"fields\":[{\"name\":\"actionType\",\"codes\":[\"actionType must be one of the following values: editTask, moveTaskToGroup, moveTaskToBoard, deleteTask, archiveTask, editMilestone\"],\"meta\":{}}],\"originalType\":\"MultipleEditTasks\"}}\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f7a7e437090>\nmain_space = '6866309d85fb8d104544a61e', main_board = '6866731185fb8d104544e826'\nmake_task_in_main = <function make_task_in_main.<locals>._create_task at 0x7f7a7e1137e0>\n\n    @allure.parent_suite(\"multiple_edit_tasks\")\n    @allure.title(\"Multiple edit Tasks: неверный taskId должен попасть в failed при статусе 200\")\n    def test_multiple_edit_tasks_invalid_id_failed(owner_client, main_space, main_board, make_task_in_main):\n        \"\"\"\n        Передаём один валидный taskId и один несуществующий.\n        Ожидаем HTTP 200 и что невалидный id попадает в список failed ответа.\n        \"\"\"\n        with allure.step(\"Готовим валидную задачу и невалидный taskId\"):\n            valid_task = make_task_in_main({\"name\": \"Valid task\"})\n            valid_id = valid_task[\"_id\"]\n            replaced_digit = \"0\" if valid_id[-1] != \"0\" else \"1\"\n            invalid_id = valid_id[:-1] + replaced_digit\n    \n        with allure.step(\"Вызываем multiple_edit_tasks с валидным и невалидным taskId\"):\n            payload = [\n                {\"taskId\": valid_id, \"assignees\": []},\n                {\"taskId\": invalid_id, \"assignees\": []},\n            ]\n            resp = owner_client.post(**multiple_edit_tasks_endpoint(\n                space_id=main_space,\n                tasks=payload,\n            ))\n>           assert resp.status_code == 200, resp.text\nE           AssertionError: {\"payload\":null,\"type\":\"MultipleEditTasks\",\"error\":{\"code\":\"InvalidForm\",\"fields\":[{\"name\":\"actionType\",\"codes\":[\"actionType must be one of the following values: editTask, moveTaskToGroup, moveTaskToBoard, deleteTask, archiveTask, editMilestone\"],\"meta\":{}}],\"originalType\":\"MultipleEditTasks\"}}\nE           assert 400 == 200\nE            +  where 400 = <Response [400]>.status_code\n\ntests/test_backend/task_service/multiple_edit_tasks/test_multiple_edit_tasks_assignees.py:84: AssertionError","steps":[{"name":"Готовим валидную задачу и невалидный taskId","time":{"start":1765458188995,"stop":1765458189331,"duration":336},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Вызываем multiple_edit_tasks с валидным и невалидным taskId","time":{"start":1765458189331,"stop":1765458189578,"duration":247},"status":"failed","statusMessage":"AssertionError: {\"payload\":null,\"type\":\"MultipleEditTasks\",\"error\":{\"code\":\"InvalidForm\",\"fields\":[{\"name\":\"actionType\",\"codes\":[\"actionType must be one of the following values: editTask, moveTaskToGroup, moveTaskToBoard, deleteTask, archiveTask, editMilestone\"],\"meta\":{}}],\"originalType\":\"MultipleEditTasks\"}}\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/task_service/multiple_edit_tasks/test_multiple_edit_tasks_assignees.py\", line 84, in test_multiple_edit_tasks_invalid_id_failed\n    assert resp.status_code == 200, resp.text\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"make_task_in_main::0","time":{"start":1765458189600,"stop":1765458189862,"duration":262},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"multiple_edit_tasks"},{"name":"tag","value":"backend"},{"name":"suite","value":"test_multiple_edit_tasks_assignees"},{"name":"host","value":"runnervmoqczp"},{"name":"thread","value":"2641-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.task_service.multiple_edit_tasks.test_multiple_edit_tasks_assignees"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":17,"unknown":0,"total":19},"items":[{"uid":"da63021e2ccf56e9","reportUrl":"https://vaizcom.github.io/autotests/498/#testresult/da63021e2ccf56e9","status":"passed","time":{"start":1765444439757,"stop":1765444440579,"duration":822}},{"uid":"b073ea0ef7e14a8d","reportUrl":"https://vaizcom.github.io/autotests/497/#testresult/b073ea0ef7e14a8d","status":"passed","time":{"start":1765442548865,"stop":1765442549559,"duration":694}},{"uid":"7ea91f8748452d54","reportUrl":"https://vaizcom.github.io/autotests/496/#testresult/7ea91f8748452d54","status":"passed","time":{"start":1765372965047,"stop":1765372965758,"duration":711}},{"uid":"3033673bba24da33","reportUrl":"https://vaizcom.github.io/autotests/495/#testresult/3033673bba24da33","status":"passed","time":{"start":1765274543339,"stop":1765274544522,"duration":1183}},{"uid":"d95e91e217b512fb","reportUrl":"https://vaizcom.github.io/autotests/494/#testresult/d95e91e217b512fb","status":"passed","time":{"start":1765206713768,"stop":1765206717083,"duration":3315}},{"uid":"deb0a76785621991","reportUrl":"https://vaizcom.github.io/autotests/493/#testresult/deb0a76785621991","status":"passed","time":{"start":1765203576623,"stop":1765203577322,"duration":699}},{"uid":"3052f16b7baad5e7","reportUrl":"https://vaizcom.github.io/autotests/492/#testresult/3052f16b7baad5e7","status":"passed","time":{"start":1765200718754,"stop":1765200719376,"duration":622}},{"uid":"35e1d426c2d67242","reportUrl":"https://vaizcom.github.io/autotests/491/#testresult/35e1d426c2d67242","status":"passed","time":{"start":1765189299286,"stop":1765189299971,"duration":685}},{"uid":"7ee40e3af47dfb42","reportUrl":"https://vaizcom.github.io/autotests/490/#testresult/7ee40e3af47dfb42","status":"passed","time":{"start":1765187963747,"stop":1765187964453,"duration":706}},{"uid":"539433a76378f283","reportUrl":"https://vaizcom.github.io/autotests/489/#testresult/539433a76378f283","status":"passed","time":{"start":1764995159282,"stop":1764995159937,"duration":655}},{"uid":"e11c1d1d6490caab","reportUrl":"https://vaizcom.github.io/autotests/488/#testresult/e11c1d1d6490caab","status":"passed","time":{"start":1764856188261,"stop":1764856188832,"duration":571}},{"uid":"deef45093f50046f","reportUrl":"https://vaizcom.github.io/autotests/487/#testresult/deef45093f50046f","status":"passed","time":{"start":1764851570844,"stop":1764851571451,"duration":607}},{"uid":"af30ad3998a10beb","reportUrl":"https://vaizcom.github.io/autotests/486/#testresult/af30ad3998a10beb","status":"passed","time":{"start":1764848841429,"stop":1764848842043,"duration":614}},{"uid":"eac1390b7a8e0bee","reportUrl":"https://vaizcom.github.io/autotests/485/#testresult/eac1390b7a8e0bee","status":"passed","time":{"start":1764766895500,"stop":1764766896196,"duration":696}},{"uid":"819cc7a60f5e122e","reportUrl":"https://vaizcom.github.io/autotests/484/#testresult/819cc7a60f5e122e","status":"failed","statusDetails":"AssertionError: <html>\r\n  <head><title>503 Service Temporarily Unavailable</title></head>\r\n  <body>\r\n  <center><h1>503 Service Temporarily Unavailable</h1></center>\r\n  <hr><center>nginx</center>\r\n  </body>\r\n  </html>\r\n  \nassert 503 == 200\n +  where 503 = <Response [503]>.status_code","time":{"start":1764765361192,"stop":1764765361360,"duration":168}},{"uid":"6700ce3deb82062e","reportUrl":"https://vaizcom.github.io/autotests/483/#testresult/6700ce3deb82062e","status":"passed","time":{"start":1764749301432,"stop":1764749302056,"duration":624}},{"uid":"4199bcbb9ad3879d","reportUrl":"https://vaizcom.github.io/autotests/482/#testresult/4199bcbb9ad3879d","status":"passed","time":{"start":1764687308617,"stop":1764687309194,"duration":577}},{"uid":"aa3bc5dc8c64fcd1","reportUrl":"https://vaizcom.github.io/autotests/481/#testresult/aa3bc5dc8c64fcd1","status":"passed","time":{"start":1764680349848,"stop":1764680350498,"duration":650}}]},"tags":["backend"]},"source":"f0a9dbb4bd6dd137.json","parameterValues":[]}