{"uid":"e5d360d234350439","name":"Edit Task: проверка редактирования всех опциональных полей задачи для роли member_client","fullName":"tests.test_backend.task_service.edit_task.access_edit_task.test_edit_task#test_edit_task_endpoint_all_fields","historyId":"b7ce2f9f98bcff35cc6cdde11cdfa998","time":{"start":1770372964309,"stop":1770372964629,"duration":320},"status":"failed","statusMessage":"AssertionError: {\"payload\":null,\"type\":\"CreateTask\",\"error\":{\"code\":\"InternalServerError\",\"fields\":[],\"originalType\":\"CreateTask\",\"meta\":{\"context\":\"MongoServerError\",\"message\":\"Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.\"}}}\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"request = <FixtureRequest for <Function test_edit_task_endpoint_all_fields[member_client-200]>>\nowner_client = <tests.core.client.APIClient object at 0x7f9a5de10fd0>\nmain_space = '6866309d85fb8d104544a61e'\nmake_task_in_main = <function make_task_in_main.<locals>._create_task at 0x7f9a5d9dc9a0>\nmain_board = '6866731185fb8d104544e826'\nmain_project = '686672af85fb8d104544e798', client_fixture_name = 'member_client'\nexpected_status_code = 200\n\n    @allure.parent_suite(\"Task Service\")\n    @allure.suite(\"Edit Task\")\n    @allure.sub_suite(\"Access edit Task\")\n    @pytest.mark.parametrize(\n        \"client_fixture_name, expected_status_code\",\n        [\n            (\"owner_client\", 200),\n            (\"manager_client\", 200),\n            (\"member_client\", 200),\n            (\"guest_client\", 403),\n        ],\n    )\n    def test_edit_task_endpoint_all_fields(\n        request, owner_client, main_space, make_task_in_main, main_board, main_project,\n        client_fixture_name, expected_status_code\n    ):\n        allure.dynamic.title(f\"Edit Task: проверка редактирования всех опциональных полей задачи для роли {client_fixture_name}\")\n    \n        \"\"\"\n        Проверяет успешное редактирование задачи, передав все возможные опциональные поля.\n        \"\"\"\n        client_to_test = request.getfixturevalue(client_fixture_name)\n    \n        initial_task_name = f\"Edit Task: Задача для редактирования от {client_fixture_name}\"\n>       initial_task_data = make_task_in_main({\n            \"name\": initial_task_name,\n        })\n\ntests/test_backend/task_service/edit_task/access_edit_task/test_edit_task.py:86: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nbody_overrides = {'name': 'Edit Task: Задача для редактирования от member_client'}\n\n    def _create_task(body_overrides: dict):\n        body = {\n            \"space_id\": main_space,\n            \"board\": main_board\n        }\n        # объединим остальные поля в create_task_endpoint через kwargs\n        resp = owner_client.post(**create_task_endpoint(**body, **body_overrides))\n>       assert resp.status_code == 200, resp.text\nE       AssertionError: {\"payload\":null,\"type\":\"CreateTask\",\"error\":{\"code\":\"InternalServerError\",\"fields\":[],\"originalType\":\"CreateTask\",\"meta\":{\"context\":\"MongoServerError\",\"message\":\"Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.\"}}}\nE       assert 400 == 200\nE        +  where 400 = <Response [400]>.status_code\n\ntests/test_backend/task_service/conftest.py:127: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1770372203884,"stop":1770372203884,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1770372203884,"stop":1770372204480,"duration":596},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1770372203884,"stop":1770372203884,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1770372203884,"stop":1770372203884,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1770372203884,"stop":1770372203884,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1770372206513,"stop":1770372206793,"duration":280},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1770372206793,"stop":1770372207079,"duration":286},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_project","time":{"start":1770372207079,"stop":1770372207348,"duration":269},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"member_client","time":{"start":1770372208809,"stop":1770372209091,"duration":282},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_board","time":{"start":1770372212994,"stop":1770372213271,"duration":277},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_task_in_main","time":{"start":1770372964309,"stop":1770372964309,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"make_task_in_main::0","time":{"start":1770372964635,"stop":1770372964635,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"Task Service"},{"name":"subSuite","value":"Access edit Task"},{"name":"suite","value":"Edit Task"},{"name":"tag","value":"backend"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"2745-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.task_service.edit_task.access_edit_task.test_edit_task"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"client_fixture_name","value":"'member_client'"},{"name":"expected_status_code","value":"200"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":31,"unknown":0,"total":33},"items":[{"uid":"56020aa4ad40e41d","reportUrl":"https://vaizcom.github.io/autotests/552/#testresult/56020aa4ad40e41d","status":"passed","time":{"start":1770371598522,"stop":1770371600011,"duration":1489}},{"uid":"d5845b0c5690c2ef","reportUrl":"https://vaizcom.github.io/autotests/551/#testresult/d5845b0c5690c2ef","status":"passed","time":{"start":1770299116590,"stop":1770299117834,"duration":1244}},{"uid":"de24044cd7a661a8","reportUrl":"https://vaizcom.github.io/autotests/550/#testresult/de24044cd7a661a8","status":"passed","time":{"start":1770291242895,"stop":1770291244010,"duration":1115}},{"uid":"5d4c682f9c259d2","reportUrl":"https://vaizcom.github.io/autotests/549/#testresult/5d4c682f9c259d2","status":"passed","time":{"start":1770281985773,"stop":1770281986949,"duration":1176}},{"uid":"82ada162a3dc671c","reportUrl":"https://vaizcom.github.io/autotests/548/#testresult/82ada162a3dc671c","status":"passed","time":{"start":1770276302430,"stop":1770276303614,"duration":1184}},{"uid":"d70a5f4a80846aab","reportUrl":"https://vaizcom.github.io/autotests/547/#testresult/d70a5f4a80846aab","status":"passed","time":{"start":1769093057213,"stop":1769093058414,"duration":1201}},{"uid":"19bfea5c37e185f9","reportUrl":"https://vaizcom.github.io/autotests/546/#testresult/19bfea5c37e185f9","status":"passed","time":{"start":1769008168476,"stop":1769008169763,"duration":1287}},{"uid":"838c0e26153ac82b","reportUrl":"https://vaizcom.github.io/autotests/545/#testresult/838c0e26153ac82b","status":"passed","time":{"start":1768995461033,"stop":1768995462229,"duration":1196}},{"uid":"5e91f82cb8dad8f1","reportUrl":"https://vaizcom.github.io/autotests/544/#testresult/5e91f82cb8dad8f1","status":"passed","time":{"start":1768815764841,"stop":1768815766535,"duration":1694}},{"uid":"63022240a38ecf4a","reportUrl":"https://vaizcom.github.io/autotests/543/#testresult/63022240a38ecf4a","status":"passed","time":{"start":1768812870010,"stop":1768812871168,"duration":1158}},{"uid":"c5b2b33740058507","reportUrl":"https://vaizcom.github.io/autotests/541/#testresult/c5b2b33740058507","status":"passed","time":{"start":1768810508494,"stop":1768810509605,"duration":1111}},{"uid":"e6de347b76852dfd","reportUrl":"https://vaizcom.github.io/autotests/542/#testresult/e6de347b76852dfd","status":"passed","time":{"start":1768573830152,"stop":1768573831372,"duration":1220}},{"uid":"d05fcb235773dc31","reportUrl":"https://vaizcom.github.io/autotests/540/#testresult/d05fcb235773dc31","status":"passed","time":{"start":1768572074932,"stop":1768572076107,"duration":1175}},{"uid":"3a7ba6df7c86cb8a","reportUrl":"https://vaizcom.github.io/autotests/539/#testresult/3a7ba6df7c86cb8a","status":"passed","time":{"start":1768484295769,"stop":1768484296973,"duration":1204}},{"uid":"e9b6981e5dcd25ba","reportUrl":"https://vaizcom.github.io/autotests/538/#testresult/e9b6981e5dcd25ba","status":"passed","time":{"start":1768474519887,"stop":1768474520861,"duration":974}},{"uid":"3c5ed7f282f0e381","reportUrl":"https://vaizcom.github.io/autotests/537/#testresult/3c5ed7f282f0e381","status":"passed","time":{"start":1768473068126,"stop":1768473069261,"duration":1135}},{"uid":"99cbba4917c96e50","reportUrl":"https://vaizcom.github.io/autotests/536/#testresult/99cbba4917c96e50","status":"passed","time":{"start":1768470226660,"stop":1768470227837,"duration":1177}},{"uid":"8646500d55fec6e1","reportUrl":"https://vaizcom.github.io/autotests/534/#testresult/8646500d55fec6e1","status":"passed","time":{"start":1768468260457,"stop":1768468261562,"duration":1105}},{"uid":"7cb66f5458b540cb","reportUrl":"https://vaizcom.github.io/autotests/533/#testresult/7cb66f5458b540cb","status":"passed","time":{"start":1768404041178,"stop":1768404042537,"duration":1359}},{"uid":"892b773836b5d175","reportUrl":"https://vaizcom.github.io/autotests/532/#testresult/892b773836b5d175","status":"passed","time":{"start":1768317440414,"stop":1768317441481,"duration":1067}}]},"tags":["backend"]},"source":"e5d360d234350439.json","parameterValues":["'member_client'","200"]}