{"uid":"5ef9e7740a1a9e15","name":"test_archive_all_documents[project_docs]","fullName":"tests.test_backend.document.test_archive_all_docs#test_archive_all_documents","historyId":"81a733a0986e34e9cc5f1634f12b9c7a","time":{"start":1762514868062,"stop":1762514868187,"duration":125},"description":"\n    Проверяем удаление всех документов в пространстве и проекте.\n    ","descriptionHtml":"<pre><code>Проверяем удаление всех документов в пространстве и проекте.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Не удалось получить список документов\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"request = <FixtureRequest for <Function test_archive_all_documents[project_docs]>>\nowner_client = <tests.core.client.APIClient object at 0x7fdb69ea7250>\nkind = 'Project', container_fixture = 'main_project'\nmain_space = '6866309d85fb8d104544a61e'\nexcluded_documents = {'68a5b3f4a136528e28f58d65', '68a81156e503a7ab645236c1'}\n\n    @pytest.mark.parametrize(\n        'kind, container_fixture',\n        [\n            ('Space', 'main_space'),\n            ('Project', 'main_project'),\n        ],\n        ids=['space_docs', 'project_docs'],\n    )\n    def test_archive_all_documents(request, owner_client, kind, container_fixture, main_space, excluded_documents):\n        \"\"\"\n        Проверяем удаление всех документов в пространстве и проекте.\n        \"\"\"\n        with allure.step(f'Подготовка к удалению документов в {kind}'):\n            container_id = request.getfixturevalue(container_fixture)\n    \n        with allure.step(f'Получение списка документов в {kind}'):\n            docs_resp = owner_client.post(**get_documents_endpoint(space_id=main_space, kind=kind, kind_id=container_id))\n>           assert docs_resp.status_code == 200, 'Не удалось получить список документов'\nE           AssertionError: Не удалось получить список документов\nE           assert 400 == 200\nE            +  where 400 = <Response [400]>.status_code\n\ntests/test_backend/document/test_archive_all_docs.py:36: AssertionError","flaky":true,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1762514744675,"stop":1762514744675,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1762514744675,"stop":1762514745163,"duration":488},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1762514744675,"stop":1762514744675,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1762514744675,"stop":1762514744675,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1762514744675,"stop":1762514744675,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1762514747767,"stop":1762514748016,"duration":249},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1762514748016,"stop":1762514748239,"duration":223},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_project","time":{"start":1762514748239,"stop":1762514748665,"duration":426},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space_doc","time":{"start":1762514866282,"stop":1762514866282,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_project_doc","time":{"start":1762514866282,"stop":1762514866282,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"excluded_documents","time":{"start":1762514867931,"stop":1762514867931,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Проверяем удаление всех документов в пространстве и проекте.\n    ","status":"failed","statusMessage":"AssertionError: Не удалось получить список документов\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"request = <FixtureRequest for <Function test_archive_all_documents[project_docs]>>\nowner_client = <tests.core.client.APIClient object at 0x7fdb69ea7250>\nkind = 'Project', container_fixture = 'main_project'\nmain_space = '6866309d85fb8d104544a61e'\nexcluded_documents = {'68a5b3f4a136528e28f58d65', '68a81156e503a7ab645236c1'}\n\n    @pytest.mark.parametrize(\n        'kind, container_fixture',\n        [\n            ('Space', 'main_space'),\n            ('Project', 'main_project'),\n        ],\n        ids=['space_docs', 'project_docs'],\n    )\n    def test_archive_all_documents(request, owner_client, kind, container_fixture, main_space, excluded_documents):\n        \"\"\"\n        Проверяем удаление всех документов в пространстве и проекте.\n        \"\"\"\n        with allure.step(f'Подготовка к удалению документов в {kind}'):\n            container_id = request.getfixturevalue(container_fixture)\n    \n        with allure.step(f'Получение списка документов в {kind}'):\n            docs_resp = owner_client.post(**get_documents_endpoint(space_id=main_space, kind=kind, kind_id=container_id))\n>           assert docs_resp.status_code == 200, 'Не удалось получить список документов'\nE           AssertionError: Не удалось получить список документов\nE           assert 400 == 200\nE            +  where 400 = <Response [400]>.status_code\n\ntests/test_backend/document/test_archive_all_docs.py:36: AssertionError","steps":[{"name":"Подготовка к удалению документов в Project","time":{"start":1762514868062,"stop":1762514868062,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Получение списка документов в Project","time":{"start":1762514868062,"stop":1762514868187,"duration":125},"status":"failed","statusMessage":"AssertionError: Не удалось получить список документов\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/document/test_archive_all_docs.py\", line 36, in test_archive_all_documents\n    assert docs_resp.status_code == 200, 'Не удалось получить список документов'\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.document"},{"name":"suite","value":"test_archive_all_docs"},{"name":"host","value":"runnervmf2e7y"},{"name":"thread","value":"2586-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.document.test_archive_all_docs"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"container_fixture","value":"'main_project'"},{"name":"kind","value":"'Project'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":12,"unknown":0,"total":15},"items":[{"uid":"f82cb815cf8bac22","reportUrl":"https://vaizcom.github.io/autotests/420/#testresult/f82cb815cf8bac22","status":"passed","time":{"start":1762507676384,"stop":1762507677144,"duration":760}},{"uid":"f92530bb0b11dc15","reportUrl":"https://vaizcom.github.io/autotests/420/#testresult/f92530bb0b11dc15","status":"failed","statusDetails":"AssertionError: Не удалось получить список документов\nassert 503 == 200\n +  where 503 = <Response [503]>.status_code","time":{"start":1762506264079,"stop":1762506264190,"duration":111}},{"uid":"29c1c755a9db038d","reportUrl":"https://vaizcom.github.io/autotests/419/#testresult/29c1c755a9db038d","status":"passed","time":{"start":1762505487730,"stop":1762505487926,"duration":196}},{"uid":"e3fd0ef7c4e70ec0","reportUrl":"https://vaizcom.github.io/autotests/418/#testresult/e3fd0ef7c4e70ec0","status":"passed","time":{"start":1762354466160,"stop":1762354466425,"duration":265}},{"uid":"791307d5d8b2133","reportUrl":"https://vaizcom.github.io/autotests/417/#testresult/791307d5d8b2133","status":"passed","time":{"start":1762353405665,"stop":1762353405923,"duration":258}},{"uid":"6fb6a2c5f432d294","reportUrl":"https://vaizcom.github.io/autotests/416/#testresult/6fb6a2c5f432d294","status":"passed","time":{"start":1762349995374,"stop":1762349995607,"duration":233}},{"uid":"6256c16d5ad76fb4","reportUrl":"https://vaizcom.github.io/autotests/415/#testresult/6256c16d5ad76fb4","status":"passed","time":{"start":1762331965858,"stop":1762331966052,"duration":194}},{"uid":"208a913a058ac144","reportUrl":"https://vaizcom.github.io/autotests/414/#testresult/208a913a058ac144","status":"passed","time":{"start":1762329019510,"stop":1762329019757,"duration":247}},{"uid":"14c93d55bbfe3b98","reportUrl":"https://vaizcom.github.io/autotests/413/#testresult/14c93d55bbfe3b98","status":"passed","time":{"start":1762270628857,"stop":1762270629149,"duration":292}},{"uid":"e4641e4bbb06eb44","reportUrl":"https://vaizcom.github.io/autotests/412/#testresult/e4641e4bbb06eb44","status":"passed","time":{"start":1762269841844,"stop":1762269843226,"duration":1382}},{"uid":"f99062e088b09c17","reportUrl":"https://vaizcom.github.io/autotests/411/#testresult/f99062e088b09c17","status":"failed","statusDetails":"AssertionError: Не удалось архивировать документ 690a1a0ae4567e7b3a4b00e7: статус 400\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code","time":{"start":1762269706772,"stop":1762269715206,"duration":8434}},{"uid":"69dadb639b47d7c6","reportUrl":"https://vaizcom.github.io/autotests/410/#testresult/69dadb639b47d7c6","status":"passed","time":{"start":1762269484829,"stop":1762269485516,"duration":687}},{"uid":"8df9a3f05ad8b58f","reportUrl":"https://vaizcom.github.io/autotests/409/#testresult/8df9a3f05ad8b58f","status":"passed","time":{"start":1762268850738,"stop":1762268850943,"duration":205}},{"uid":"cb58c2d91769b8ad","reportUrl":"https://vaizcom.github.io/autotests/408/#testresult/cb58c2d91769b8ad","status":"passed","time":{"start":1762245240429,"stop":1762245240779,"duration":350}}]},"tags":["backend"]},"source":"5ef9e7740a1a9e15.json","parameterValues":["'main_project'","'Project'"]}