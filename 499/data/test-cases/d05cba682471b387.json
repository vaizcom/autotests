{"uid":"d05cba682471b387","name":"Multiple edit Tasks: completed=True меняет только незавершённую таску, завершённая остаётся без изменений","fullName":"tests.test_backend.task_service.multiple_edit_tasks.test_multiple_edit_tasks_completed#test_multiple_edit_tasks_sets_completed_only_uncompleted","historyId":"5ad67a5ca595a0258056436af4e9400f","time":{"start":1765458209729,"stop":1765458211341,"duration":1612},"status":"failed","statusMessage":"AssertionError: Ожидали 200, получили 400\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f7a7e437090>\nmain_space = '6866309d85fb8d104544a61e', main_board = '6866731185fb8d104544e826'\n\n    @allure.parent_suite(\"multiple_edit_tasks\")\n    def test_multiple_edit_tasks_sets_completed_only_uncompleted(owner_client, main_space, main_board):\n        allure.dynamic.title(\"Multiple edit Tasks: completed=True меняет только незавершённую таску, завершённая остаётся без изменений\")\n    \n        \"\"\"\n        Создаём 2 задачи:\n        - task_done: заранее ставим completed=True\n        - task_todo: оставляем completed=False\n        Применяем MultipleEditTasks с completed=True к обеим таскам.\n        Проверяем:\n        - в payload.success присутствуют task_todo и task_done\n        - состояния по get_task: task_done остался True, task_todo стал True\n        Удаляем созданные задачи.\n        \"\"\"\n    \n        t_true = None\n        t_false = None\n        try:\n            with allure.step(\"предусловие: Создаём 2 задачи  task_completed_true, task_completed_false\"):\n                _true = owner_client.post(\n                    **create_task_endpoint(main_space, board=main_board, completed=True, name=\"task_completed_true\"))\n                _false = owner_client.post(\n                    **create_task_endpoint(main_space, board=main_board, completed=False, name=\"task_completed_false\"))\n                t_true = (((_true.json().get(\"payload\") or {}).get(\"task\")) or {}).get(\"_id\")\n                t_false = (((_false.json().get(\"payload\") or {}).get(\"task\")) or {}).get(\"_id\")\n    \n            with allure.step(\"Проверяем предусловие корректно выставленных completed: используем для проверки get_task\"):\n                r_true = owner_client.post(**get_task_endpoint(space_id=main_space, slug_id=t_true))\n                r_true.raise_for_status()\n                t_true_body = ((r_true.json().get(\"payload\") or {}).get(\"task\")) or {}\n                assert t_true_body.get(\n                    \"completed\") is True, f\"task_done должен быть completed=True, получено {t_true_body.get('completed')!r}\"\n    \n                r_false = owner_client.post(**get_task_endpoint(space_id=main_space, slug_id=t_false))\n                r_false.raise_for_status()\n                r_false_body = ((r_false.json().get(\"payload\") or {}).get(\"task\")) or {}\n                assert r_false_body.get(\n                    \"completed\") is False, f\"task_todo должен быть не завершён, получено {r_false_body.get('completed')!r}\"\n    \n            with allure.step(\"Применяем completed=True к обеим задачам через MultipleEditTasks\"):\n                payload = [\n                    {\"taskId\": t_true, \"completed\": True},\n                    {\"taskId\": t_false, \"completed\": True},\n                ]\n                resp = owner_client.post(**multiple_edit_tasks_endpoint(space_id=main_space, tasks=payload))\n>               assert resp.status_code == 200, f\"Ожидали 200, получили {resp.status_code}\"\nE               AssertionError: Ожидали 200, получили 400\nE               assert 400 == 200\nE                +  where 400 = <Response [400]>.status_code\n\ntests/test_backend/task_service/multiple_edit_tasks/test_multiple_edit_tasks_completed.py:110: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1765457368185,"stop":1765457368185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1765457368185,"stop":1765457368185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1765457368185,"stop":1765457368691,"duration":506},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1765457368185,"stop":1765457368185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1765457368185,"stop":1765457368185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1765457370634,"stop":1765457370872,"duration":238},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1765457370872,"stop":1765457371085,"duration":213},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_board","time":{"start":1765457726227,"stop":1765457726691,"duration":464},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Ожидали 200, получили 400\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f7a7e437090>\nmain_space = '6866309d85fb8d104544a61e', main_board = '6866731185fb8d104544e826'\n\n    @allure.parent_suite(\"multiple_edit_tasks\")\n    def test_multiple_edit_tasks_sets_completed_only_uncompleted(owner_client, main_space, main_board):\n        allure.dynamic.title(\"Multiple edit Tasks: completed=True меняет только незавершённую таску, завершённая остаётся без изменений\")\n    \n        \"\"\"\n        Создаём 2 задачи:\n        - task_done: заранее ставим completed=True\n        - task_todo: оставляем completed=False\n        Применяем MultipleEditTasks с completed=True к обеим таскам.\n        Проверяем:\n        - в payload.success присутствуют task_todo и task_done\n        - состояния по get_task: task_done остался True, task_todo стал True\n        Удаляем созданные задачи.\n        \"\"\"\n    \n        t_true = None\n        t_false = None\n        try:\n            with allure.step(\"предусловие: Создаём 2 задачи  task_completed_true, task_completed_false\"):\n                _true = owner_client.post(\n                    **create_task_endpoint(main_space, board=main_board, completed=True, name=\"task_completed_true\"))\n                _false = owner_client.post(\n                    **create_task_endpoint(main_space, board=main_board, completed=False, name=\"task_completed_false\"))\n                t_true = (((_true.json().get(\"payload\") or {}).get(\"task\")) or {}).get(\"_id\")\n                t_false = (((_false.json().get(\"payload\") or {}).get(\"task\")) or {}).get(\"_id\")\n    \n            with allure.step(\"Проверяем предусловие корректно выставленных completed: используем для проверки get_task\"):\n                r_true = owner_client.post(**get_task_endpoint(space_id=main_space, slug_id=t_true))\n                r_true.raise_for_status()\n                t_true_body = ((r_true.json().get(\"payload\") or {}).get(\"task\")) or {}\n                assert t_true_body.get(\n                    \"completed\") is True, f\"task_done должен быть completed=True, получено {t_true_body.get('completed')!r}\"\n    \n                r_false = owner_client.post(**get_task_endpoint(space_id=main_space, slug_id=t_false))\n                r_false.raise_for_status()\n                r_false_body = ((r_false.json().get(\"payload\") or {}).get(\"task\")) or {}\n                assert r_false_body.get(\n                    \"completed\") is False, f\"task_todo должен быть не завершён, получено {r_false_body.get('completed')!r}\"\n    \n            with allure.step(\"Применяем completed=True к обеим задачам через MultipleEditTasks\"):\n                payload = [\n                    {\"taskId\": t_true, \"completed\": True},\n                    {\"taskId\": t_false, \"completed\": True},\n                ]\n                resp = owner_client.post(**multiple_edit_tasks_endpoint(space_id=main_space, tasks=payload))\n>               assert resp.status_code == 200, f\"Ожидали 200, получили {resp.status_code}\"\nE               AssertionError: Ожидали 200, получили 400\nE               assert 400 == 200\nE                +  where 400 = <Response [400]>.status_code\n\ntests/test_backend/task_service/multiple_edit_tasks/test_multiple_edit_tasks_completed.py:110: AssertionError","steps":[{"name":"предусловие: Создаём 2 задачи  task_completed_true, task_completed_false","time":{"start":1765458209730,"stop":1765458210402,"duration":672},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем предусловие корректно выставленных completed: используем для проверки get_task","time":{"start":1765458210402,"stop":1765458210867,"duration":465},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Применяем completed=True к обеим задачам через MultipleEditTasks","time":{"start":1765458210867,"stop":1765458211086,"duration":219},"status":"failed","statusMessage":"AssertionError: Ожидали 200, получили 400\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/task_service/multiple_edit_tasks/test_multiple_edit_tasks_completed.py\", line 110, in test_multiple_edit_tasks_sets_completed_only_uncompleted\n    assert resp.status_code == 200, f\"Ожидали 200, получили {resp.status_code}\"\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":3,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"parentSuite","value":"multiple_edit_tasks"},{"name":"tag","value":"backend"},{"name":"suite","value":"test_multiple_edit_tasks_completed"},{"name":"host","value":"runnervmoqczp"},{"name":"thread","value":"2641-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.task_service.multiple_edit_tasks.test_multiple_edit_tasks_completed"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":1,"skipped":0,"passed":18,"unknown":0,"total":20},"items":[{"uid":"caa7476f8fc36306","reportUrl":"https://vaizcom.github.io/autotests/498/#testresult/caa7476f8fc36306","status":"passed","time":{"start":1765444487390,"stop":1765444489864,"duration":2474}},{"uid":"584a84501711e712","reportUrl":"https://vaizcom.github.io/autotests/497/#testresult/584a84501711e712","status":"passed","time":{"start":1765442595365,"stop":1765442597818,"duration":2453}},{"uid":"130b1db0991bef63","reportUrl":"https://vaizcom.github.io/autotests/496/#testresult/130b1db0991bef63","status":"passed","time":{"start":1765373012562,"stop":1765373014999,"duration":2437}},{"uid":"e9d653362c125e09","reportUrl":"https://vaizcom.github.io/autotests/495/#testresult/e9d653362c125e09","status":"passed","time":{"start":1765274613805,"stop":1765274617687,"duration":3882}},{"uid":"d35b28f75556fae","reportUrl":"https://vaizcom.github.io/autotests/494/#testresult/d35b28f75556fae","status":"passed","time":{"start":1765206751606,"stop":1765206753680,"duration":2074}},{"uid":"51b23592fcfc2952","reportUrl":"https://vaizcom.github.io/autotests/493/#testresult/51b23592fcfc2952","status":"passed","time":{"start":1765203623426,"stop":1765203625640,"duration":2214}},{"uid":"c93278c31dacecc3","reportUrl":"https://vaizcom.github.io/autotests/492/#testresult/c93278c31dacecc3","status":"passed","time":{"start":1765200763619,"stop":1765200765766,"duration":2147}},{"uid":"75e02838f37fecaa","reportUrl":"https://vaizcom.github.io/autotests/491/#testresult/75e02838f37fecaa","status":"passed","time":{"start":1765189345586,"stop":1765189347930,"duration":2344}},{"uid":"eac1b571398b0d61","reportUrl":"https://vaizcom.github.io/autotests/490/#testresult/eac1b571398b0d61","status":"passed","time":{"start":1765188001724,"stop":1765188007724,"duration":6000}},{"uid":"d26240eadb280747","reportUrl":"https://vaizcom.github.io/autotests/489/#testresult/d26240eadb280747","status":"passed","time":{"start":1764995210273,"stop":1764995212395,"duration":2122}},{"uid":"5527a8619d94afe0","reportUrl":"https://vaizcom.github.io/autotests/488/#testresult/5527a8619d94afe0","status":"passed","time":{"start":1764856224671,"stop":1764856226671,"duration":2000}},{"uid":"549e4dffa33ef8f9","reportUrl":"https://vaizcom.github.io/autotests/487/#testresult/549e4dffa33ef8f9","status":"passed","time":{"start":1764851606546,"stop":1764851608620,"duration":2074}},{"uid":"68204b9ae40787","reportUrl":"https://vaizcom.github.io/autotests/486/#testresult/68204b9ae40787","status":"passed","time":{"start":1764848882388,"stop":1764848884820,"duration":2432}},{"uid":"153bb95f45731a6a","reportUrl":"https://vaizcom.github.io/autotests/485/#testresult/153bb95f45731a6a","status":"passed","time":{"start":1764766954172,"stop":1764766956662,"duration":2490}},{"uid":"857babf05d5d1a2a","reportUrl":"https://vaizcom.github.io/autotests/484/#testresult/857babf05d5d1a2a","status":"broken","statusDetails":"requests.exceptions.JSONDecodeError: Expecting value: line 1 column 1 (char 0)","time":{"start":1764765362607,"stop":1764765363004,"duration":397}},{"uid":"70da8f402fa52095","reportUrl":"https://vaizcom.github.io/autotests/483/#testresult/70da8f402fa52095","status":"passed","time":{"start":1764749367066,"stop":1764749369124,"duration":2058}},{"uid":"824e7942601b58fd","reportUrl":"https://vaizcom.github.io/autotests/482/#testresult/824e7942601b58fd","status":"passed","time":{"start":1764687353851,"stop":1764687355808,"duration":1957}},{"uid":"9abf27e4fd466b66","reportUrl":"https://vaizcom.github.io/autotests/481/#testresult/9abf27e4fd466b66","status":"passed","time":{"start":1764680411538,"stop":1764680414446,"duration":2908}},{"uid":"74d782d3b1efdb93","reportUrl":"https://vaizcom.github.io/autotests/480/#testresult/74d782d3b1efdb93","status":"passed","time":{"start":1764602600859,"stop":1764602603136,"duration":2277}}]},"tags":["backend"]},"source":"d05cba682471b387.json","parameterValues":[]}