{"uid":"934564c09fbee4cb","name":"Проверка прав: удалить персональный токен может только владелец токена","fullName":"tests.test_backend.personal_access_tokens.test_delete_pat#test_delete_token_access_rights","historyId":"e10fa14163f2006cf342d319ad52d31e","time":{"start":1759744094431,"stop":1759744094816,"duration":385},"status":"failed","statusMessage":"AssertionError: Ошибка при создании токена: <!DOCTYPE html>\n  <html lang=\"en\">\n  <head>\n  <meta charset=\"utf-8\">\n  <title>Error</title>\n  </head>\n  <body>\n  <pre>Cannot POST /v4/CreatePersonalAccessToken</pre>\n  </body>\n  </html>\n  \nassert 404 == 200\n +  where 404 = <Response [404]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f2109fa9790>\nmember_client = <tests.core.client.APIClient object at 0x7f2109b77b90>\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title(\"Проверка прав: удалить персональный токен может только владелец токена\")\n    def test_delete_token_access_rights(owner_client, member_client, main_space):\n        token_name = f\"only_owner_delete_{datetime.now().strftime('%H%M%S')}\"\n        with allure.step(\"Владелец создает токен\"):\n            resp = create_token(owner_client.token, main_space, token_name)\n>           assert resp.status_code == 200, f\"Ошибка при создании токена: {resp.text}\"\nE           AssertionError: Ошибка при создании токена: <!DOCTYPE html>\nE             <html lang=\"en\">\nE             <head>\nE             <meta charset=\"utf-8\">\nE             <title>Error</title>\nE             </head>\nE             <body>\nE             <pre>Cannot POST /v4/CreatePersonalAccessToken</pre>\nE             </body>\nE             </html>\nE             \nE           assert 404 == 200\nE            +  where 404 = <Response [404]>.status_code\n\ntests/test_backend/personal_access_tokens/test_delete_pat.py:88: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1759743678061,"stop":1759743678061,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"main_client","time":{"start":1759743678061,"stop":1759743678696,"duration":635},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"base_url","time":{"start":1759743678061,"stop":1759743678061,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"pytestconfig","time":{"start":1759743678061,"stop":1759743678061,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"delete_output_dir","time":{"start":1759743678061,"stop":1759743678061,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"main_space","time":{"start":1759743678696,"stop":1759743679363,"duration":667},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"owner_client","time":{"start":1759743680109,"stop":1759743680673,"duration":564},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"member_client","time":{"start":1759743682872,"stop":1759743683160,"duration":288},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Ошибка при создании токена: <!DOCTYPE html>\n  <html lang=\"en\">\n  <head>\n  <meta charset=\"utf-8\">\n  <title>Error</title>\n  </head>\n  <body>\n  <pre>Cannot POST /v4/CreatePersonalAccessToken</pre>\n  </body>\n  </html>\n  \nassert 404 == 200\n +  where 404 = <Response [404]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f2109fa9790>\nmember_client = <tests.core.client.APIClient object at 0x7f2109b77b90>\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title(\"Проверка прав: удалить персональный токен может только владелец токена\")\n    def test_delete_token_access_rights(owner_client, member_client, main_space):\n        token_name = f\"only_owner_delete_{datetime.now().strftime('%H%M%S')}\"\n        with allure.step(\"Владелец создает токен\"):\n            resp = create_token(owner_client.token, main_space, token_name)\n>           assert resp.status_code == 200, f\"Ошибка при создании токена: {resp.text}\"\nE           AssertionError: Ошибка при создании токена: <!DOCTYPE html>\nE             <html lang=\"en\">\nE             <head>\nE             <meta charset=\"utf-8\">\nE             <title>Error</title>\nE             </head>\nE             <body>\nE             <pre>Cannot POST /v4/CreatePersonalAccessToken</pre>\nE             </body>\nE             </html>\nE             \nE           assert 404 == 200\nE            +  where 404 = <Response [404]>.status_code\n\ntests/test_backend/personal_access_tokens/test_delete_pat.py:88: AssertionError","steps":[{"name":"Владелец создает токен","time":{"start":1759744094431,"stop":1759744094815,"duration":384},"status":"failed","statusMessage":"AssertionError: Ошибка при создании токена: <!DOCTYPE html>\n  <html lang=\"en\">\n  <head>\n  <meta charset=\"utf-8\">\n  <title>Error</title>\n  </head>\n  <body>\n  <pre>Cannot POST /v4/CreatePersonalAccessToken</pre>\n  </body>\n  </html>\n  \nassert 404 == 200\n +  where 404 = <Response [404]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/personal_access_tokens/test_delete_pat.py\", line 88, in test_delete_token_access_rights\n    assert resp.status_code == 200, f\"Ошибка при создании токена: {resp.text}\"\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":0,"hasContent":true},"afterStages":[],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.personal_access_tokens"},{"name":"suite","value":"test_delete_pat"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"2543-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.personal_access_tokens.test_delete_pat"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["backend"]},"source":"934564c09fbee4cb.json","parameterValues":[]}