{"uid":"2164c0185ce7435e","name":"Archive document: Архивирование Project-документа для роли owner","fullName":"tests.test_backend.document.access_doc.test_archive_doc#test_archive_project_doc","historyId":"40ffb62620ea30d2684cda2caee27ab6","time":{"start":1768469421696,"stop":1768469424000,"duration":2304},"status":"failed","statusMessage":"AssertionError: assert 200 == 403","statusTrace":"request = <FixtureRequest for <Function test_archive_project_doc[owner]>>\nmain_project = '686672af85fb8d104544e798'\nmain_space = '6866309d85fb8d104544a61e', client_fixture = 'owner_client'\nexpected_status = 200\n\n    @allure.parent_suite(\"Document Service\")\n    @allure.suite(\"Access document\")\n    @pytest.mark.parametrize(\n        'client_fixture, expected_status',\n        [\n            ('owner_client', 200),\n            ('manager_client', 200),\n            ('member_client', 200),\n            ('guest_client', 403),\n        ],\n        ids=['owner', 'manager', 'member', 'guest'],\n    )\n    def test_archive_project_doc(request, main_project, main_space, client_fixture, expected_status):\n        api_client = request.getfixturevalue(client_fixture)\n        role = client_fixture.replace('_client', '')\n        current_date = datetime.now().strftime('%d.%m_%H:%M:%S')\n        title = f'{current_date} Project Doc For archive Check'\n    \n        allure.dynamic.title(f'Archive document: Архивирование Project-документа для роли {role}')\n        selected_client_name = random.choice(['owner_client', 'manager_client', 'member_client'])\n    \n        random_client = request.getfixturevalue(selected_client_name)\n    \n        with allure.step(\n            f'Случайный клиент ({selected_client_name}) создаёт Project-документ для архивации (title: {title})'\n        ):\n            create_resp = random_client.post(\n                **create_document_endpoint(kind='Project', kind_id=main_project, space_id=main_space, title=title)\n            )\n    \n            if create_resp.status_code != 200:\n                with allure.step(\n                    f'Не удалось создать документ, статус {create_resp.status_code} — пропуск проверки архивирования'\n                ):\n>                   assert expected_status == 403\nE                   assert 200 == 403\n\ntests/test_backend/document/access_doc/test_archive_doc.py:114: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1768469387918,"stop":1768469387919,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1768469387919,"stop":1768469387919,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1768469387919,"stop":1768469387919,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1768469387919,"stop":1768469387919,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1768469387919,"stop":1768469388334,"duration":415},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1768469389917,"stop":1768469390150,"duration":233},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1768469390150,"stop":1768469390554,"duration":404},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_project","time":{"start":1768469390554,"stop":1768469390753,"duration":199},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"manager_client","time":{"start":1768469391552,"stop":1768469392009,"duration":457},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 200 == 403","statusTrace":"request = <FixtureRequest for <Function test_archive_project_doc[owner]>>\nmain_project = '686672af85fb8d104544e798'\nmain_space = '6866309d85fb8d104544a61e', client_fixture = 'owner_client'\nexpected_status = 200\n\n    @allure.parent_suite(\"Document Service\")\n    @allure.suite(\"Access document\")\n    @pytest.mark.parametrize(\n        'client_fixture, expected_status',\n        [\n            ('owner_client', 200),\n            ('manager_client', 200),\n            ('member_client', 200),\n            ('guest_client', 403),\n        ],\n        ids=['owner', 'manager', 'member', 'guest'],\n    )\n    def test_archive_project_doc(request, main_project, main_space, client_fixture, expected_status):\n        api_client = request.getfixturevalue(client_fixture)\n        role = client_fixture.replace('_client', '')\n        current_date = datetime.now().strftime('%d.%m_%H:%M:%S')\n        title = f'{current_date} Project Doc For archive Check'\n    \n        allure.dynamic.title(f'Archive document: Архивирование Project-документа для роли {role}')\n        selected_client_name = random.choice(['owner_client', 'manager_client', 'member_client'])\n    \n        random_client = request.getfixturevalue(selected_client_name)\n    \n        with allure.step(\n            f'Случайный клиент ({selected_client_name}) создаёт Project-документ для архивации (title: {title})'\n        ):\n            create_resp = random_client.post(\n                **create_document_endpoint(kind='Project', kind_id=main_project, space_id=main_space, title=title)\n            )\n    \n            if create_resp.status_code != 200:\n                with allure.step(\n                    f'Не удалось создать документ, статус {create_resp.status_code} — пропуск проверки архивирования'\n                ):\n>                   assert expected_status == 403\nE                   assert 200 == 403\n\ntests/test_backend/document/access_doc/test_archive_doc.py:114: AssertionError","steps":[{"name":"Случайный клиент (manager_client) создаёт Project-документ для архивации (title: 15.01_09:30:21 Project Doc For archive Check)","time":{"start":1768469421697,"stop":1768469423999,"duration":2302},"status":"failed","statusMessage":"AssertionError: assert 200 == 403\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/document/access_doc/test_archive_doc.py\", line 114, in test_archive_project_doc\n    assert expected_status == 403\n","steps":[{"name":"Не удалось создать документ, статус 400 — пропуск проверки архивирования","time":{"start":1768469423999,"stop":1768469423999,"duration":0},"status":"failed","statusMessage":"AssertionError: assert 200 == 403\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/document/access_doc/test_archive_doc.py\", line 114, in test_archive_project_doc\n    assert expected_status == 403\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"parentSuite","value":"Document Service"},{"name":"suite","value":"Access document"},{"name":"tag","value":"backend"},{"name":"host","value":"runnervmmtnos"},{"name":"thread","value":"2637-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.document.access_doc.test_archive_doc"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"client_fixture","value":"'owner_client'"},{"name":"expected_status","value":"200"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":5,"broken":0,"skipped":0,"passed":131,"unknown":0,"total":136},"items":[{"uid":"340324193e746dbb","reportUrl":"https://vaizcom.github.io/autotests/535/#testresult/340324193e746dbb","status":"passed","time":{"start":1768469406166,"stop":1768469406995,"duration":829}},{"uid":"559b78d8e57e52e7","reportUrl":"https://vaizcom.github.io/autotests/534/#testresult/559b78d8e57e52e7","status":"passed","time":{"start":1768467667388,"stop":1768467668161,"duration":773}},{"uid":"8666922325e33e85","reportUrl":"https://vaizcom.github.io/autotests/533/#testresult/8666922325e33e85","status":"passed","time":{"start":1768403384306,"stop":1768403386334,"duration":2028}},{"uid":"ddfb2295ea2f792b","reportUrl":"https://vaizcom.github.io/autotests/532/#testresult/ddfb2295ea2f792b","status":"passed","time":{"start":1768316776389,"stop":1768316777141,"duration":752}},{"uid":"4a61068abf680339","reportUrl":"https://vaizcom.github.io/autotests/531/#testresult/4a61068abf680339","status":"passed","time":{"start":1768299429943,"stop":1768299430763,"duration":820}},{"uid":"a65634505ea928eb","reportUrl":"https://vaizcom.github.io/autotests/530/#testresult/a65634505ea928eb","status":"passed","time":{"start":1768298518141,"stop":1768298518963,"duration":822}},{"uid":"6eb3b07b5c07c620","reportUrl":"https://vaizcom.github.io/autotests/529/#testresult/6eb3b07b5c07c620","status":"passed","time":{"start":1767849663152,"stop":1767849663923,"duration":771}},{"uid":"2cd7614f52128b64","reportUrl":"https://vaizcom.github.io/autotests/528/#testresult/2cd7614f52128b64","status":"passed","time":{"start":1766507514303,"stop":1766507516404,"duration":2101}},{"uid":"d1882b7c6f00bf52","reportUrl":"https://vaizcom.github.io/autotests/527/#testresult/d1882b7c6f00bf52","status":"passed","time":{"start":1766506175520,"stop":1766506176391,"duration":871}},{"uid":"b09a9ec4b1abc180","reportUrl":"https://vaizcom.github.io/autotests/526/#testresult/b09a9ec4b1abc180","status":"passed","time":{"start":1766505040066,"stop":1766505040942,"duration":876}},{"uid":"2621ccc1e423ac0d","reportUrl":"https://vaizcom.github.io/autotests/525/#testresult/2621ccc1e423ac0d","status":"passed","time":{"start":1766504015002,"stop":1766504015737,"duration":735}},{"uid":"61a58f2fc9c708f7","reportUrl":"https://vaizcom.github.io/autotests/524/#testresult/61a58f2fc9c708f7","status":"passed","time":{"start":1766502787135,"stop":1766502787856,"duration":721}},{"uid":"f6255b850ea807a5","reportUrl":"https://vaizcom.github.io/autotests/523/#testresult/f6255b850ea807a5","status":"passed","time":{"start":1766496927920,"stop":1766496928626,"duration":706}},{"uid":"f396aaca8c3dcd15","reportUrl":"https://vaizcom.github.io/autotests/522/#testresult/f396aaca8c3dcd15","status":"passed","time":{"start":1766488575811,"stop":1766488576563,"duration":752}},{"uid":"cf3a1733e3e73f9f","reportUrl":"https://vaizcom.github.io/autotests/521/#testresult/cf3a1733e3e73f9f","status":"passed","time":{"start":1766487091463,"stop":1766487092332,"duration":869}},{"uid":"331f744838e8373c","reportUrl":"https://vaizcom.github.io/autotests/520/#testresult/331f744838e8373c","status":"passed","time":{"start":1766412022339,"stop":1766412023123,"duration":784}},{"uid":"557a0f55b7646040","reportUrl":"https://vaizcom.github.io/autotests/519/#testresult/557a0f55b7646040","status":"passed","time":{"start":1766405981017,"stop":1766405981822,"duration":805}},{"uid":"6ca410093290d4a8","reportUrl":"https://vaizcom.github.io/autotests/518/#testresult/6ca410093290d4a8","status":"passed","time":{"start":1766403663254,"stop":1766403663968,"duration":714}},{"uid":"6e252ec8838cb2f0","reportUrl":"https://vaizcom.github.io/autotests/517/#testresult/6e252ec8838cb2f0","status":"passed","time":{"start":1766402230168,"stop":1766402230986,"duration":818}},{"uid":"3ec9100ada1a6430","reportUrl":"https://vaizcom.github.io/autotests/516/#testresult/3ec9100ada1a6430","status":"passed","time":{"start":1766067094117,"stop":1766067096429,"duration":2312}}]},"tags":["backend"]},"source":"2164c0185ce7435e.json","parameterValues":["'owner_client'","200"]}