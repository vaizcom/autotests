{"uid":"ff534b75dda1da4f","name":"Edit Task Due date: Проверка ошибки, когда дата начала позже даты окончания","fullName":"tests.test_backend.task_service.edit_task.test_edit_task_due_date#test_edit_task_due_start_after_due_end_error","historyId":"629e1cf0da9ebdd258a3a3abdb92a303","time":{"start":1770276333579,"stop":1770276334143,"duration":564},"description":"\n    Проверяет, что при попытке установить dueStart позже, чем dueEnd,\n    возвращается ошибка валидации.\n    ","descriptionHtml":"<pre><code>Проверяет, что при попытке установить dueStart позже, чем dueEnd,\nвозвращается ошибка валидации.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Ожидалось сообщение об ошибке 'Start date cannot be after end date' для поля 'dueStart'\nassert False\n +  where False = any(<generator object test_edit_task_due_start_after_due_end_error.<locals>.<genexpr> at 0x7f0add71d210>)","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f0adf3c3290>\nmain_space = '6866309d85fb8d104544a61e'\nmake_task_in_main = <function make_task_in_main.<locals>._create_task at 0x7f0add6c51c0>\nmain_board = '6866731185fb8d104544e826'\nmain_project = '686672af85fb8d104544e798'\n\n    @allure.parent_suite(\"Task Service\")\n    @allure.suite(\"Edit Task\")\n    @allure.sub_suite(\"Due date edit Task\")\n    @allure.title(\"Edit Task Due date: Проверка ошибки, когда дата начала позже даты окончания\")\n    def test_edit_task_due_start_after_due_end_error(owner_client, main_space, make_task_in_main, main_board, main_project):\n        \"\"\"\n        Проверяет, что при попытке установить dueStart позже, чем dueEnd,\n        возвращается ошибка валидации.\n        \"\"\"\n        due_start = get_current_timestamp()\n        due_end = get_due_end()\n        initial_task_data = make_task_in_main({\"name\": \"Task with due end\", \"due_start\": due_start, \"due_end\": due_end})\n        task_id = initial_task_data.get(\"_id\")\n    \n        with allure.step(\"Отправляем запрос EditTask с dueStart позже dueEnd\"):\n            resp = owner_client.post(**edit_task_endpoint(space_id=main_space, task_id=task_id, dueStart= due_end, dueEnd= due_start))\n    \n        with allure.step(\"Проверяем статус ошибки и содержимое тела ответа\"):\n            assert resp.status_code == 400, f\"Ожидался статус 400 (Bad Request), получен {resp.status_code}\"\n            error_payload = resp.json()\n            assert error_payload.get(\"error\", {}).get(\"code\") == \"InvalidForm\"\n>           assert any(\n                field.get(\"name\") == \"dueStart\" and \"Start date cannot be after end date\" in field.get(\"codes\", [])\n                for field in error_payload.get(\"error\", {}).get(\"fields\", [])\n            ), \"Ожидалось сообщение об ошибке 'Start date cannot be after end date' для поля 'dueStart'\"\nE           AssertionError: Ожидалось сообщение об ошибке 'Start date cannot be after end date' для поля 'dueStart'\nE           assert False\nE            +  where False = any(<generator object test_edit_task_due_start_after_due_end_error.<locals>.<genexpr> at 0x7f0add71d210>)\n\ntests/test_backend/task_service/edit_task/test_edit_task_due_date.py:93: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1770275750360,"stop":1770275750360,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1770275750361,"stop":1770275750361,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1770275750361,"stop":1770275750774,"duration":413},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1770275750361,"stop":1770275750361,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1770275750361,"stop":1770275750361,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1770275752567,"stop":1770275753421,"duration":854},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1770275753421,"stop":1770275753824,"duration":403},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_project","time":{"start":1770275753824,"stop":1770275754202,"duration":378},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_board","time":{"start":1770275757941,"stop":1770275758144,"duration":203},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_task_in_main","time":{"start":1770276333578,"stop":1770276333578,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Проверяет, что при попытке установить dueStart позже, чем dueEnd,\n    возвращается ошибка валидации.\n    ","status":"failed","statusMessage":"AssertionError: Ожидалось сообщение об ошибке 'Start date cannot be after end date' для поля 'dueStart'\nassert False\n +  where False = any(<generator object test_edit_task_due_start_after_due_end_error.<locals>.<genexpr> at 0x7f0add71d210>)","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f0adf3c3290>\nmain_space = '6866309d85fb8d104544a61e'\nmake_task_in_main = <function make_task_in_main.<locals>._create_task at 0x7f0add6c51c0>\nmain_board = '6866731185fb8d104544e826'\nmain_project = '686672af85fb8d104544e798'\n\n    @allure.parent_suite(\"Task Service\")\n    @allure.suite(\"Edit Task\")\n    @allure.sub_suite(\"Due date edit Task\")\n    @allure.title(\"Edit Task Due date: Проверка ошибки, когда дата начала позже даты окончания\")\n    def test_edit_task_due_start_after_due_end_error(owner_client, main_space, make_task_in_main, main_board, main_project):\n        \"\"\"\n        Проверяет, что при попытке установить dueStart позже, чем dueEnd,\n        возвращается ошибка валидации.\n        \"\"\"\n        due_start = get_current_timestamp()\n        due_end = get_due_end()\n        initial_task_data = make_task_in_main({\"name\": \"Task with due end\", \"due_start\": due_start, \"due_end\": due_end})\n        task_id = initial_task_data.get(\"_id\")\n    \n        with allure.step(\"Отправляем запрос EditTask с dueStart позже dueEnd\"):\n            resp = owner_client.post(**edit_task_endpoint(space_id=main_space, task_id=task_id, dueStart= due_end, dueEnd= due_start))\n    \n        with allure.step(\"Проверяем статус ошибки и содержимое тела ответа\"):\n            assert resp.status_code == 400, f\"Ожидался статус 400 (Bad Request), получен {resp.status_code}\"\n            error_payload = resp.json()\n            assert error_payload.get(\"error\", {}).get(\"code\") == \"InvalidForm\"\n>           assert any(\n                field.get(\"name\") == \"dueStart\" and \"Start date cannot be after end date\" in field.get(\"codes\", [])\n                for field in error_payload.get(\"error\", {}).get(\"fields\", [])\n            ), \"Ожидалось сообщение об ошибке 'Start date cannot be after end date' для поля 'dueStart'\"\nE           AssertionError: Ожидалось сообщение об ошибке 'Start date cannot be after end date' для поля 'dueStart'\nE           assert False\nE            +  where False = any(<generator object test_edit_task_due_start_after_due_end_error.<locals>.<genexpr> at 0x7f0add71d210>)\n\ntests/test_backend/task_service/edit_task/test_edit_task_due_date.py:93: AssertionError","steps":[{"name":"Отправляем запрос EditTask с dueStart позже dueEnd","time":{"start":1770276333877,"stop":1770276334142,"duration":265},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем статус ошибки и содержимое тела ответа","time":{"start":1770276334142,"stop":1770276334142,"duration":0},"status":"failed","statusMessage":"AssertionError: Ожидалось сообщение об ошибке 'Start date cannot be after end date' для поля 'dueStart'\nassert False\n +  where False = any(<generator object test_edit_task_due_start_after_due_end_error.<locals>.<genexpr> at 0x7f0add71d210>)\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/task_service/edit_task/test_edit_task_due_date.py\", line 93, in test_edit_task_due_start_after_due_end_error\n    assert any(\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"make_task_in_main::0","time":{"start":1770276334180,"stop":1770276334401,"duration":221},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"Task Service"},{"name":"suite","value":"Edit Task"},{"name":"subSuite","value":"Due date edit Task"},{"name":"tag","value":"backend"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"2700-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.task_service.edit_task.test_edit_task_due_date"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":29,"unknown":0,"total":31},"items":[{"uid":"7a3c2803b749dff8","reportUrl":"https://vaizcom.github.io/autotests/547/#testresult/7a3c2803b749dff8","status":"passed","time":{"start":1769093096889,"stop":1769093097539,"duration":650}},{"uid":"1e491d3446927849","reportUrl":"https://vaizcom.github.io/autotests/546/#testresult/1e491d3446927849","status":"passed","time":{"start":1769008211103,"stop":1769008211846,"duration":743}},{"uid":"528c5682e8720bd9","reportUrl":"https://vaizcom.github.io/autotests/545/#testresult/528c5682e8720bd9","status":"passed","time":{"start":1768995500001,"stop":1768995500614,"duration":613}},{"uid":"150654c89f1f75e6","reportUrl":"https://vaizcom.github.io/autotests/544/#testresult/150654c89f1f75e6","status":"passed","time":{"start":1768815800999,"stop":1768815801625,"duration":626}},{"uid":"8b64af6965f498d7","reportUrl":"https://vaizcom.github.io/autotests/543/#testresult/8b64af6965f498d7","status":"passed","time":{"start":1768812901303,"stop":1768812901890,"duration":587}},{"uid":"f35fc7a381eda33b","reportUrl":"https://vaizcom.github.io/autotests/541/#testresult/f35fc7a381eda33b","status":"passed","time":{"start":1768810546323,"stop":1768810546977,"duration":654}},{"uid":"ba54a90b7ba8af4b","reportUrl":"https://vaizcom.github.io/autotests/542/#testresult/ba54a90b7ba8af4b","status":"passed","time":{"start":1768573864766,"stop":1768573865401,"duration":635}},{"uid":"77b738f609689229","reportUrl":"https://vaizcom.github.io/autotests/540/#testresult/77b738f609689229","status":"passed","time":{"start":1768572112303,"stop":1768572114000,"duration":1697}},{"uid":"ae6e2acd614b15d6","reportUrl":"https://vaizcom.github.io/autotests/539/#testresult/ae6e2acd614b15d6","status":"passed","time":{"start":1768484334622,"stop":1768484338148,"duration":3526}},{"uid":"565f1e72a4d5d79d","reportUrl":"https://vaizcom.github.io/autotests/538/#testresult/565f1e72a4d5d79d","status":"passed","time":{"start":1768474549433,"stop":1768474549951,"duration":518}},{"uid":"ff7be79684b592b8","reportUrl":"https://vaizcom.github.io/autotests/537/#testresult/ff7be79684b592b8","status":"passed","time":{"start":1768473102117,"stop":1768473102714,"duration":597}},{"uid":"72fe5cd0f6ea4ac9","reportUrl":"https://vaizcom.github.io/autotests/536/#testresult/72fe5cd0f6ea4ac9","status":"passed","time":{"start":1768470263573,"stop":1768470264177,"duration":604}},{"uid":"55c24fdff15d85b4","reportUrl":"https://vaizcom.github.io/autotests/534/#testresult/55c24fdff15d85b4","status":"passed","time":{"start":1768468297408,"stop":1768468297990,"duration":582}},{"uid":"4b42de775e9e7503","reportUrl":"https://vaizcom.github.io/autotests/533/#testresult/4b42de775e9e7503","status":"passed","time":{"start":1768404081143,"stop":1768404081783,"duration":640}},{"uid":"568f0b3e8f581a8f","reportUrl":"https://vaizcom.github.io/autotests/532/#testresult/568f0b3e8f581a8f","status":"passed","time":{"start":1768317475493,"stop":1768317476124,"duration":631}},{"uid":"ae6d54875c26c957","reportUrl":"https://vaizcom.github.io/autotests/531/#testresult/ae6d54875c26c957","status":"passed","time":{"start":1768300106982,"stop":1768300107593,"duration":611}},{"uid":"eed65cfa74999fbf","reportUrl":"https://vaizcom.github.io/autotests/530/#testresult/eed65cfa74999fbf","status":"failed","statusDetails":"AssertionError: <html>\r\n  <head><title>503 Service Temporarily Unavailable</title></head>\r\n  <body>\r\n  <center><h1>503 Service Temporarily Unavailable</h1></center>\r\n  <hr><center>nginx</center>\r\n  </body>\r\n  </html>\r\n  \nassert 503 == 200\n +  where 503 = <Response [503]>.status_code","time":{"start":1768298712118,"stop":1768298712240,"duration":122}},{"uid":"f14dead7abdd50ad","reportUrl":"https://vaizcom.github.io/autotests/529/#testresult/f14dead7abdd50ad","status":"passed","time":{"start":1767850292410,"stop":1767850292960,"duration":550}},{"uid":"c7cda7d24d641443","reportUrl":"https://vaizcom.github.io/autotests/528/#testresult/c7cda7d24d641443","status":"passed","time":{"start":1766508216660,"stop":1766508217264,"duration":604}},{"uid":"4dd123fcf36a9bc4","reportUrl":"https://vaizcom.github.io/autotests/527/#testresult/4dd123fcf36a9bc4","status":"passed","time":{"start":1766506857356,"stop":1766506858024,"duration":668}}]},"tags":["backend"]},"source":"ff534b75dda1da4f.json","parameterValues":[]}