{"uid":"ebcfe705556b6476","name":"Тестирование получения задач под ролью Client_with_access_only_in_project","fullName":"tests.test_backend.task_service.get_tasks.access_get_tasks.test_get_tasks_project_filters#test_get_tasks_limited_access_filtered_by_project","historyId":"6697bf00acade6656128d76394baed91","time":{"start":1764749156192,"stop":1764749170591,"duration":14399},"description":"\n        Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n        но при этом запрос выполняется успешно (HTTP 200).\n        ","descriptionHtml":"<pre><code>    Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n    но при этом запрос выполняется успешно (HTTP 200).\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: assert 520 == 200\n +  where 520 = <Response [520]>.status_code","statusTrace":"request = <FixtureRequest for <Function test_get_tasks_limited_access_filtered_by_project[no_access_to_main_project]>>\nclient_fixture = 'client_with_access_only_in_project'\nmain_project = '686672af85fb8d104544e798'\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title(\"GetTasks: Проверка что список задач пустой для пользователей которые не имеют доступ к project\")\n    @pytest.mark.parametrize(\n        'client_fixture',\n        ['client_with_access_only_in_space', 'client_with_access_only_in_project'],\n        ids=['access_only_in_space', 'no_access_to_main_project'],\n    )\n    def test_get_tasks_limited_access_filtered_by_project(request, client_fixture, main_project, main_space):\n        \"\"\"\n            Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n            но при этом запрос выполняется успешно (HTTP 200).\n            \"\"\"\n        role_name = client_fixture.capitalize()\n        allure.dynamic.title(f\"Тестирование получения задач под ролью {role_name}\")\n    \n        client = request.getfixturevalue(client_fixture)\n    \n        with allure.step(f\"{client_fixture}: вызвать GetTasks с фильтром project\"):\n            resp = client.post(**get_tasks_endpoint(space_id=main_space, project=main_project))\n    \n        with allure.step(\"Проверить HTTP 200\"):\n>           assert resp.status_code == 200\nE           assert 520 == 200\nE            +  where 520 = <Response [520]>.status_code\n\ntests/test_backend/task_service/get_tasks/access_get_tasks/test_get_tasks_project_filters.py:76: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1764748358286,"stop":1764748358286,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1764748358286,"stop":1764748358286,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1764748358286,"stop":1764748358286,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1764748358286,"stop":1764748358286,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1764748361065,"stop":1764748361336,"duration":271},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1764748361336,"stop":1764748361834,"duration":498},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_project","time":{"start":1764748361834,"stop":1764748362052,"duration":218},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"client_with_access_only_in_project","time":{"start":1764748369488,"stop":1764748369789,"duration":301},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n        Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n        но при этом запрос выполняется успешно (HTTP 200).\n        ","status":"failed","statusMessage":"AssertionError: assert 520 == 200\n +  where 520 = <Response [520]>.status_code","statusTrace":"request = <FixtureRequest for <Function test_get_tasks_limited_access_filtered_by_project[no_access_to_main_project]>>\nclient_fixture = 'client_with_access_only_in_project'\nmain_project = '686672af85fb8d104544e798'\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title(\"GetTasks: Проверка что список задач пустой для пользователей которые не имеют доступ к project\")\n    @pytest.mark.parametrize(\n        'client_fixture',\n        ['client_with_access_only_in_space', 'client_with_access_only_in_project'],\n        ids=['access_only_in_space', 'no_access_to_main_project'],\n    )\n    def test_get_tasks_limited_access_filtered_by_project(request, client_fixture, main_project, main_space):\n        \"\"\"\n            Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n            но при этом запрос выполняется успешно (HTTP 200).\n            \"\"\"\n        role_name = client_fixture.capitalize()\n        allure.dynamic.title(f\"Тестирование получения задач под ролью {role_name}\")\n    \n        client = request.getfixturevalue(client_fixture)\n    \n        with allure.step(f\"{client_fixture}: вызвать GetTasks с фильтром project\"):\n            resp = client.post(**get_tasks_endpoint(space_id=main_space, project=main_project))\n    \n        with allure.step(\"Проверить HTTP 200\"):\n>           assert resp.status_code == 200\nE           assert 520 == 200\nE            +  where 520 = <Response [520]>.status_code\n\ntests/test_backend/task_service/get_tasks/access_get_tasks/test_get_tasks_project_filters.py:76: AssertionError","steps":[{"name":"client_with_access_only_in_project: вызвать GetTasks с фильтром project","time":{"start":1764749156192,"stop":1764749170590,"duration":14398},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверить HTTP 200","time":{"start":1764749170590,"stop":1764749170590,"duration":0},"status":"failed","statusMessage":"AssertionError: assert 520 == 200\n +  where 520 = <Response [520]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/task_service/get_tasks/access_get_tasks/test_get_tasks_project_filters.py\", line 76, in test_get_tasks_limited_access_filtered_by_project\n    assert resp.status_code == 200\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.task_service.get_tasks.access_get_tasks"},{"name":"suite","value":"test_get_tasks_project_filters"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2607-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.task_service.get_tasks.access_get_tasks.test_get_tasks_project_filters"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"client_fixture","value":"'client_with_access_only_in_project'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":30,"unknown":0,"total":32},"items":[{"uid":"ff21cdc8146881c4","reportUrl":"https://vaizcom.github.io/autotests/482/#testresult/ff21cdc8146881c4","status":"passed","time":{"start":1764687205893,"stop":1764687206249,"duration":356}},{"uid":"c01507c15c3eb8ac","reportUrl":"https://vaizcom.github.io/autotests/481/#testresult/c01507c15c3eb8ac","status":"passed","time":{"start":1764680252042,"stop":1764680252280,"duration":238}},{"uid":"5e8ffb1a0c1ca6de","reportUrl":"https://vaizcom.github.io/autotests/480/#testresult/5e8ffb1a0c1ca6de","status":"passed","time":{"start":1764602438670,"stop":1764602439216,"duration":546}},{"uid":"f1fedc3dfc577a16","reportUrl":"https://vaizcom.github.io/autotests/479/#testresult/f1fedc3dfc577a16","status":"passed","time":{"start":1764593835315,"stop":1764593835506,"duration":191}},{"uid":"d4da987f0e4800c6","reportUrl":"https://vaizcom.github.io/autotests/478/#testresult/d4da987f0e4800c6","status":"passed","time":{"start":1764583367737,"stop":1764583367932,"duration":195}},{"uid":"b15419eb12e54298","reportUrl":"https://vaizcom.github.io/autotests/477/#testresult/b15419eb12e54298","status":"passed","time":{"start":1764151953027,"stop":1764151953277,"duration":250}},{"uid":"ff39ede6831fa009","reportUrl":"https://vaizcom.github.io/autotests/476/#testresult/ff39ede6831fa009","status":"passed","time":{"start":1764147475776,"stop":1764147476016,"duration":240}},{"uid":"4666da0395c5f7a0","reportUrl":"https://vaizcom.github.io/autotests/475/#testresult/4666da0395c5f7a0","status":"passed","time":{"start":1764081173707,"stop":1764081173936,"duration":229}},{"uid":"90732294fa0bdc90","reportUrl":"https://vaizcom.github.io/autotests/474/#testresult/90732294fa0bdc90","status":"passed","time":{"start":1764078780557,"stop":1764078780779,"duration":222}},{"uid":"ec66f2830ad24f4c","reportUrl":"https://vaizcom.github.io/autotests/473/#testresult/ec66f2830ad24f4c","status":"passed","time":{"start":1764065928038,"stop":1764065928221,"duration":183}},{"uid":"d8b5254d62132a8f","reportUrl":"https://vaizcom.github.io/autotests/472/#testresult/d8b5254d62132a8f","status":"passed","time":{"start":1764053881644,"stop":1764053881845,"duration":201}},{"uid":"7009bb1417807683","reportUrl":"https://vaizcom.github.io/autotests/471/#testresult/7009bb1417807683","status":"failed","statusDetails":"AssertionError: Ожидался пустой список задач для client_with_access_only_in_project\nassert 10823 == 0\n +  where 10823 = len([{'_id': '6909d5af1a593d8d7c3ba732', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5af1a593d8d7c3ba76e', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5af1a593d8d7c3ba7aa', 'archivedAt': None, 'archiver': None, 'assignees': ['686630dd85fb8d104544aac8', '6866313985fb8d104544ab6c'], ...}, {'_id': '6909d5af1a593d8d7c3ba7e7', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5b01a593d8d7c3ba824', 'archivedAt': None, 'archiver': None, 'assignees': ['6866346d85fb8d104544ae41', '6866313985fb8d104544ab6c'], ...}, {'_id': '6909d5b01a593d8d7c3ba860', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, ...])","time":{"start":1763996447849,"stop":1763996458461,"duration":10612}},{"uid":"e1e7edd2f73d753f","reportUrl":"https://vaizcom.github.io/autotests/470/#testresult/e1e7edd2f73d753f","status":"passed","time":{"start":1763995225934,"stop":1763995226422,"duration":488}},{"uid":"530834a8e3a9b4c1","reportUrl":"https://vaizcom.github.io/autotests/469/#testresult/530834a8e3a9b4c1","status":"passed","time":{"start":1763993478994,"stop":1763993479553,"duration":559}},{"uid":"c863544791320b91","reportUrl":"https://vaizcom.github.io/autotests/468/#testresult/c863544791320b91","status":"passed","time":{"start":1763734843934,"stop":1763734844157,"duration":223}},{"uid":"1114bc1efb0dce5f","reportUrl":"https://vaizcom.github.io/autotests/467/#testresult/1114bc1efb0dce5f","status":"passed","time":{"start":1763733024209,"stop":1763733024759,"duration":550}},{"uid":"8ca2d19fb77570f9","reportUrl":"https://vaizcom.github.io/autotests/466/#testresult/8ca2d19fb77570f9","status":"passed","time":{"start":1763726677973,"stop":1763726678510,"duration":537}},{"uid":"a27d3afdc68e3493","reportUrl":"https://vaizcom.github.io/autotests/465/#testresult/a27d3afdc68e3493","status":"passed","time":{"start":1763720219119,"stop":1763720219288,"duration":169}},{"uid":"a60a5f6b4646de14","reportUrl":"https://vaizcom.github.io/autotests/464/#testresult/a60a5f6b4646de14","status":"passed","time":{"start":1763715528801,"stop":1763715529172,"duration":371}},{"uid":"b1760b9c8b61dc55","reportUrl":"https://vaizcom.github.io/autotests/463/#testresult/b1760b9c8b61dc55","status":"passed","time":{"start":1763714948141,"stop":1763714948415,"duration":274}}]},"tags":["backend"]},"source":"ebcfe705556b6476.json","parameterValues":["'client_with_access_only_in_project'"]}