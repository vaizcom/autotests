{"uid":"20fcb09c35d9a112","name":"Multiple edit Tasks: установка списка ассайни (мультиселект) для нескольких задач","fullName":"tests.test_backend.task_service.multiple_edit_tasks.test_multiple_edit_tasks_assignees#test_multiple_edit_tasks_multiple_assignees","historyId":"0977f4436844b89c66e463eba9a22bc4","time":{"start":1765458189864,"stop":1765458190863,"duration":999},"description":"\n    Передаём список ассайни (мультиселект) и проверяем, что у обеих задач он установлен.\n    ","descriptionHtml":"<pre><code>Передаём список ассайни (мультиселект) и проверяем, что у обеих задач он установлен.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: {\"payload\":null,\"type\":\"MultipleEditTasks\",\"error\":{\"code\":\"InvalidForm\",\"fields\":[{\"name\":\"actionType\",\"codes\":[\"actionType must be one of the following values: editTask, moveTaskToGroup, moveTaskToBoard, deleteTask, archiveTask, editMilestone\"],\"meta\":{}}],\"originalType\":\"MultipleEditTasks\"}}\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f7a7e437090>\nmain_space = '6866309d85fb8d104544a61e', main_board = '6866731185fb8d104544e826'\nmain_personal = {'guest': ['686630dd85fb8d104544aac8'], 'main': ['6866309d85fb8d104544a620'], 'manager': ['6866313985fb8d104544ab6c'], 'member': ['6866310b85fb8d104544ab1d'], ...}\nmake_task_in_main = <function make_task_in_main.<locals>._create_task at 0x7f7a7e113b00>\n\n    @allure.parent_suite(\"multiple_edit_tasks\")\n    @allure.title(\"Multiple edit Tasks: установка списка ассайни (мультиселект) для нескольких задач\")\n    def test_multiple_edit_tasks_multiple_assignees(owner_client, main_space, main_board, main_personal, make_task_in_main):\n        \"\"\"\n        Передаём список ассайни (мультиселект) и проверяем, что у обеих задач он установлен.\n        \"\"\"\n        with allure.step(\"Определяем список ассайни (минимум два участника)\"):\n            a1 = main_personal[\"member\"][0]\n            a2 = main_personal[\"owner\"][0]\n            assignees_list = [a1, a2]\n    \n        with allure.step(\"Создаём две задачи через фикстуру-конструктор\"):\n            task1 = make_task_in_main({\"name\": \"Task multi A\"})\n            task2 = make_task_in_main({\"name\": \"Task multi B\"})\n            task1_id = task1[\"_id\"]\n            task2_id = task2[\"_id\"]\n    \n        with allure.step(\"Назначаем список ассайни для обеих задач\"):\n            payload = [\n                {\"taskId\": task1_id, \"assignees\": assignees_list},\n                {\"taskId\": task2_id, \"assignees\": assignees_list},\n            ]\n            resp = owner_client.post(**multiple_edit_tasks_endpoint(\n                space_id=main_space,\n                tasks=payload,\n            ))\n>           assert resp.status_code == 200, resp.text\nE           AssertionError: {\"payload\":null,\"type\":\"MultipleEditTasks\",\"error\":{\"code\":\"InvalidForm\",\"fields\":[{\"name\":\"actionType\",\"codes\":[\"actionType must be one of the following values: editTask, moveTaskToGroup, moveTaskToBoard, deleteTask, archiveTask, editMilestone\"],\"meta\":{}}],\"originalType\":\"MultipleEditTasks\"}}\nE           assert 400 == 200\nE            +  where 400 = <Response [400]>.status_code\n\ntests/test_backend/task_service/multiple_edit_tasks/test_multiple_edit_tasks_assignees.py:122: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1765457368185,"stop":1765457368185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1765457368185,"stop":1765457368185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1765457368185,"stop":1765457368691,"duration":506},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1765457368185,"stop":1765457368185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1765457368185,"stop":1765457368185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1765457370634,"stop":1765457370872,"duration":238},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1765457370872,"stop":1765457371085,"duration":213},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_personal","time":{"start":1765457407223,"stop":1765457407544,"duration":321},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_board","time":{"start":1765457726227,"stop":1765457726691,"duration":464},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_task_in_main","time":{"start":1765458189864,"stop":1765458189864,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Передаём список ассайни (мультиселект) и проверяем, что у обеих задач он установлен.\n    ","status":"failed","statusMessage":"AssertionError: {\"payload\":null,\"type\":\"MultipleEditTasks\",\"error\":{\"code\":\"InvalidForm\",\"fields\":[{\"name\":\"actionType\",\"codes\":[\"actionType must be one of the following values: editTask, moveTaskToGroup, moveTaskToBoard, deleteTask, archiveTask, editMilestone\"],\"meta\":{}}],\"originalType\":\"MultipleEditTasks\"}}\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f7a7e437090>\nmain_space = '6866309d85fb8d104544a61e', main_board = '6866731185fb8d104544e826'\nmain_personal = {'guest': ['686630dd85fb8d104544aac8'], 'main': ['6866309d85fb8d104544a620'], 'manager': ['6866313985fb8d104544ab6c'], 'member': ['6866310b85fb8d104544ab1d'], ...}\nmake_task_in_main = <function make_task_in_main.<locals>._create_task at 0x7f7a7e113b00>\n\n    @allure.parent_suite(\"multiple_edit_tasks\")\n    @allure.title(\"Multiple edit Tasks: установка списка ассайни (мультиселект) для нескольких задач\")\n    def test_multiple_edit_tasks_multiple_assignees(owner_client, main_space, main_board, main_personal, make_task_in_main):\n        \"\"\"\n        Передаём список ассайни (мультиселект) и проверяем, что у обеих задач он установлен.\n        \"\"\"\n        with allure.step(\"Определяем список ассайни (минимум два участника)\"):\n            a1 = main_personal[\"member\"][0]\n            a2 = main_personal[\"owner\"][0]\n            assignees_list = [a1, a2]\n    \n        with allure.step(\"Создаём две задачи через фикстуру-конструктор\"):\n            task1 = make_task_in_main({\"name\": \"Task multi A\"})\n            task2 = make_task_in_main({\"name\": \"Task multi B\"})\n            task1_id = task1[\"_id\"]\n            task2_id = task2[\"_id\"]\n    \n        with allure.step(\"Назначаем список ассайни для обеих задач\"):\n            payload = [\n                {\"taskId\": task1_id, \"assignees\": assignees_list},\n                {\"taskId\": task2_id, \"assignees\": assignees_list},\n            ]\n            resp = owner_client.post(**multiple_edit_tasks_endpoint(\n                space_id=main_space,\n                tasks=payload,\n            ))\n>           assert resp.status_code == 200, resp.text\nE           AssertionError: {\"payload\":null,\"type\":\"MultipleEditTasks\",\"error\":{\"code\":\"InvalidForm\",\"fields\":[{\"name\":\"actionType\",\"codes\":[\"actionType must be one of the following values: editTask, moveTaskToGroup, moveTaskToBoard, deleteTask, archiveTask, editMilestone\"],\"meta\":{}}],\"originalType\":\"MultipleEditTasks\"}}\nE           assert 400 == 200\nE            +  where 400 = <Response [400]>.status_code\n\ntests/test_backend/task_service/multiple_edit_tasks/test_multiple_edit_tasks_assignees.py:122: AssertionError","steps":[{"name":"Определяем список ассайни (минимум два участника)","time":{"start":1765458189864,"stop":1765458189864,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Создаём две задачи через фикстуру-конструктор","time":{"start":1765458189864,"stop":1765458190629,"duration":765},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Назначаем список ассайни для обеих задач","time":{"start":1765458190629,"stop":1765458190862,"duration":233},"status":"failed","statusMessage":"AssertionError: {\"payload\":null,\"type\":\"MultipleEditTasks\",\"error\":{\"code\":\"InvalidForm\",\"fields\":[{\"name\":\"actionType\",\"codes\":[\"actionType must be one of the following values: editTask, moveTaskToGroup, moveTaskToBoard, deleteTask, archiveTask, editMilestone\"],\"meta\":{}}],\"originalType\":\"MultipleEditTasks\"}}\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/task_service/multiple_edit_tasks/test_multiple_edit_tasks_assignees.py\", line 122, in test_multiple_edit_tasks_multiple_assignees\n    assert resp.status_code == 200, resp.text\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":3,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"make_task_in_main::0","time":{"start":1765458190868,"stop":1765458191446,"duration":578},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"multiple_edit_tasks"},{"name":"tag","value":"backend"},{"name":"suite","value":"test_multiple_edit_tasks_assignees"},{"name":"host","value":"runnervmoqczp"},{"name":"thread","value":"2641-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.task_service.multiple_edit_tasks.test_multiple_edit_tasks_assignees"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":17,"unknown":0,"total":19},"items":[{"uid":"8174dc640e88186f","reportUrl":"https://vaizcom.github.io/autotests/498/#testresult/8174dc640e88186f","status":"passed","time":{"start":1765444440885,"stop":1765444442730,"duration":1845}},{"uid":"6da57b1dc8eb34d","reportUrl":"https://vaizcom.github.io/autotests/497/#testresult/6da57b1dc8eb34d","status":"passed","time":{"start":1765442549830,"stop":1765442554745,"duration":4915}},{"uid":"d51fbd2ef8998db5","reportUrl":"https://vaizcom.github.io/autotests/496/#testresult/d51fbd2ef8998db5","status":"passed","time":{"start":1765372966065,"stop":1765372967855,"duration":1790}},{"uid":"55f0da5e4d9c316c","reportUrl":"https://vaizcom.github.io/autotests/495/#testresult/55f0da5e4d9c316c","status":"passed","time":{"start":1765274545015,"stop":1765274547806,"duration":2791}},{"uid":"458e2d188734bb37","reportUrl":"https://vaizcom.github.io/autotests/494/#testresult/458e2d188734bb37","status":"passed","time":{"start":1765206717329,"stop":1765206719359,"duration":2030}},{"uid":"b549a6c0895941cc","reportUrl":"https://vaizcom.github.io/autotests/493/#testresult/b549a6c0895941cc","status":"passed","time":{"start":1765203577584,"stop":1765203579342,"duration":1758}},{"uid":"4592aa36466f49ce","reportUrl":"https://vaizcom.github.io/autotests/492/#testresult/4592aa36466f49ce","status":"passed","time":{"start":1765200719654,"stop":1765200721396,"duration":1742}},{"uid":"eeaae4b9efdedf21","reportUrl":"https://vaizcom.github.io/autotests/491/#testresult/eeaae4b9efdedf21","status":"passed","time":{"start":1765189300258,"stop":1765189301796,"duration":1538}},{"uid":"2633d1c5935393b","reportUrl":"https://vaizcom.github.io/autotests/490/#testresult/2633d1c5935393b","status":"passed","time":{"start":1765187964707,"stop":1765187966161,"duration":1454}},{"uid":"ca6b3abd1e4b8b6a","reportUrl":"https://vaizcom.github.io/autotests/489/#testresult/ca6b3abd1e4b8b6a","status":"passed","time":{"start":1764995160360,"stop":1764995161905,"duration":1545}},{"uid":"4bc625dddc89dc8a","reportUrl":"https://vaizcom.github.io/autotests/488/#testresult/4bc625dddc89dc8a","status":"passed","time":{"start":1764856189076,"stop":1764856190389,"duration":1313}},{"uid":"2fce4afd4cc406d0","reportUrl":"https://vaizcom.github.io/autotests/487/#testresult/2fce4afd4cc406d0","status":"passed","time":{"start":1764851571688,"stop":1764851573041,"duration":1353}},{"uid":"7bfa528e8d37124a","reportUrl":"https://vaizcom.github.io/autotests/486/#testresult/7bfa528e8d37124a","status":"passed","time":{"start":1764848842328,"stop":1764848843873,"duration":1545}},{"uid":"519f3a902d82e71e","reportUrl":"https://vaizcom.github.io/autotests/485/#testresult/519f3a902d82e71e","status":"passed","time":{"start":1764766896510,"stop":1764766898174,"duration":1664}},{"uid":"e4d01fdfdc4ebcc8","reportUrl":"https://vaizcom.github.io/autotests/484/#testresult/e4d01fdfdc4ebcc8","status":"failed","statusDetails":"AssertionError: <html>\r\n  <head><title>503 Service Temporarily Unavailable</title></head>\r\n  <body>\r\n  <center><h1>503 Service Temporarily Unavailable</h1></center>\r\n  <hr><center>nginx</center>\r\n  </body>\r\n  </html>\r\n  \nassert 503 == 200\n +  where 503 = <Response [503]>.status_code","time":{"start":1764765361368,"stop":1764765361573,"duration":205}},{"uid":"1230a1ae3c6b37e5","reportUrl":"https://vaizcom.github.io/autotests/483/#testresult/1230a1ae3c6b37e5","status":"passed","time":{"start":1764749302298,"stop":1764749308283,"duration":5985}},{"uid":"8303037f9a719dd4","reportUrl":"https://vaizcom.github.io/autotests/482/#testresult/8303037f9a719dd4","status":"passed","time":{"start":1764687309454,"stop":1764687310926,"duration":1472}},{"uid":"3d177e829e12e99","reportUrl":"https://vaizcom.github.io/autotests/481/#testresult/3d177e829e12e99","status":"passed","time":{"start":1764680350787,"stop":1764680352301,"duration":1514}}]},"tags":["backend"]},"source":"20fcb09c35d9a112.json","parameterValues":[]}