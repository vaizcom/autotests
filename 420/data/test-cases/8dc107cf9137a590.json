{"uid":"8dc107cf9137a590","name":"Проверка доступа к документам: пользователь без доступа (foreign_client)","fullName":"tests.test_backend.document.access_doc.test_matrix_access_docs#test_document_access_denied_for_foreign_client","historyId":"7178898f53000b718b1270e4271b6985","time":{"start":1762506262778,"stop":1762506263067,"duration":289},"description":"\n    Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n    ","descriptionHtml":"<pre><code>Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Ожидался статус 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"request = <FixtureRequest for <Function test_document_access_denied_for_foreign_client>>\nforeign_client = <tests.core.client.APIClient object at 0x7f57a48ebe50>\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title('Проверка доступа к документам: пользователь без доступа (foreign_client)')\n    def test_document_access_denied_for_foreign_client(request, foreign_client, main_space):\n        \"\"\"\n        Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n        \"\"\"\n        with allure.step('Отправка запроса для получения доступа к документам'):\n            response = foreign_client.post(**get_document_endpoint(document_id=main_space, space_id=main_space))\n    \n        with allure.step(\"Проверка, что запрос отклонён (ожидается 400 и код ошибки 'NotFound')\"):\n>           assert response.status_code == 400, f'Ожидался статус 400, получен {response.status_code}'\nE           AssertionError: Ожидался статус 400, получен 503\nE           assert 503 == 400\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/access_doc/test_matrix_access_docs.py:16: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1762506104055,"stop":1762506104055,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1762506104055,"stop":1762506104055,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1762506104055,"stop":1762506104055,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1762506104055,"stop":1762506104055,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1762506104056,"stop":1762506104470,"duration":414},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1762506104470,"stop":1762506104874,"duration":404},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"foreign_client","time":{"start":1762506110248,"stop":1762506110480,"duration":232},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n    ","status":"failed","statusMessage":"AssertionError: Ожидался статус 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"request = <FixtureRequest for <Function test_document_access_denied_for_foreign_client>>\nforeign_client = <tests.core.client.APIClient object at 0x7f57a48ebe50>\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title('Проверка доступа к документам: пользователь без доступа (foreign_client)')\n    def test_document_access_denied_for_foreign_client(request, foreign_client, main_space):\n        \"\"\"\n        Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n        \"\"\"\n        with allure.step('Отправка запроса для получения доступа к документам'):\n            response = foreign_client.post(**get_document_endpoint(document_id=main_space, space_id=main_space))\n    \n        with allure.step(\"Проверка, что запрос отклонён (ожидается 400 и код ошибки 'NotFound')\"):\n>           assert response.status_code == 400, f'Ожидался статус 400, получен {response.status_code}'\nE           AssertionError: Ожидался статус 400, получен 503\nE           assert 503 == 400\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/access_doc/test_matrix_access_docs.py:16: AssertionError","steps":[{"name":"Отправка запроса для получения доступа к документам","time":{"start":1762506262778,"stop":1762506263066,"duration":288},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка, что запрос отклонён (ожидается 400 и код ошибки 'NotFound')","time":{"start":1762506263066,"stop":1762506263067,"duration":1},"status":"failed","statusMessage":"AssertionError: Ожидался статус 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/document/access_doc/test_matrix_access_docs.py\", line 16, in test_document_access_denied_for_foreign_client\n    assert response.status_code == 400, f'Ожидался статус 400, получен {response.status_code}'\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.document.access_doc"},{"name":"suite","value":"test_matrix_access_docs"},{"name":"host","value":"runnervmw9dnm"},{"name":"thread","value":"2573-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.document.access_doc.test_matrix_access_docs"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":10,"passed":2,"unknown":0,"total":13},"items":[{"uid":"211156ad170fdb74","reportUrl":"https://vaizcom.github.io/autotests/419/#testresult/211156ad170fdb74","status":"passed","time":{"start":1762505484791,"stop":1762505485133,"duration":342}},{"uid":"3f6bdf9395431097","reportUrl":"https://vaizcom.github.io/autotests/418/#testresult/3f6bdf9395431097","status":"passed","time":{"start":1762354462902,"stop":1762354463094,"duration":192}},{"uid":"750f430c1c8b88f2","reportUrl":"https://vaizcom.github.io/autotests/417/#testresult/750f430c1c8b88f2","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762353403937,"stop":1762353403937,"duration":0}},{"uid":"d0d68bfbaadfa310","reportUrl":"https://vaizcom.github.io/autotests/416/#testresult/d0d68bfbaadfa310","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762349993814,"stop":1762349993814,"duration":0}},{"uid":"11c514600bd5b6a8","reportUrl":"https://vaizcom.github.io/autotests/415/#testresult/11c514600bd5b6a8","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762331964575,"stop":1762331964575,"duration":0}},{"uid":"fbb08f89b06ec5d7","reportUrl":"https://vaizcom.github.io/autotests/414/#testresult/fbb08f89b06ec5d7","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762329017863,"stop":1762329017863,"duration":0}},{"uid":"e4f14be7c10959f2","reportUrl":"https://vaizcom.github.io/autotests/413/#testresult/e4f14be7c10959f2","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762270626522,"stop":1762270626522,"duration":0}},{"uid":"eabaa8814a7a6106","reportUrl":"https://vaizcom.github.io/autotests/412/#testresult/eabaa8814a7a6106","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762269840055,"stop":1762269840055,"duration":0}},{"uid":"381ee587cfe0f4a2","reportUrl":"https://vaizcom.github.io/autotests/411/#testresult/381ee587cfe0f4a2","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762269701504,"stop":1762269701504,"duration":0}},{"uid":"622dd853abbf8c2f","reportUrl":"https://vaizcom.github.io/autotests/410/#testresult/622dd853abbf8c2f","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762269482572,"stop":1762269482572,"duration":0}},{"uid":"52944a2e8ad1ed6f","reportUrl":"https://vaizcom.github.io/autotests/409/#testresult/52944a2e8ad1ed6f","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762268849413,"stop":1762268849413,"duration":0}},{"uid":"de1c07457abbe88c","reportUrl":"https://vaizcom.github.io/autotests/408/#testresult/de1c07457abbe88c","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762245238288,"stop":1762245238288,"duration":0}}]},"tags":["backend"]},"source":"8dc107cf9137a590.json","parameterValues":[]}