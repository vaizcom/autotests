{"uid":"4c96c3f94b26f9dd","name":"Негативный кейс: invalid kind","fullName":"tests.test_backend.document.test_get_documents#test_get_documents_invalid_inputs","historyId":"965e2d1656e723eff519ac7f7b9e2188","time":{"start":1763372686377,"stop":1763372686543,"duration":166},"status":"failed","statusMessage":"AssertionError: Ожидался статус 400, но получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f77c963fad0>\ntemp_space = '691aedb94bfde6405da027ce'\ntemp_project = '691aedba4bfde6405da02857', kind = 'WrongKind'\nkind_id = '691aedba4bfde6405da02857', space_id = 'valid_space_id'\nexpected_status = 400, case_id = 'invalid kind'\n\n    @pytest.mark.parametrize(\n        'kind, kind_id, space_id, expected_status, case_id',\n        [\n            ('Project', 'nonexistent-id', 'valid_space_id', 400, 'invalid kindId'),\n            ('WrongKind', 'valid_project_id', 'valid_space_id', 400, 'invalid kind'),\n            (None, 'valid_project_id', 'valid_space_id', 400, 'missing kind'),\n            ('Project', None, 'valid_space_id', 400, 'missing kindId'),\n        ],\n        ids=['invalid kindId', 'invalid kind', 'missing kind', 'missing kindId'],\n    )\n    def test_get_documents_invalid_inputs(\n        owner_client, temp_space, temp_project, kind, kind_id, space_id, expected_status, case_id\n    ):\n        allure.dynamic.title(f'Негативный кейс: {case_id}')\n    \n        if kind_id == 'valid_project_id':\n            kind_id = temp_project\n    \n        with allure.step(f'Отправка запроса и проверка статуса {expected_status}, проверка ошибки \"InvalidForm\"'):\n            response = owner_client.post(**get_documents_endpoint(kind=kind, kind_id=kind_id, space_id=temp_space))\n>           assert (\n                response.status_code == expected_status\n            ), f'Ожидался статус {expected_status}, но получен {response.status_code}'\nE           AssertionError: Ожидался статус 400, но получен 503\nE           assert 503 == 400\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/test_get_documents.py:76: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1763372463637,"stop":1763372463637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1763372463637,"stop":1763372463637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1763372463637,"stop":1763372463637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1763372463637,"stop":1763372464256,"duration":619},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1763372463637,"stop":1763372463637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"temp_space","time":{"start":1763372473721,"stop":1763372474260,"duration":539},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"temp_project","time":{"start":1763372474260,"stop":1763372474711,"duration":451},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Ожидался статус 400, но получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f77c963fad0>\ntemp_space = '691aedb94bfde6405da027ce'\ntemp_project = '691aedba4bfde6405da02857', kind = 'WrongKind'\nkind_id = '691aedba4bfde6405da02857', space_id = 'valid_space_id'\nexpected_status = 400, case_id = 'invalid kind'\n\n    @pytest.mark.parametrize(\n        'kind, kind_id, space_id, expected_status, case_id',\n        [\n            ('Project', 'nonexistent-id', 'valid_space_id', 400, 'invalid kindId'),\n            ('WrongKind', 'valid_project_id', 'valid_space_id', 400, 'invalid kind'),\n            (None, 'valid_project_id', 'valid_space_id', 400, 'missing kind'),\n            ('Project', None, 'valid_space_id', 400, 'missing kindId'),\n        ],\n        ids=['invalid kindId', 'invalid kind', 'missing kind', 'missing kindId'],\n    )\n    def test_get_documents_invalid_inputs(\n        owner_client, temp_space, temp_project, kind, kind_id, space_id, expected_status, case_id\n    ):\n        allure.dynamic.title(f'Негативный кейс: {case_id}')\n    \n        if kind_id == 'valid_project_id':\n            kind_id = temp_project\n    \n        with allure.step(f'Отправка запроса и проверка статуса {expected_status}, проверка ошибки \"InvalidForm\"'):\n            response = owner_client.post(**get_documents_endpoint(kind=kind, kind_id=kind_id, space_id=temp_space))\n>           assert (\n                response.status_code == expected_status\n            ), f'Ожидался статус {expected_status}, но получен {response.status_code}'\nE           AssertionError: Ожидался статус 400, но получен 503\nE           assert 503 == 400\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/test_get_documents.py:76: AssertionError","steps":[{"name":"Отправка запроса и проверка статуса 400, проверка ошибки \"InvalidForm\"","time":{"start":1763372686377,"stop":1763372686543,"duration":166},"status":"failed","statusMessage":"AssertionError: Ожидался статус 400, но получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/document/test_get_documents.py\", line 76, in test_get_documents_invalid_inputs\n    assert (\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"temp_space::0","time":{"start":1763372706682,"stop":1763372706846,"duration":164},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"temp_project::0","time":{"start":1763372706682,"stop":1763372706682,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.document"},{"name":"suite","value":"test_get_documents"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2573-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.document.test_get_documents"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"case_id","value":"'invalid kind'"},{"name":"expected_status","value":"400"},{"name":"kind","value":"'WrongKind'"},{"name":"kind_id","value":"'valid_project_id'"},{"name":"space_id","value":"'valid_space_id'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":4,"broken":0,"skipped":0,"passed":37,"unknown":0,"total":41},"items":[{"uid":"c76eac51efee3459","reportUrl":"https://vaizcom.github.io/autotests/447/#testresult/c76eac51efee3459","status":"passed","time":{"start":1763366505642,"stop":1763366505875,"duration":233}},{"uid":"607c1c81e52ad33","reportUrl":"https://vaizcom.github.io/autotests/446/#testresult/607c1c81e52ad33","status":"passed","time":{"start":1763130580685,"stop":1763130581896,"duration":1211}},{"uid":"4076312c8c8129ae","reportUrl":"https://vaizcom.github.io/autotests/445/#testresult/4076312c8c8129ae","status":"passed","time":{"start":1763114273127,"stop":1763114273363,"duration":236}},{"uid":"72414c7c096ef108","reportUrl":"https://vaizcom.github.io/autotests/444/#testresult/72414c7c096ef108","status":"passed","time":{"start":1763046952896,"stop":1763046953103,"duration":207}},{"uid":"74148ff2fb65717b","reportUrl":"https://vaizcom.github.io/autotests/443/#testresult/74148ff2fb65717b","status":"passed","time":{"start":1763042608743,"stop":1763042609231,"duration":488}},{"uid":"c23300d317e7fdf4","reportUrl":"https://vaizcom.github.io/autotests/442/#testresult/c23300d317e7fdf4","status":"passed","time":{"start":1763040526652,"stop":1763040526848,"duration":196}},{"uid":"1d8860928b9b69d5","reportUrl":"https://vaizcom.github.io/autotests/441/#testresult/1d8860928b9b69d5","status":"passed","time":{"start":1763037213645,"stop":1763037213894,"duration":249}},{"uid":"d5b88ae58ccbbfcb","reportUrl":"https://vaizcom.github.io/autotests/440/#testresult/d5b88ae58ccbbfcb","status":"passed","time":{"start":1763034802602,"stop":1763034802823,"duration":221}},{"uid":"7be526d7d5c56265","reportUrl":"https://vaizcom.github.io/autotests/439/#testresult/7be526d7d5c56265","status":"passed","time":{"start":1763023110590,"stop":1763023110857,"duration":267}},{"uid":"dbdaf53c32732138","reportUrl":"https://vaizcom.github.io/autotests/438/#testresult/dbdaf53c32732138","status":"passed","time":{"start":1763020705002,"stop":1763020705244,"duration":242}},{"uid":"ac139f9effcb0332","reportUrl":"https://vaizcom.github.io/autotests/437/#testresult/ac139f9effcb0332","status":"passed","time":{"start":1762972957879,"stop":1762972958081,"duration":202}},{"uid":"2b169a2a571e42ba","reportUrl":"https://vaizcom.github.io/autotests/436/#testresult/2b169a2a571e42ba","status":"passed","time":{"start":1762972291794,"stop":1762972292042,"duration":248}},{"uid":"ba6fdc3f528e954d","reportUrl":"https://vaizcom.github.io/autotests/434/#testresult/ba6fdc3f528e954d","status":"passed","time":{"start":1762950687409,"stop":1762950687589,"duration":180}},{"uid":"ca1c3296f9985e59","reportUrl":"https://vaizcom.github.io/autotests/433/#testresult/ca1c3296f9985e59","status":"passed","time":{"start":1762949015251,"stop":1762949015487,"duration":236}},{"uid":"8e2b540ebcfe7d45","reportUrl":"https://vaizcom.github.io/autotests/432/#testresult/8e2b540ebcfe7d45","status":"passed","time":{"start":1762947225062,"stop":1762947225341,"duration":279}},{"uid":"95c47d79926310c0","reportUrl":"https://vaizcom.github.io/autotests/432/#testresult/95c47d79926310c0","status":"failed","statusDetails":"AssertionError: Ожидался статус 400, но получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","time":{"start":1762939581020,"stop":1762939581135,"duration":115}},{"uid":"247d6ffbbe5c81e9","reportUrl":"https://vaizcom.github.io/autotests/431/#testresult/247d6ffbbe5c81e9","status":"passed","time":{"start":1762855691807,"stop":1762855692069,"duration":262}},{"uid":"b8ccbe71fe552472","reportUrl":"https://vaizcom.github.io/autotests/430/#testresult/b8ccbe71fe552472","status":"passed","time":{"start":1762780838106,"stop":1762780838303,"duration":197}},{"uid":"2097e22f623ff854","reportUrl":"https://vaizcom.github.io/autotests/429/#testresult/2097e22f623ff854","status":"passed","time":{"start":1762778989817,"stop":1762778990003,"duration":186}},{"uid":"4aa244cf81034d57","reportUrl":"https://vaizcom.github.io/autotests/427/#testresult/4aa244cf81034d57","status":"passed","time":{"start":1762773944034,"stop":1762773944266,"duration":232}}]},"tags":["backend"]},"source":"4c96c3f94b26f9dd.json","parameterValues":["'invalid kind'","400","'WrongKind'","'valid_project_id'","'valid_space_id'"]}