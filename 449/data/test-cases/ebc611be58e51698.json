{"uid":"ebc611be58e51698","name":"Негативный экспорт Y-Doc для document_id=bad_format","fullName":"tests.test_backend.document.test_get_y_document#test_get_ydocument_invalid_id","historyId":"5e289d2582a33643e1e81151facf95bb","time":{"start":1763387981136,"stop":1763387981289,"duration":153},"description":"\n    Негативный сценарий: разные некорректные document_id.\n    ","descriptionHtml":"<pre><code>Негативный сценарий: разные некорректные document_id.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Ожидался 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f061917eb10>\ntemp_space = '691b29650d8887e706faae80', fake_id = 'bad_format'\nexpected_status = 400\n\n    @pytest.mark.parametrize(\n        'fake_id, expected_status',\n        [\n            ('000000000000000000000000', 400),\n            ('', 400),\n            (None, 400),\n            ('bad_format', 400),\n        ],\n        ids=['not_found', 'empty', 'null', 'bad_format'],\n    )\n    def test_get_ydocument_invalid_id(owner_client, temp_space, fake_id, expected_status):\n        \"\"\"\n        Негативный сценарий: разные некорректные document_id.\n        \"\"\"\n        allure.dynamic.title(f'Негативный экспорт Y-Doc для document_id={fake_id}')\n        with allure.step('Выполняем запрос с некорректным document_id'):\n            endpoint = get_ydocument_endpoint(document_id=fake_id, space_id=temp_space)\n            resp = owner_client.post(**endpoint)\n>           assert resp.status_code == expected_status, f'Ожидался {expected_status}, получен {resp.status_code}'\nE           AssertionError: Ожидался 400, получен 503\nE           assert 503 == 400\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/test_get_y_document.py:71: AssertionError","flaky":true,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1763387735904,"stop":1763387735904,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1763387735904,"stop":1763387735904,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1763387735904,"stop":1763387735904,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1763387735904,"stop":1763387735904,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1763387737613,"stop":1763387737917,"duration":304},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"temp_space","time":{"start":1763387748989,"stop":1763387749547,"duration":558},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Негативный сценарий: разные некорректные document_id.\n    ","status":"failed","statusMessage":"AssertionError: Ожидался 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7f061917eb10>\ntemp_space = '691b29650d8887e706faae80', fake_id = 'bad_format'\nexpected_status = 400\n\n    @pytest.mark.parametrize(\n        'fake_id, expected_status',\n        [\n            ('000000000000000000000000', 400),\n            ('', 400),\n            (None, 400),\n            ('bad_format', 400),\n        ],\n        ids=['not_found', 'empty', 'null', 'bad_format'],\n    )\n    def test_get_ydocument_invalid_id(owner_client, temp_space, fake_id, expected_status):\n        \"\"\"\n        Негативный сценарий: разные некорректные document_id.\n        \"\"\"\n        allure.dynamic.title(f'Негативный экспорт Y-Doc для document_id={fake_id}')\n        with allure.step('Выполняем запрос с некорректным document_id'):\n            endpoint = get_ydocument_endpoint(document_id=fake_id, space_id=temp_space)\n            resp = owner_client.post(**endpoint)\n>           assert resp.status_code == expected_status, f'Ожидался {expected_status}, получен {resp.status_code}'\nE           AssertionError: Ожидался 400, получен 503\nE           assert 503 == 400\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/test_get_y_document.py:71: AssertionError","steps":[{"name":"Выполняем запрос с некорректным document_id","time":{"start":1763387981136,"stop":1763387981289,"duration":153},"status":"failed","statusMessage":"AssertionError: Ожидался 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/document/test_get_y_document.py\", line 71, in test_get_ydocument_invalid_id\n    assert resp.status_code == expected_status, f'Ожидался {expected_status}, получен {resp.status_code}'\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"temp_space::0","time":{"start":1763387989198,"stop":1763387989326,"duration":128},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.document"},{"name":"suite","value":"test_get_y_document"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2589-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.document.test_get_y_document"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"expected_status","value":"400"},{"name":"fake_id","value":"'bad_format'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":5,"broken":0,"skipped":0,"passed":38,"unknown":0,"total":43},"items":[{"uid":"8ce723a332c5d764","reportUrl":"https://vaizcom.github.io/autotests/448/#testresult/8ce723a332c5d764","status":"passed","time":{"start":1763373339826,"stop":1763373340005,"duration":179}},{"uid":"c5d67d4a139e77f0","reportUrl":"https://vaizcom.github.io/autotests/448/#testresult/c5d67d4a139e77f0","status":"failed","statusDetails":"AssertionError: Ожидался 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","time":{"start":1763372693070,"stop":1763372693233,"duration":163}},{"uid":"ac630bdb0cbab7f7","reportUrl":"https://vaizcom.github.io/autotests/447/#testresult/ac630bdb0cbab7f7","status":"passed","time":{"start":1763366569848,"stop":1763366570142,"duration":294}},{"uid":"b96ef5246553e83c","reportUrl":"https://vaizcom.github.io/autotests/446/#testresult/b96ef5246553e83c","status":"passed","time":{"start":1763130651854,"stop":1763130652109,"duration":255}},{"uid":"cbf531d166f34d51","reportUrl":"https://vaizcom.github.io/autotests/445/#testresult/cbf531d166f34d51","status":"passed","time":{"start":1763114338907,"stop":1763114339166,"duration":259}},{"uid":"fe7eb8551dc40a48","reportUrl":"https://vaizcom.github.io/autotests/444/#testresult/fe7eb8551dc40a48","status":"passed","time":{"start":1763047015031,"stop":1763047015234,"duration":203}},{"uid":"73d738c0e17f2594","reportUrl":"https://vaizcom.github.io/autotests/443/#testresult/73d738c0e17f2594","status":"passed","time":{"start":1763042693559,"stop":1763042693770,"duration":211}},{"uid":"aa322c34acf8f109","reportUrl":"https://vaizcom.github.io/autotests/442/#testresult/aa322c34acf8f109","status":"passed","time":{"start":1763040590017,"stop":1763040590232,"duration":215}},{"uid":"93a52522051d0b92","reportUrl":"https://vaizcom.github.io/autotests/441/#testresult/93a52522051d0b92","status":"passed","time":{"start":1763037281650,"stop":1763037281896,"duration":246}},{"uid":"3d0bdd165f56fe65","reportUrl":"https://vaizcom.github.io/autotests/440/#testresult/3d0bdd165f56fe65","status":"passed","time":{"start":1763034868156,"stop":1763034868362,"duration":206}},{"uid":"8cfc2e7298e0db0d","reportUrl":"https://vaizcom.github.io/autotests/439/#testresult/8cfc2e7298e0db0d","status":"passed","time":{"start":1763023176019,"stop":1763023176258,"duration":239}},{"uid":"eae5b8cf9b7351f8","reportUrl":"https://vaizcom.github.io/autotests/438/#testresult/eae5b8cf9b7351f8","status":"passed","time":{"start":1763020770962,"stop":1763020771211,"duration":249}},{"uid":"5d0fc6277f5ff50c","reportUrl":"https://vaizcom.github.io/autotests/437/#testresult/5d0fc6277f5ff50c","status":"passed","time":{"start":1762973019724,"stop":1762973019919,"duration":195}},{"uid":"ad1abdd9af13e080","reportUrl":"https://vaizcom.github.io/autotests/436/#testresult/ad1abdd9af13e080","status":"passed","time":{"start":1762972362159,"stop":1762972362413,"duration":254}},{"uid":"861bd7a6d9e102eb","reportUrl":"https://vaizcom.github.io/autotests/434/#testresult/861bd7a6d9e102eb","status":"passed","time":{"start":1762950757724,"stop":1762950758122,"duration":398}},{"uid":"33b54d267d0442a4","reportUrl":"https://vaizcom.github.io/autotests/433/#testresult/33b54d267d0442a4","status":"passed","time":{"start":1762949082653,"stop":1762949082912,"duration":259}},{"uid":"fc5a8f7bafa064df","reportUrl":"https://vaizcom.github.io/autotests/432/#testresult/fc5a8f7bafa064df","status":"passed","time":{"start":1762947294572,"stop":1762947294811,"duration":239}},{"uid":"29c7dad6c59a938c","reportUrl":"https://vaizcom.github.io/autotests/432/#testresult/29c7dad6c59a938c","status":"failed","statusDetails":"AssertionError: Ожидался 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","time":{"start":1762939585515,"stop":1762939585621,"duration":106}},{"uid":"87fb0e6eba8331bc","reportUrl":"https://vaizcom.github.io/autotests/431/#testresult/87fb0e6eba8331bc","status":"passed","time":{"start":1762855762837,"stop":1762855763117,"duration":280}},{"uid":"6af8e316c8cfffdf","reportUrl":"https://vaizcom.github.io/autotests/430/#testresult/6af8e316c8cfffdf","status":"passed","time":{"start":1762780897457,"stop":1762780897637,"duration":180}}]},"tags":["backend"]},"source":"ebc611be58e51698.json","parameterValues":["400","'bad_format'"]}