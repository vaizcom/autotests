{"uid":"7009bb1417807683","name":"Тестирование получения задач под ролью Client_with_access_only_in_project","fullName":"tests.test_backend.task_service.get_tasks.access_get_tasks.test_get_tasks_project_filters#test_get_tasks_limited_access_filtered_by_project","historyId":"6697bf00acade6656128d76394baed91","time":{"start":1763996447849,"stop":1763996458461,"duration":10612},"description":"\n        Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n        но при этом запрос выполняется успешно (HTTP 200).\n        ","descriptionHtml":"<pre><code>    Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n    но при этом запрос выполняется успешно (HTTP 200).\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Ожидался пустой список задач для client_with_access_only_in_project\nassert 10823 == 0\n +  where 10823 = len([{'_id': '6909d5af1a593d8d7c3ba732', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5af1a593d8d7c3ba76e', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5af1a593d8d7c3ba7aa', 'archivedAt': None, 'archiver': None, 'assignees': ['686630dd85fb8d104544aac8', '6866313985fb8d104544ab6c'], ...}, {'_id': '6909d5af1a593d8d7c3ba7e7', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5b01a593d8d7c3ba824', 'archivedAt': None, 'archiver': None, 'assignees': ['6866346d85fb8d104544ae41', '6866313985fb8d104544ab6c'], ...}, {'_id': '6909d5b01a593d8d7c3ba860', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, ...])","statusTrace":"request = <FixtureRequest for <Function test_get_tasks_limited_access_filtered_by_project[no_access_to_main_project]>>\nclient_fixture = 'client_with_access_only_in_project'\nmain_project = '686672af85fb8d104544e798'\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title(\"GetTasks: Проверка что список задач пустой для пользователей которые не имеют доступ к project\")\n    @pytest.mark.parametrize(\n        'client_fixture',\n        ['client_with_access_only_in_space', 'client_with_access_only_in_project'],\n        ids=['access_only_in_space', 'no_access_to_main_project'],\n    )\n    def test_get_tasks_limited_access_filtered_by_project(request, client_fixture, main_project, main_space):\n        \"\"\"\n            Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n            но при этом запрос выполняется успешно (HTTP 200).\n            \"\"\"\n        role_name = client_fixture.capitalize()\n        allure.dynamic.title(f\"Тестирование получения задач под ролью {role_name}\")\n    \n        client = request.getfixturevalue(client_fixture)\n    \n        with allure.step(f\"{client_fixture}: вызвать GetTasks с фильтром project\"):\n            resp = client.post(**get_tasks_endpoint(space_id=main_space, project=main_project))\n    \n        with allure.step(\"Проверить HTTP 200\"):\n            assert resp.status_code == 200\n    \n        with allure.step(\"Проверить что список задач пустой\"):\n            payload = resp.json().get(\"payload\", {})\n            assert \"tasks\" in payload and isinstance(payload[\"tasks\"], list)\n>           assert len(payload[\"tasks\"]) == 0, f\"Ожидался пустой список задач для {client_fixture}\"\nE           AssertionError: Ожидался пустой список задач для client_with_access_only_in_project\nE           assert 10823 == 0\nE            +  where 10823 = len([{'_id': '6909d5af1a593d8d7c3ba732', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5af1a593d8d7c3ba76e', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5af1a593d8d7c3ba7aa', 'archivedAt': None, 'archiver': None, 'assignees': ['686630dd85fb8d104544aac8', '6866313985fb8d104544ab6c'], ...}, {'_id': '6909d5af1a593d8d7c3ba7e7', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5b01a593d8d7c3ba824', 'archivedAt': None, 'archiver': None, 'assignees': ['6866346d85fb8d104544ae41', '6866313985fb8d104544ab6c'], ...}, {'_id': '6909d5b01a593d8d7c3ba860', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, ...])\n\ntests/test_backend/task_service/get_tasks/access_get_tasks/test_get_tasks_project_filters.py:81: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"description":"\n        Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n        но при этом запрос выполняется успешно (HTTP 200).\n        ","status":"failed","statusMessage":"AssertionError: Ожидался пустой список задач для client_with_access_only_in_project\nassert 10823 == 0\n +  where 10823 = len([{'_id': '6909d5af1a593d8d7c3ba732', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5af1a593d8d7c3ba76e', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5af1a593d8d7c3ba7aa', 'archivedAt': None, 'archiver': None, 'assignees': ['686630dd85fb8d104544aac8', '6866313985fb8d104544ab6c'], ...}, {'_id': '6909d5af1a593d8d7c3ba7e7', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5b01a593d8d7c3ba824', 'archivedAt': None, 'archiver': None, 'assignees': ['6866346d85fb8d104544ae41', '6866313985fb8d104544ab6c'], ...}, {'_id': '6909d5b01a593d8d7c3ba860', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, ...])","statusTrace":"request = <FixtureRequest for <Function test_get_tasks_limited_access_filtered_by_project[no_access_to_main_project]>>\nclient_fixture = 'client_with_access_only_in_project'\nmain_project = '686672af85fb8d104544e798'\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title(\"GetTasks: Проверка что список задач пустой для пользователей которые не имеют доступ к project\")\n    @pytest.mark.parametrize(\n        'client_fixture',\n        ['client_with_access_only_in_space', 'client_with_access_only_in_project'],\n        ids=['access_only_in_space', 'no_access_to_main_project'],\n    )\n    def test_get_tasks_limited_access_filtered_by_project(request, client_fixture, main_project, main_space):\n        \"\"\"\n            Проверяет, что пользователи без доступа к проекту получают пустой список задач,\n            но при этом запрос выполняется успешно (HTTP 200).\n            \"\"\"\n        role_name = client_fixture.capitalize()\n        allure.dynamic.title(f\"Тестирование получения задач под ролью {role_name}\")\n    \n        client = request.getfixturevalue(client_fixture)\n    \n        with allure.step(f\"{client_fixture}: вызвать GetTasks с фильтром project\"):\n            resp = client.post(**get_tasks_endpoint(space_id=main_space, project=main_project))\n    \n        with allure.step(\"Проверить HTTP 200\"):\n            assert resp.status_code == 200\n    \n        with allure.step(\"Проверить что список задач пустой\"):\n            payload = resp.json().get(\"payload\", {})\n            assert \"tasks\" in payload and isinstance(payload[\"tasks\"], list)\n>           assert len(payload[\"tasks\"]) == 0, f\"Ожидался пустой список задач для {client_fixture}\"\nE           AssertionError: Ожидался пустой список задач для client_with_access_only_in_project\nE           assert 10823 == 0\nE            +  where 10823 = len([{'_id': '6909d5af1a593d8d7c3ba732', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5af1a593d8d7c3ba76e', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5af1a593d8d7c3ba7aa', 'archivedAt': None, 'archiver': None, 'assignees': ['686630dd85fb8d104544aac8', '6866313985fb8d104544ab6c'], ...}, {'_id': '6909d5af1a593d8d7c3ba7e7', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5b01a593d8d7c3ba824', 'archivedAt': None, 'archiver': None, 'assignees': ['6866346d85fb8d104544ae41', '6866313985fb8d104544ab6c'], ...}, {'_id': '6909d5b01a593d8d7c3ba860', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, ...])\n\ntests/test_backend/task_service/get_tasks/access_get_tasks/test_get_tasks_project_filters.py:81: AssertionError","steps":[{"name":"client_with_access_only_in_project: вызвать GetTasks с фильтром project","time":{"start":1763996447849,"stop":1763996458346,"duration":10497},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверить HTTP 200","time":{"start":1763996458346,"stop":1763996458346,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверить что список задач пустой","time":{"start":1763996458346,"stop":1763996458461,"duration":115},"status":"failed","statusMessage":"AssertionError: Ожидался пустой список задач для client_with_access_only_in_project\nassert 10823 == 0\n +  where 10823 = len([{'_id': '6909d5af1a593d8d7c3ba732', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5af1a593d8d7c3ba76e', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5af1a593d8d7c3ba7aa', 'archivedAt': None, 'archiver': None, 'assignees': ['686630dd85fb8d104544aac8', '6866313985fb8d104544ab6c'], ...}, {'_id': '6909d5af1a593d8d7c3ba7e7', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, {'_id': '6909d5b01a593d8d7c3ba824', 'archivedAt': None, 'archiver': None, 'assignees': ['6866346d85fb8d104544ae41', '6866313985fb8d104544ab6c'], ...}, {'_id': '6909d5b01a593d8d7c3ba860', 'archivedAt': None, 'archiver': None, 'assignees': [], ...}, ...])\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/task_service/get_tasks/access_get_tasks/test_get_tasks_project_filters.py\", line 81, in test_get_tasks_limited_access_filtered_by_project\n    assert len(payload[\"tasks\"]) == 0, f\"Ожидался пустой список задач для {client_fixture}\"\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":3,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.task_service.get_tasks.access_get_tasks"},{"name":"suite","value":"test_get_tasks_project_filters"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2653-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.task_service.get_tasks.access_get_tasks.test_get_tasks_project_filters"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"client_fixture","value":"'client_with_access_only_in_project'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":19,"unknown":0,"total":20},"items":[{"uid":"e1e7edd2f73d753f","reportUrl":"https://vaizcom.github.io/autotests/470/#testresult/e1e7edd2f73d753f","status":"passed","time":{"start":1763995225934,"stop":1763995226422,"duration":488}},{"uid":"530834a8e3a9b4c1","reportUrl":"https://vaizcom.github.io/autotests/469/#testresult/530834a8e3a9b4c1","status":"passed","time":{"start":1763993478994,"stop":1763993479553,"duration":559}},{"uid":"c863544791320b91","reportUrl":"https://vaizcom.github.io/autotests/468/#testresult/c863544791320b91","status":"passed","time":{"start":1763734843934,"stop":1763734844157,"duration":223}},{"uid":"1114bc1efb0dce5f","reportUrl":"https://vaizcom.github.io/autotests/467/#testresult/1114bc1efb0dce5f","status":"passed","time":{"start":1763733024209,"stop":1763733024759,"duration":550}},{"uid":"8ca2d19fb77570f9","reportUrl":"https://vaizcom.github.io/autotests/466/#testresult/8ca2d19fb77570f9","status":"passed","time":{"start":1763726677973,"stop":1763726678510,"duration":537}},{"uid":"a27d3afdc68e3493","reportUrl":"https://vaizcom.github.io/autotests/465/#testresult/a27d3afdc68e3493","status":"passed","time":{"start":1763720219119,"stop":1763720219288,"duration":169}},{"uid":"a60a5f6b4646de14","reportUrl":"https://vaizcom.github.io/autotests/464/#testresult/a60a5f6b4646de14","status":"passed","time":{"start":1763715528801,"stop":1763715529172,"duration":371}},{"uid":"b1760b9c8b61dc55","reportUrl":"https://vaizcom.github.io/autotests/463/#testresult/b1760b9c8b61dc55","status":"passed","time":{"start":1763714948141,"stop":1763714948415,"duration":274}},{"uid":"c90f26ae8c0c06fc","reportUrl":"https://vaizcom.github.io/autotests/462/#testresult/c90f26ae8c0c06fc","status":"passed","time":{"start":1763711383009,"stop":1763711383185,"duration":176}},{"uid":"7d797cba8aa44e9f","reportUrl":"https://vaizcom.github.io/autotests/461/#testresult/7d797cba8aa44e9f","status":"passed","time":{"start":1763710404892,"stop":1763710405150,"duration":258}},{"uid":"11faa0f2a4c208a2","reportUrl":"https://vaizcom.github.io/autotests/460/#testresult/11faa0f2a4c208a2","status":"passed","time":{"start":1763651931787,"stop":1763651932027,"duration":240}},{"uid":"9d7df60527894537","reportUrl":"https://vaizcom.github.io/autotests/459/#testresult/9d7df60527894537","status":"passed","time":{"start":1763650071494,"stop":1763650071716,"duration":222}},{"uid":"e30d0d4bd04d2dcd","reportUrl":"https://vaizcom.github.io/autotests/458/#testresult/e30d0d4bd04d2dcd","status":"passed","time":{"start":1763631444809,"stop":1763631444980,"duration":171}},{"uid":"a88f3ef581ac713b","reportUrl":"https://vaizcom.github.io/autotests/457/#testresult/a88f3ef581ac713b","status":"passed","time":{"start":1763628801509,"stop":1763628801857,"duration":348}},{"uid":"5059a345f6e0d55e","reportUrl":"https://vaizcom.github.io/autotests/456/#testresult/5059a345f6e0d55e","status":"passed","time":{"start":1763559938328,"stop":1763559938900,"duration":572}},{"uid":"4b479b9fd3170b47","reportUrl":"https://vaizcom.github.io/autotests/455/#testresult/4b479b9fd3170b47","status":"passed","time":{"start":1763542885830,"stop":1763542886459,"duration":629}},{"uid":"a0b1a69019792055","reportUrl":"https://vaizcom.github.io/autotests/454/#testresult/a0b1a69019792055","status":"passed","time":{"start":1763540613258,"stop":1763540613672,"duration":414}},{"uid":"b265c883200f10ae","reportUrl":"https://vaizcom.github.io/autotests/453/#testresult/b265c883200f10ae","status":"passed","time":{"start":1763478065760,"stop":1763478066023,"duration":263}},{"uid":"aaaec0aef0ddf0c8","reportUrl":"https://vaizcom.github.io/autotests/452/#testresult/aaaec0aef0ddf0c8","status":"passed","time":{"start":1763476247909,"stop":1763476248130,"duration":221}}]},"tags":["backend"]},"source":"7009bb1417807683.json","parameterValues":["'client_with_access_only_in_project'"]}