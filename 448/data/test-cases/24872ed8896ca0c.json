{"uid":"24872ed8896ca0c","name":"Негативные сценарии: Get task с invalid slug | slug='NOT-EXIST-999999' -> 400","fullName":"tests.test_backend.task_service.get_task.test_get_task_wrong_slug#test_get_task_wrong_slug","historyId":"a8401b718d37b5a6f212f02f712cadfb","time":{"start":1763372704762,"stop":1763372704926,"duration":164},"description":"\n        Проверка обработки некорректных значений slug при получении задачи.\n        Ожидаем корректные коды ошибок для разных невалидных входных данных.\n        ","descriptionHtml":"<pre><code>    Проверка обработки некорректных значений slug при получении задачи.\n    Ожидаем корректные коды ошибок для разных невалидных входных данных.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Ожидался 400, получено 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"main_space = '6866309d85fb8d104544a61e', slug_id = 'NOT-EXIST-999999'\nexpected_status = 400\nowner_client = <tests.core.client.APIClient object at 0x7f77c963fad0>\n\n    @pytest.mark.parametrize(\n        \"slug_id, expected_status\",\n        [\n            (None, 400),                  # нет slug\n            (\"\", 400),                    # пустой slug\n            (\"NOT-EXIST-999999\", 400),    # несуществующий\n            (\"<script>\", 400),            # XSS\n            (\"1 OR 1=1\", 400),            # SQLi\n            (\"A\" * 9, 400),            # слишком длинный\n        ],\n        ids=[\"no_slug\", \"empty_slug\", \"not_found\", \"xss\", \"sqli\", \"too_long\"],\n    )\n    def test_get_task_wrong_slug(main_space, slug_id, expected_status, owner_client):\n        \"\"\"\n            Проверка обработки некорректных значений slug при получении задачи.\n            Ожидаем корректные коды ошибок для разных невалидных входных данных.\n            \"\"\"\n        allure.dynamic.title(f\"Негативные сценарии: Get task с invalid slug | slug={slug_id!r} -> {expected_status}\")\n    \n        with allure.step(\"Готовим параметры запроса\"):\n            endpoint = get_task_endpoint(space_id=main_space, slug_id=slug_id)\n    \n        with allure.step(f\"Отправляем запрос: slug_id={slug_id}\"):\n            response = owner_client.post(**endpoint)\n    \n        with allure.step(f\"Проверяем код ответа == {expected_status}\"):\n            if isinstance(slug_id, str):\n>               assert response.status_code == expected_status, f\"Ожидался {expected_status}, получено {response.status_code}\"\nE               AssertionError: Ожидался 400, получено 503\nE               assert 503 == 400\nE                +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/task_service/get_task/test_get_task_wrong_slug.py:35: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1763372463637,"stop":1763372463637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1763372463637,"stop":1763372463637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1763372463637,"stop":1763372463637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1763372463637,"stop":1763372464256,"duration":619},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1763372463637,"stop":1763372463637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1763372467539,"stop":1763372467828,"duration":289},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1763372467828,"stop":1763372468114,"duration":286},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n        Проверка обработки некорректных значений slug при получении задачи.\n        Ожидаем корректные коды ошибок для разных невалидных входных данных.\n        ","status":"failed","statusMessage":"AssertionError: Ожидался 400, получено 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"main_space = '6866309d85fb8d104544a61e', slug_id = 'NOT-EXIST-999999'\nexpected_status = 400\nowner_client = <tests.core.client.APIClient object at 0x7f77c963fad0>\n\n    @pytest.mark.parametrize(\n        \"slug_id, expected_status\",\n        [\n            (None, 400),                  # нет slug\n            (\"\", 400),                    # пустой slug\n            (\"NOT-EXIST-999999\", 400),    # несуществующий\n            (\"<script>\", 400),            # XSS\n            (\"1 OR 1=1\", 400),            # SQLi\n            (\"A\" * 9, 400),            # слишком длинный\n        ],\n        ids=[\"no_slug\", \"empty_slug\", \"not_found\", \"xss\", \"sqli\", \"too_long\"],\n    )\n    def test_get_task_wrong_slug(main_space, slug_id, expected_status, owner_client):\n        \"\"\"\n            Проверка обработки некорректных значений slug при получении задачи.\n            Ожидаем корректные коды ошибок для разных невалидных входных данных.\n            \"\"\"\n        allure.dynamic.title(f\"Негативные сценарии: Get task с invalid slug | slug={slug_id!r} -> {expected_status}\")\n    \n        with allure.step(\"Готовим параметры запроса\"):\n            endpoint = get_task_endpoint(space_id=main_space, slug_id=slug_id)\n    \n        with allure.step(f\"Отправляем запрос: slug_id={slug_id}\"):\n            response = owner_client.post(**endpoint)\n    \n        with allure.step(f\"Проверяем код ответа == {expected_status}\"):\n            if isinstance(slug_id, str):\n>               assert response.status_code == expected_status, f\"Ожидался {expected_status}, получено {response.status_code}\"\nE               AssertionError: Ожидался 400, получено 503\nE               assert 503 == 400\nE                +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/task_service/get_task/test_get_task_wrong_slug.py:35: AssertionError","steps":[{"name":"Готовим параметры запроса","time":{"start":1763372704762,"stop":1763372704762,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Отправляем запрос: slug_id=NOT-EXIST-999999","time":{"start":1763372704762,"stop":1763372704925,"duration":163},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем код ответа == 400","time":{"start":1763372704925,"stop":1763372704925,"duration":0},"status":"failed","statusMessage":"AssertionError: Ожидался 400, получено 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/task_service/get_task/test_get_task_wrong_slug.py\", line 35, in test_get_task_wrong_slug\n    assert response.status_code == expected_status, f\"Ожидался {expected_status}, получено {response.status_code}\"\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":3,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.task_service.get_task"},{"name":"suite","value":"test_get_task_wrong_slug"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2573-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.task_service.get_task.test_get_task_wrong_slug"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"expected_status","value":"400"},{"name":"slug_id","value":"'NOT-EXIST-999999'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":29,"unknown":0,"total":32},"items":[{"uid":"ef9167b99a2bef8a","reportUrl":"https://vaizcom.github.io/autotests/447/#testresult/ef9167b99a2bef8a","status":"passed","time":{"start":1763366847864,"stop":1763366848170,"duration":306}},{"uid":"bf6d5adebf63da80","reportUrl":"https://vaizcom.github.io/autotests/446/#testresult/bf6d5adebf63da80","status":"passed","time":{"start":1763130898368,"stop":1763130898598,"duration":230}},{"uid":"4293a78c628ce50a","reportUrl":"https://vaizcom.github.io/autotests/445/#testresult/4293a78c628ce50a","status":"passed","time":{"start":1763114596613,"stop":1763114596863,"duration":250}},{"uid":"65ba2d55a3591a7f","reportUrl":"https://vaizcom.github.io/autotests/444/#testresult/65ba2d55a3591a7f","status":"passed","time":{"start":1763047267428,"stop":1763047267663,"duration":235}},{"uid":"4e7dde6bd8beed69","reportUrl":"https://vaizcom.github.io/autotests/443/#testresult/4e7dde6bd8beed69","status":"passed","time":{"start":1763042984272,"stop":1763042984544,"duration":272}},{"uid":"7bf6a71539fa32ce","reportUrl":"https://vaizcom.github.io/autotests/442/#testresult/7bf6a71539fa32ce","status":"passed","time":{"start":1763040837875,"stop":1763040838122,"duration":247}},{"uid":"366dd4cd0cc222ed","reportUrl":"https://vaizcom.github.io/autotests/441/#testresult/366dd4cd0cc222ed","status":"passed","time":{"start":1763037594550,"stop":1763037594847,"duration":297}},{"uid":"65919c4deeb7adb3","reportUrl":"https://vaizcom.github.io/autotests/440/#testresult/65919c4deeb7adb3","status":"passed","time":{"start":1763035133722,"stop":1763035133986,"duration":264}},{"uid":"9e34b24f72a7095e","reportUrl":"https://vaizcom.github.io/autotests/439/#testresult/9e34b24f72a7095e","status":"passed","time":{"start":1763023436170,"stop":1763023436445,"duration":275}},{"uid":"3ae47d4db04d4b91","reportUrl":"https://vaizcom.github.io/autotests/438/#testresult/3ae47d4db04d4b91","status":"passed","time":{"start":1763021052621,"stop":1763021052904,"duration":283}},{"uid":"d795ded292b974fb","reportUrl":"https://vaizcom.github.io/autotests/437/#testresult/d795ded292b974fb","status":"passed","time":{"start":1762973256508,"stop":1762973256780,"duration":272}},{"uid":"d3d00a9ab7f9b1f6","reportUrl":"https://vaizcom.github.io/autotests/436/#testresult/d3d00a9ab7f9b1f6","status":"passed","time":{"start":1762972640954,"stop":1762972641246,"duration":292}},{"uid":"cb5be50a8be228d9","reportUrl":"https://vaizcom.github.io/autotests/434/#testresult/cb5be50a8be228d9","status":"passed","time":{"start":1762950990488,"stop":1762950990714,"duration":226}},{"uid":"5086c4e9c6f39133","reportUrl":"https://vaizcom.github.io/autotests/433/#testresult/5086c4e9c6f39133","status":"passed","time":{"start":1762949357406,"stop":1762949357684,"duration":278}},{"uid":"16f2e5ba06deeec7","reportUrl":"https://vaizcom.github.io/autotests/432/#testresult/16f2e5ba06deeec7","status":"passed","time":{"start":1762947563475,"stop":1762947563752,"duration":277}},{"uid":"ef18ca7863a2542e","reportUrl":"https://vaizcom.github.io/autotests/432/#testresult/ef18ca7863a2542e","status":"failed","statusDetails":"AssertionError: Ожидался 400, получено 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","time":{"start":1762939593120,"stop":1762939593231,"duration":111}},{"uid":"ce852d326a9b3e9e","reportUrl":"https://vaizcom.github.io/autotests/431/#testresult/ce852d326a9b3e9e","status":"passed","time":{"start":1762856056964,"stop":1762856057254,"duration":290}},{"uid":"4d0275deb12184ef","reportUrl":"https://vaizcom.github.io/autotests/430/#testresult/4d0275deb12184ef","status":"passed","time":{"start":1762781126958,"stop":1762781127212,"duration":254}},{"uid":"e1d4d3da4e3efd64","reportUrl":"https://vaizcom.github.io/autotests/429/#testresult/e1d4d3da4e3efd64","status":"passed","time":{"start":1762779300001,"stop":1762779300406,"duration":405}},{"uid":"d2fb5677a8eae01c","reportUrl":"https://vaizcom.github.io/autotests/427/#testresult/d2fb5677a8eae01c","status":"passed","time":{"start":1762774292402,"stop":1762774292699,"duration":297}}]},"tags":["backend"]},"source":"24872ed8896ca0c.json","parameterValues":["400","'NOT-EXIST-999999'"]}