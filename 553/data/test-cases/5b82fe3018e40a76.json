{"uid":"5b82fe3018e40a76","name":"Edit Task: проверка редактирования всех опциональных полей задачи для роли guest_client","fullName":"tests.test_backend.task_service.edit_task.access_edit_task.test_edit_task#test_edit_task_endpoint_all_fields","historyId":"a1772d08fe20dafae22320ad1dd1d1fa","time":{"start":1770372964637,"stop":1770372964951,"duration":314},"status":"failed","statusMessage":"AssertionError: {\"payload\":null,\"type\":\"CreateTask\",\"error\":{\"code\":\"InternalServerError\",\"fields\":[],\"originalType\":\"CreateTask\",\"meta\":{\"context\":\"MongoServerError\",\"message\":\"Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.\"}}}\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code","statusTrace":"request = <FixtureRequest for <Function test_edit_task_endpoint_all_fields[guest_client-403]>>\nowner_client = <tests.core.client.APIClient object at 0x7f9a5de10fd0>\nmain_space = '6866309d85fb8d104544a61e'\nmake_task_in_main = <function make_task_in_main.<locals>._create_task at 0x7f9a5d9dd6c0>\nmain_board = '6866731185fb8d104544e826'\nmain_project = '686672af85fb8d104544e798', client_fixture_name = 'guest_client'\nexpected_status_code = 403\n\n    @allure.parent_suite(\"Task Service\")\n    @allure.suite(\"Edit Task\")\n    @allure.sub_suite(\"Access edit Task\")\n    @pytest.mark.parametrize(\n        \"client_fixture_name, expected_status_code\",\n        [\n            (\"owner_client\", 200),\n            (\"manager_client\", 200),\n            (\"member_client\", 200),\n            (\"guest_client\", 403),\n        ],\n    )\n    def test_edit_task_endpoint_all_fields(\n        request, owner_client, main_space, make_task_in_main, main_board, main_project,\n        client_fixture_name, expected_status_code\n    ):\n        allure.dynamic.title(f\"Edit Task: проверка редактирования всех опциональных полей задачи для роли {client_fixture_name}\")\n    \n        \"\"\"\n        Проверяет успешное редактирование задачи, передав все возможные опциональные поля.\n        \"\"\"\n        client_to_test = request.getfixturevalue(client_fixture_name)\n    \n        initial_task_name = f\"Edit Task: Задача для редактирования от {client_fixture_name}\"\n>       initial_task_data = make_task_in_main({\n            \"name\": initial_task_name,\n        })\n\ntests/test_backend/task_service/edit_task/access_edit_task/test_edit_task.py:86: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nbody_overrides = {'name': 'Edit Task: Задача для редактирования от guest_client'}\n\n    def _create_task(body_overrides: dict):\n        body = {\n            \"space_id\": main_space,\n            \"board\": main_board\n        }\n        # объединим остальные поля в create_task_endpoint через kwargs\n        resp = owner_client.post(**create_task_endpoint(**body, **body_overrides))\n>       assert resp.status_code == 200, resp.text\nE       AssertionError: {\"payload\":null,\"type\":\"CreateTask\",\"error\":{\"code\":\"InternalServerError\",\"fields\":[],\"originalType\":\"CreateTask\",\"meta\":{\"context\":\"MongoServerError\",\"message\":\"Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.\"}}}\nE       assert 400 == 200\nE        +  where 400 = <Response [400]>.status_code\n\ntests/test_backend/task_service/conftest.py:127: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1770372203884,"stop":1770372203884,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1770372203884,"stop":1770372204480,"duration":596},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1770372203884,"stop":1770372203884,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1770372203884,"stop":1770372203884,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1770372203884,"stop":1770372203884,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1770372206513,"stop":1770372206793,"duration":280},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1770372206793,"stop":1770372207079,"duration":286},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_project","time":{"start":1770372207079,"stop":1770372207348,"duration":269},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"guest_client","time":{"start":1770372209682,"stop":1770372209974,"duration":292},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_board","time":{"start":1770372212994,"stop":1770372213271,"duration":277},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"make_task_in_main","time":{"start":1770372964637,"stop":1770372964637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"make_task_in_main::0","time":{"start":1770372964957,"stop":1770372964957,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"Task Service"},{"name":"subSuite","value":"Access edit Task"},{"name":"suite","value":"Edit Task"},{"name":"tag","value":"backend"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"2745-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.task_service.edit_task.access_edit_task.test_edit_task"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"client_fixture_name","value":"'guest_client'"},{"name":"expected_status_code","value":"403"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":31,"unknown":0,"total":33},"items":[{"uid":"aaa64e2527ff0ef4","reportUrl":"https://vaizcom.github.io/autotests/552/#testresult/aaa64e2527ff0ef4","status":"passed","time":{"start":1770371600627,"stop":1770371603611,"duration":2984}},{"uid":"4cd65fcfa443ba92","reportUrl":"https://vaizcom.github.io/autotests/551/#testresult/4cd65fcfa443ba92","status":"passed","time":{"start":1770299118126,"stop":1770299119300,"duration":1174}},{"uid":"6c3cac4c310ab6d9","reportUrl":"https://vaizcom.github.io/autotests/550/#testresult/6c3cac4c310ab6d9","status":"passed","time":{"start":1770291244272,"stop":1770291245309,"duration":1037}},{"uid":"cfa195a6948f6b58","reportUrl":"https://vaizcom.github.io/autotests/549/#testresult/cfa195a6948f6b58","status":"passed","time":{"start":1770281987251,"stop":1770281988341,"duration":1090}},{"uid":"cf2bca6e876fb88f","reportUrl":"https://vaizcom.github.io/autotests/548/#testresult/cf2bca6e876fb88f","status":"passed","time":{"start":1770276303847,"stop":1770276304879,"duration":1032}},{"uid":"1718fc6cbf2709d8","reportUrl":"https://vaizcom.github.io/autotests/547/#testresult/1718fc6cbf2709d8","status":"passed","time":{"start":1769093058708,"stop":1769093059838,"duration":1130}},{"uid":"5f294aa7689c68ee","reportUrl":"https://vaizcom.github.io/autotests/546/#testresult/5f294aa7689c68ee","status":"passed","time":{"start":1769008170447,"stop":1769008174374,"duration":3927}},{"uid":"22064994dd6362a2","reportUrl":"https://vaizcom.github.io/autotests/545/#testresult/22064994dd6362a2","status":"passed","time":{"start":1768995462521,"stop":1768995463607,"duration":1086}},{"uid":"275161ef8e9554c","reportUrl":"https://vaizcom.github.io/autotests/544/#testresult/275161ef8e9554c","status":"passed","time":{"start":1768815766762,"stop":1768815767808,"duration":1046}},{"uid":"376c2684abfee97e","reportUrl":"https://vaizcom.github.io/autotests/543/#testresult/376c2684abfee97e","status":"passed","time":{"start":1768812871414,"stop":1768812872350,"duration":936}},{"uid":"e35fb81c5bfce094","reportUrl":"https://vaizcom.github.io/autotests/541/#testresult/e35fb81c5bfce094","status":"passed","time":{"start":1768810509861,"stop":1768810510925,"duration":1064}},{"uid":"3a9a82f9316a131a","reportUrl":"https://vaizcom.github.io/autotests/542/#testresult/3a9a82f9316a131a","status":"passed","time":{"start":1768573831632,"stop":1768573833162,"duration":1530}},{"uid":"56733fe34da2a239","reportUrl":"https://vaizcom.github.io/autotests/540/#testresult/56733fe34da2a239","status":"passed","time":{"start":1768572076386,"stop":1768572077487,"duration":1101}},{"uid":"61784705a9423863","reportUrl":"https://vaizcom.github.io/autotests/539/#testresult/61784705a9423863","status":"passed","time":{"start":1768484297275,"stop":1768484298430,"duration":1155}},{"uid":"a638bc87e09aea7a","reportUrl":"https://vaizcom.github.io/autotests/538/#testresult/a638bc87e09aea7a","status":"passed","time":{"start":1768474521095,"stop":1768474522068,"duration":973}},{"uid":"19f671b1969aa5dc","reportUrl":"https://vaizcom.github.io/autotests/537/#testresult/19f671b1969aa5dc","status":"passed","time":{"start":1768473069540,"stop":1768473070689,"duration":1149}},{"uid":"7ec796a0be4e61a9","reportUrl":"https://vaizcom.github.io/autotests/536/#testresult/7ec796a0be4e61a9","status":"passed","time":{"start":1768470228112,"stop":1768470229720,"duration":1608}},{"uid":"6803265a0cacdf0d","reportUrl":"https://vaizcom.github.io/autotests/534/#testresult/6803265a0cacdf0d","status":"passed","time":{"start":1768468261846,"stop":1768468262892,"duration":1046}},{"uid":"b7230f5498a890e9","reportUrl":"https://vaizcom.github.io/autotests/533/#testresult/b7230f5498a890e9","status":"passed","time":{"start":1768404042844,"stop":1768404044011,"duration":1167}},{"uid":"88d479593e872e59","reportUrl":"https://vaizcom.github.io/autotests/532/#testresult/88d479593e872e59","status":"passed","time":{"start":1768317441728,"stop":1768317443406,"duration":1678}}]},"tags":["backend"]},"source":"5b82fe3018e40a76.json","parameterValues":["'guest_client'","403"]}