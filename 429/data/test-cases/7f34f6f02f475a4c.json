{"uid":"7f34f6f02f475a4c","name":"Проверка сортировки задач по дате создания (по возрастанию)","fullName":"tests.test_backend.task_service.get_tasks.test_get_tasks_sorting_by_created_at#test_get_tasks_sorting_by_created_at_asc","historyId":"16072e6e0000763bced4f5a428c161cb","time":{"start":1762779341376,"stop":1762779341556,"duration":180},"description":"Проверяет сортировку задач по дате создания в порядке возрастания (старые сверху)","descriptionHtml":"<p>Проверяет сортировку задач по дате создания в порядке возрастания (старые сверху)</p>\n","status":"failed","statusMessage":"AssertionError: Нарушена сортировка по возрастанию: 2025-11-10 12:21:47.186000+00:00 должна быть <= 2025-11-10 12:21:11.714000+00:00\nassert datetime.datetime(2025, 11, 10, 12, 21, 47, 186000, tzinfo=tzlocal()) <= datetime.datetime(2025, 11, 10, 12, 21, 11, 714000, tzinfo=tzlocal())","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7fdb2f5563d0>\nmain_space = '6866309d85fb8d104544a61e'\nboard_with_tasks = '6909d4141a593d8d7c3b9f91'\n\n    @allure.title(\"Проверка сортировки задач по дате создания (по возрастанию)\")\n    def test_get_tasks_sorting_by_created_at_asc(owner_client, main_space, board_with_tasks):\n        \"\"\"Проверяет сортировку задач по дате создания в порядке возрастания (старые сверху)\"\"\"\n    \n        with allure.step(\"Выполнить запрос с сортировкой по createdAt ASC и лимитом 10\"):\n            resp = owner_client.post(**get_tasks_endpoint(\n                space_id=main_space,\n                board=board_with_tasks,\n                sortCriteria=\"createdAt\",\n                sortDirection=1,\n                limit=10\n            ))\n    \n        with allure.step(\"Проверить HTTP 200\"):\n            assert resp.status_code == 200\n    \n        with allure.step(\"Проверить сортировку по возрастанию (старые задачи сверху)\"):\n            tasks = resp.json()[\"payload\"][\"tasks\"]\n    \n            assert len(tasks) <= 10, \"Количество задач не должно превышать лимит\"\n    \n            if len(tasks) > 1:\n                created_dates = [parser.parse(task[\"createdAt\"]) for task in tasks]\n    \n                # Проверяем сортировку по возрастанию (каждая следующая дата >= предыдущей)\n                for i in range(len(created_dates) - 1):\n>                   assert created_dates[i] <= created_dates[i + 1], \\\n                        f\"Нарушена сортировка по возрастанию: {created_dates[i]} должна быть <= {created_dates[i + 1]}\"\nE                   AssertionError: Нарушена сортировка по возрастанию: 2025-11-10 12:21:47.186000+00:00 должна быть <= 2025-11-10 12:21:11.714000+00:00\nE                   assert datetime.datetime(2025, 11, 10, 12, 21, 47, 186000, tzinfo=tzlocal()) <= datetime.datetime(2025, 11, 10, 12, 21, 11, 714000, tzinfo=tzlocal())\n\ntests/test_backend/task_service/get_tasks/test_get_tasks_sorting_by_created_at.py:71: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1762778714365,"stop":1762778714365,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1762778714365,"stop":1762778714365,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1762778714365,"stop":1762778714781,"duration":416},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1762778714365,"stop":1762778714365,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1762778714365,"stop":1762778714365,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1762778717634,"stop":1762778717858,"duration":224},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1762778717858,"stop":1762778718239,"duration":381},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"board_with_tasks","time":{"start":1762779296616,"stop":1762779297281,"duration":665},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Проверяет сортировку задач по дате создания в порядке возрастания (старые сверху)","status":"failed","statusMessage":"AssertionError: Нарушена сортировка по возрастанию: 2025-11-10 12:21:47.186000+00:00 должна быть <= 2025-11-10 12:21:11.714000+00:00\nassert datetime.datetime(2025, 11, 10, 12, 21, 47, 186000, tzinfo=tzlocal()) <= datetime.datetime(2025, 11, 10, 12, 21, 11, 714000, tzinfo=tzlocal())","statusTrace":"owner_client = <tests.core.client.APIClient object at 0x7fdb2f5563d0>\nmain_space = '6866309d85fb8d104544a61e'\nboard_with_tasks = '6909d4141a593d8d7c3b9f91'\n\n    @allure.title(\"Проверка сортировки задач по дате создания (по возрастанию)\")\n    def test_get_tasks_sorting_by_created_at_asc(owner_client, main_space, board_with_tasks):\n        \"\"\"Проверяет сортировку задач по дате создания в порядке возрастания (старые сверху)\"\"\"\n    \n        with allure.step(\"Выполнить запрос с сортировкой по createdAt ASC и лимитом 10\"):\n            resp = owner_client.post(**get_tasks_endpoint(\n                space_id=main_space,\n                board=board_with_tasks,\n                sortCriteria=\"createdAt\",\n                sortDirection=1,\n                limit=10\n            ))\n    \n        with allure.step(\"Проверить HTTP 200\"):\n            assert resp.status_code == 200\n    \n        with allure.step(\"Проверить сортировку по возрастанию (старые задачи сверху)\"):\n            tasks = resp.json()[\"payload\"][\"tasks\"]\n    \n            assert len(tasks) <= 10, \"Количество задач не должно превышать лимит\"\n    \n            if len(tasks) > 1:\n                created_dates = [parser.parse(task[\"createdAt\"]) for task in tasks]\n    \n                # Проверяем сортировку по возрастанию (каждая следующая дата >= предыдущей)\n                for i in range(len(created_dates) - 1):\n>                   assert created_dates[i] <= created_dates[i + 1], \\\n                        f\"Нарушена сортировка по возрастанию: {created_dates[i]} должна быть <= {created_dates[i + 1]}\"\nE                   AssertionError: Нарушена сортировка по возрастанию: 2025-11-10 12:21:47.186000+00:00 должна быть <= 2025-11-10 12:21:11.714000+00:00\nE                   assert datetime.datetime(2025, 11, 10, 12, 21, 47, 186000, tzinfo=tzlocal()) <= datetime.datetime(2025, 11, 10, 12, 21, 11, 714000, tzinfo=tzlocal())\n\ntests/test_backend/task_service/get_tasks/test_get_tasks_sorting_by_created_at.py:71: AssertionError","steps":[{"name":"Выполнить запрос с сортировкой по createdAt ASC и лимитом 10","time":{"start":1762779341376,"stop":1762779341554,"duration":178},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверить HTTP 200","time":{"start":1762779341554,"stop":1762779341554,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверить сортировку по возрастанию (старые задачи сверху)","time":{"start":1762779341554,"stop":1762779341555,"duration":1},"status":"failed","statusMessage":"AssertionError: Нарушена сортировка по возрастанию: 2025-11-10 12:21:47.186000+00:00 должна быть <= 2025-11-10 12:21:11.714000+00:00\nassert datetime.datetime(2025, 11, 10, 12, 21, 47, 186000, tzinfo=tzlocal()) <= datetime.datetime(2025, 11, 10, 12, 21, 11, 714000, tzinfo=tzlocal())\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/task_service/get_tasks/test_get_tasks_sorting_by_created_at.py\", line 71, in test_get_tasks_sorting_by_created_at_asc\n    assert created_dates[i] <= created_dates[i + 1], \\\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":3,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.task_service.get_tasks"},{"name":"suite","value":"test_get_tasks_sorting_by_created_at"},{"name":"host","value":"runnervmw9dnm"},{"name":"thread","value":"2711-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.task_service.get_tasks.test_get_tasks_sorting_by_created_at"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["backend"]},"source":"7f34f6f02f475a4c.json","parameterValues":[]}