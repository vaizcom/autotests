{"uid":"957ce946765e5ff0","name":"Создание задачи на доске и проверка: группа, индекс и уникальность размещения","fullName":"tests.test_backend.task_service.create_task.test_create_task_on_board#test_create_task_and_verify_on_board","historyId":"2ef165c559faa11f7c7cfd08f28b076c","time":{"start":1763732922422,"stop":1763732923471,"duration":1049},"description":"\n    Тест создает задачу с указанными бордой, группой и индексом=0, и проверяет:\n      - корректность задачи,\n      - что задача только в одной группе, нет дублей, верный индекс=0.\n      - random client_fixture\n    ","descriptionHtml":"<pre><code>Тест создает задачу с указанными бордой, группой и индексом=0, и проверяет:\n  - корректность задачи,\n  - что задача только в одной группе, нет дублей, верный индекс=0.\n  - random client_fixture\n</code></pre>\n","status":"broken","statusMessage":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://vaiz-api-ms.vaiz.dev/v4/CreateTask","statusTrace":"request = <FixtureRequest for <Function test_create_task_and_verify_on_board>>\ncreate_task_in_main = <function create_task_in_main.<locals>._create_task at 0x7f052aa747c0>\nmain_space = '6866309d85fb8d104544a61e', main_board = '6866731185fb8d104544e826'\n\n    @allure.parent_suite(\"create_task\")\n    @allure.title(\"Создание задачи на доске и проверка: группа, индекс и уникальность размещения\")\n    def test_create_task_and_verify_on_board(request, create_task_in_main, main_space, main_board):\n        \"\"\"\n        Тест создает задачу с указанными бордой, группой и индексом=0, и проверяет:\n          - корректность задачи,\n          - что задача только в одной группе, нет дублей, верный индекс=0.\n          - random client_fixture\n        \"\"\"\n        random_client = random.choice([\"owner_client\", \"manager_client\", \"member_client\"])\n        client = get_client(request, random_client)\n        random_group_id = get_random_group_id(client, main_board, main_space)\n        task_index = 0\n        created_task_id = []\n    \n        try:\n            with allure.step(f\"Создаем задачу от случайного пользователя: {random_client}\"):\n>               task = create_task_in_main(\n                    client_fixture=random_client,\n                    group=random_group_id,\n                    index=task_index\n                )\n\ntests/test_backend/task_service/create_task/test_create_task_on_board.py:28: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests/test_backend/task_service/conftest.py:67: in _create_task\n    response.raise_for_status()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Response [400]>\n\n    def raise_for_status(self):\n        \"\"\"Raises :class:`HTTPError`, if one occurred.\"\"\"\n    \n        http_error_msg = \"\"\n        if isinstance(self.reason, bytes):\n            # We attempt to decode utf-8 first because some servers\n            # choose to localize their reason strings. If the string\n            # isn't utf-8, we fall back to iso-8859-1 for all other\n            # encodings. (See PR #3538)\n            try:\n                reason = self.reason.decode(\"utf-8\")\n            except UnicodeDecodeError:\n                reason = self.reason.decode(\"iso-8859-1\")\n        else:\n            reason = self.reason\n    \n        if 400 <= self.status_code < 500:\n            http_error_msg = (\n                f\"{self.status_code} Client Error: {reason} for url: {self.url}\"\n            )\n    \n        elif 500 <= self.status_code < 600:\n            http_error_msg = (\n                f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\n            )\n    \n        if http_error_msg:\n>           raise HTTPError(http_error_msg, response=self)\nE           requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://vaiz-api-ms.vaiz.dev/v4/CreateTask\n\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/requests/models.py:1024: HTTPError","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1763732456616,"stop":1763732456616,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1763732456617,"stop":1763732456617,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1763732456617,"stop":1763732456617,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1763732456617,"stop":1763732456617,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1763732459027,"stop":1763732459322,"duration":295},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1763732459322,"stop":1763732459609,"duration":287},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_project","time":{"start":1763732459609,"stop":1763732460286,"duration":677},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"manager_client","time":{"start":1763732460912,"stop":1763732461534,"duration":622},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_board","time":{"start":1763732465184,"stop":1763732466251,"duration":1067},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"create_task_in_main","time":{"start":1763732922421,"stop":1763732922421,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Тест создает задачу с указанными бордой, группой и индексом=0, и проверяет:\n      - корректность задачи,\n      - что задача только в одной группе, нет дублей, верный индекс=0.\n      - random client_fixture\n    ","status":"broken","statusMessage":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://vaiz-api-ms.vaiz.dev/v4/CreateTask","statusTrace":"request = <FixtureRequest for <Function test_create_task_and_verify_on_board>>\ncreate_task_in_main = <function create_task_in_main.<locals>._create_task at 0x7f052aa747c0>\nmain_space = '6866309d85fb8d104544a61e', main_board = '6866731185fb8d104544e826'\n\n    @allure.parent_suite(\"create_task\")\n    @allure.title(\"Создание задачи на доске и проверка: группа, индекс и уникальность размещения\")\n    def test_create_task_and_verify_on_board(request, create_task_in_main, main_space, main_board):\n        \"\"\"\n        Тест создает задачу с указанными бордой, группой и индексом=0, и проверяет:\n          - корректность задачи,\n          - что задача только в одной группе, нет дублей, верный индекс=0.\n          - random client_fixture\n        \"\"\"\n        random_client = random.choice([\"owner_client\", \"manager_client\", \"member_client\"])\n        client = get_client(request, random_client)\n        random_group_id = get_random_group_id(client, main_board, main_space)\n        task_index = 0\n        created_task_id = []\n    \n        try:\n            with allure.step(f\"Создаем задачу от случайного пользователя: {random_client}\"):\n>               task = create_task_in_main(\n                    client_fixture=random_client,\n                    group=random_group_id,\n                    index=task_index\n                )\n\ntests/test_backend/task_service/create_task/test_create_task_on_board.py:28: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests/test_backend/task_service/conftest.py:67: in _create_task\n    response.raise_for_status()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Response [400]>\n\n    def raise_for_status(self):\n        \"\"\"Raises :class:`HTTPError`, if one occurred.\"\"\"\n    \n        http_error_msg = \"\"\n        if isinstance(self.reason, bytes):\n            # We attempt to decode utf-8 first because some servers\n            # choose to localize their reason strings. If the string\n            # isn't utf-8, we fall back to iso-8859-1 for all other\n            # encodings. (See PR #3538)\n            try:\n                reason = self.reason.decode(\"utf-8\")\n            except UnicodeDecodeError:\n                reason = self.reason.decode(\"iso-8859-1\")\n        else:\n            reason = self.reason\n    \n        if 400 <= self.status_code < 500:\n            http_error_msg = (\n                f\"{self.status_code} Client Error: {reason} for url: {self.url}\"\n            )\n    \n        elif 500 <= self.status_code < 600:\n            http_error_msg = (\n                f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\n            )\n    \n        if http_error_msg:\n>           raise HTTPError(http_error_msg, response=self)\nE           requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://vaiz-api-ms.vaiz.dev/v4/CreateTask\n\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/requests/models.py:1024: HTTPError","steps":[{"name":"Создаем задачу от случайного пользователя: manager_client","time":{"start":1763732922684,"stop":1763732923470,"duration":786},"status":"broken","statusMessage":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://vaiz-api-ms.vaiz.dev/v4/CreateTask\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/task_service/create_task/test_create_task_on_board.py\", line 28, in test_create_task_and_verify_on_board\n    task = create_task_in_main(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/autotests/autotests/tests/test_backend/task_service/conftest.py\", line 67, in _create_task\n    response.raise_for_status()\n  File \"/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/requests/models.py\", line 1024, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Удаляем все созданные сабтаски и родительскую задачу","time":{"start":1763732923471,"stop":1763732923471,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"parentSuite","value":"create_task"},{"name":"tag","value":"backend"},{"name":"suite","value":"test_create_task_on_board"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2627-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.task_service.create_task.test_create_task_on_board"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":5,"skipped":0,"passed":58,"unknown":0,"total":63},"items":[{"uid":"cde0510d57480bef","reportUrl":"https://vaizcom.github.io/autotests/466/#testresult/cde0510d57480bef","status":"passed","time":{"start":1763726436450,"stop":1763726438114,"duration":1664}},{"uid":"b49960630cbb3cd","reportUrl":"https://vaizcom.github.io/autotests/465/#testresult/b49960630cbb3cd","status":"passed","time":{"start":1763719952242,"stop":1763719953598,"duration":1356}},{"uid":"25a428f13f5b11e","reportUrl":"https://vaizcom.github.io/autotests/464/#testresult/25a428f13f5b11e","status":"passed","time":{"start":1763715246747,"stop":1763715248169,"duration":1422}},{"uid":"ffa275924ccd69d","reportUrl":"https://vaizcom.github.io/autotests/463/#testresult/ffa275924ccd69d","status":"passed","time":{"start":1763714545358,"stop":1763714547417,"duration":2059}},{"uid":"6cfab684287e747f","reportUrl":"https://vaizcom.github.io/autotests/462/#testresult/6cfab684287e747f","status":"passed","time":{"start":1763711142224,"stop":1763711143764,"duration":1540}},{"uid":"a55b566008564836","reportUrl":"https://vaizcom.github.io/autotests/461/#testresult/a55b566008564836","status":"passed","time":{"start":1763710112787,"stop":1763710114381,"duration":1594}},{"uid":"483d780919e3f29a","reportUrl":"https://vaizcom.github.io/autotests/460/#testresult/483d780919e3f29a","status":"passed","time":{"start":1763651572029,"stop":1763651573657,"duration":1628}},{"uid":"c0bc7d4d9fe1280c","reportUrl":"https://vaizcom.github.io/autotests/459/#testresult/c0bc7d4d9fe1280c","status":"passed","time":{"start":1763649798160,"stop":1763649801950,"duration":3790}},{"uid":"4441a59a8a36b9fd","reportUrl":"https://vaizcom.github.io/autotests/458/#testresult/4441a59a8a36b9fd","status":"passed","time":{"start":1763631194593,"stop":1763631195826,"duration":1233}},{"uid":"c0952f9ab22d1f20","reportUrl":"https://vaizcom.github.io/autotests/457/#testresult/c0952f9ab22d1f20","status":"passed","time":{"start":1763628565364,"stop":1763628566688,"duration":1324}},{"uid":"7b4be5666dfaa82","reportUrl":"https://vaizcom.github.io/autotests/456/#testresult/7b4be5666dfaa82","status":"passed","time":{"start":1763559635483,"stop":1763559637243,"duration":1760}},{"uid":"bc790a0d51c97c79","reportUrl":"https://vaizcom.github.io/autotests/455/#testresult/bc790a0d51c97c79","status":"passed","time":{"start":1763542583809,"stop":1763542585852,"duration":2043}},{"uid":"cdbc61d8b312cec3","reportUrl":"https://vaizcom.github.io/autotests/454/#testresult/cdbc61d8b312cec3","status":"passed","time":{"start":1763540354247,"stop":1763540355692,"duration":1445}},{"uid":"4f890d7d858b40cd","reportUrl":"https://vaizcom.github.io/autotests/453/#testresult/4f890d7d858b40cd","status":"passed","time":{"start":1763477778459,"stop":1763477780494,"duration":2035}},{"uid":"6863904fe7b2e739","reportUrl":"https://vaizcom.github.io/autotests/452/#testresult/6863904fe7b2e739","status":"passed","time":{"start":1763475987145,"stop":1763475988540,"duration":1395}},{"uid":"8b81d6d610be5b98","reportUrl":"https://vaizcom.github.io/autotests/451/#testresult/8b81d6d610be5b98","status":"passed","time":{"start":1763405962823,"stop":1763405966602,"duration":3779}},{"uid":"9f820b4256ce6672","reportUrl":"https://vaizcom.github.io/autotests/450/#testresult/9f820b4256ce6672","status":"passed","time":{"start":1763391605576,"stop":1763391607922,"duration":2346}},{"uid":"43588806c45f4791","reportUrl":"https://vaizcom.github.io/autotests/449/#testresult/43588806c45f4791","status":"passed","time":{"start":1763389845757,"stop":1763389847764,"duration":2007}},{"uid":"7572504609d09c36","reportUrl":"https://vaizcom.github.io/autotests/449/#testresult/7572504609d09c36","status":"passed","time":{"start":1763388740836,"stop":1763388743704,"duration":2868}},{"uid":"7c0c048e6a85ad81","reportUrl":"https://vaizcom.github.io/autotests/449/#testresult/7c0c048e6a85ad81","status":"broken","statusDetails":"requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: https://vaiz-api-ms.vaiz.dev/v4/GetBoard","time":{"start":1763387985837,"stop":1763387985970,"duration":133}}]},"tags":["backend"]},"source":"957ce946765e5ff0.json","parameterValues":[]}