{"uid":"cda2906100516d36","name":"Негативные сценарии: Get task с invalid slug | slug='1 OR 1=1' -> 400","fullName":"tests.test_backend.task_service.get_task.test_get_task_wrong_slug#test_get_task_wrong_slug","historyId":"2875e59e859b743ca2c7c52514c8d174","time":{"start":1762939593348,"stop":1762939593459,"duration":111},"description":"\n        Проверка обработки некорректных значений slug при получении задачи.\n        Ожидаем корректные коды ошибок для разных невалидных входных данных.\n        ","descriptionHtml":"<pre><code>    Проверка обработки некорректных значений slug при получении задачи.\n    Ожидаем корректные коды ошибок для разных невалидных входных данных.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Ожидался 400, получено 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"main_space = '6866309d85fb8d104544a61e', slug_id = '1 OR 1=1'\nexpected_status = 400\nowner_client = <tests.core.client.APIClient object at 0x7f0314f7fb90>\n\n    @pytest.mark.parametrize(\n        \"slug_id, expected_status\",\n        [\n            (None, 400),                  # нет slug\n            (\"\", 400),                    # пустой slug\n            (\"NOT-EXIST-999999\", 400),    # несуществующий\n            (\"<script>\", 400),            # XSS\n            (\"1 OR 1=1\", 400),            # SQLi\n            (\"A\" * 9, 400),            # слишком длинный\n        ],\n        ids=[\"no_slug\", \"empty_slug\", \"not_found\", \"xss\", \"sqli\", \"too_long\"],\n    )\n    def test_get_task_wrong_slug(main_space, slug_id, expected_status, owner_client):\n        \"\"\"\n            Проверка обработки некорректных значений slug при получении задачи.\n            Ожидаем корректные коды ошибок для разных невалидных входных данных.\n            \"\"\"\n        allure.dynamic.title(f\"Негативные сценарии: Get task с invalid slug | slug={slug_id!r} -> {expected_status}\")\n    \n        with allure.step(\"Готовим параметры запроса\"):\n            endpoint = get_task_endpoint(space_id=main_space, slug_id=slug_id)\n    \n        with allure.step(f\"Отправляем запрос: slug_id={slug_id}\"):\n            response = owner_client.post(**endpoint)\n    \n        with allure.step(f\"Проверяем код ответа == {expected_status}\"):\n            if isinstance(slug_id, str):\n>               assert response.status_code == expected_status, f\"Ожидался {expected_status}, получено {response.status_code}\"\nE               AssertionError: Ожидался 400, получено 503\nE               assert 503 == 400\nE                +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/task_service/get_task/test_get_task_wrong_slug.py:35: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1762939434325,"stop":1762939434325,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1762939434325,"stop":1762939434325,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1762939434325,"stop":1762939434325,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1762939434325,"stop":1762939434325,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"owner_client","time":{"start":1762939434325,"stop":1762939434769,"duration":444},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1762939436802,"stop":1762939437041,"duration":239},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1762939437042,"stop":1762939437447,"duration":405},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n        Проверка обработки некорректных значений slug при получении задачи.\n        Ожидаем корректные коды ошибок для разных невалидных входных данных.\n        ","status":"failed","statusMessage":"AssertionError: Ожидался 400, получено 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"main_space = '6866309d85fb8d104544a61e', slug_id = '1 OR 1=1'\nexpected_status = 400\nowner_client = <tests.core.client.APIClient object at 0x7f0314f7fb90>\n\n    @pytest.mark.parametrize(\n        \"slug_id, expected_status\",\n        [\n            (None, 400),                  # нет slug\n            (\"\", 400),                    # пустой slug\n            (\"NOT-EXIST-999999\", 400),    # несуществующий\n            (\"<script>\", 400),            # XSS\n            (\"1 OR 1=1\", 400),            # SQLi\n            (\"A\" * 9, 400),            # слишком длинный\n        ],\n        ids=[\"no_slug\", \"empty_slug\", \"not_found\", \"xss\", \"sqli\", \"too_long\"],\n    )\n    def test_get_task_wrong_slug(main_space, slug_id, expected_status, owner_client):\n        \"\"\"\n            Проверка обработки некорректных значений slug при получении задачи.\n            Ожидаем корректные коды ошибок для разных невалидных входных данных.\n            \"\"\"\n        allure.dynamic.title(f\"Негативные сценарии: Get task с invalid slug | slug={slug_id!r} -> {expected_status}\")\n    \n        with allure.step(\"Готовим параметры запроса\"):\n            endpoint = get_task_endpoint(space_id=main_space, slug_id=slug_id)\n    \n        with allure.step(f\"Отправляем запрос: slug_id={slug_id}\"):\n            response = owner_client.post(**endpoint)\n    \n        with allure.step(f\"Проверяем код ответа == {expected_status}\"):\n            if isinstance(slug_id, str):\n>               assert response.status_code == expected_status, f\"Ожидался {expected_status}, получено {response.status_code}\"\nE               AssertionError: Ожидался 400, получено 503\nE               assert 503 == 400\nE                +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/task_service/get_task/test_get_task_wrong_slug.py:35: AssertionError","steps":[{"name":"Готовим параметры запроса","time":{"start":1762939593349,"stop":1762939593349,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Отправляем запрос: slug_id=1 OR 1=1","time":{"start":1762939593349,"stop":1762939593458,"duration":109},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем код ответа == 400","time":{"start":1762939593458,"stop":1762939593459,"duration":1},"status":"failed","statusMessage":"AssertionError: Ожидался 400, получено 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/task_service/get_task/test_get_task_wrong_slug.py\", line 35, in test_get_task_wrong_slug\n    assert response.status_code == expected_status, f\"Ожидался {expected_status}, получено {response.status_code}\"\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":3,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.task_service.get_task"},{"name":"suite","value":"test_get_task_wrong_slug"},{"name":"host","value":"runnervmw9dnm"},{"name":"thread","value":"2580-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.task_service.get_task.test_get_task_wrong_slug"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"expected_status","value":"400"},{"name":"slug_id","value":"'1 OR 1=1'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":14,"unknown":0,"total":16},"items":[{"uid":"138274fb34b1f282","reportUrl":"https://vaizcom.github.io/autotests/431/#testresult/138274fb34b1f282","status":"passed","time":{"start":1762856057496,"stop":1762856057738,"duration":242}},{"uid":"269ea45eda1cbc3f","reportUrl":"https://vaizcom.github.io/autotests/430/#testresult/269ea45eda1cbc3f","status":"passed","time":{"start":1762781127410,"stop":1762781127597,"duration":187}},{"uid":"bb14d8894a110350","reportUrl":"https://vaizcom.github.io/autotests/429/#testresult/bb14d8894a110350","status":"passed","time":{"start":1762779300642,"stop":1762779300847,"duration":205}},{"uid":"9c54fb9b1d0e0f62","reportUrl":"https://vaizcom.github.io/autotests/427/#testresult/9c54fb9b1d0e0f62","status":"passed","time":{"start":1762774292931,"stop":1762774293169,"duration":238}},{"uid":"22d922ddfb79ed58","reportUrl":"https://vaizcom.github.io/autotests/426/#testresult/22d922ddfb79ed58","status":"passed","time":{"start":1762765842777,"stop":1762765843030,"duration":253}},{"uid":"2fe7f503c3ff8a9c","reportUrl":"https://vaizcom.github.io/autotests/425/#testresult/2fe7f503c3ff8a9c","status":"passed","time":{"start":1762523621668,"stop":1762523621860,"duration":192}},{"uid":"4ee33486239af9d8","reportUrl":"https://vaizcom.github.io/autotests/424/#testresult/4ee33486239af9d8","status":"passed","time":{"start":1762521597010,"stop":1762521597249,"duration":239}},{"uid":"6f3d45f1a8464765","reportUrl":"https://vaizcom.github.io/autotests/424/#testresult/6f3d45f1a8464765","status":"passed","time":{"start":1762520605950,"stop":1762520606147,"duration":197}},{"uid":"48a9cdf21238ccdb","reportUrl":"https://vaizcom.github.io/autotests/421/#testresult/48a9cdf21238ccdb","status":"passed","time":{"start":1762514892520,"stop":1762514892649,"duration":129}},{"uid":"b779f898ccdc5b7b","reportUrl":"https://vaizcom.github.io/autotests/420/#testresult/b779f898ccdc5b7b","status":"passed","time":{"start":1762508063249,"stop":1762508063499,"duration":250}},{"uid":"9acc0c4e57439c14","reportUrl":"https://vaizcom.github.io/autotests/420/#testresult/9acc0c4e57439c14","status":"failed","statusDetails":"AssertionError: Ожидался 400, получено 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","time":{"start":1762506285246,"stop":1762506285357,"duration":111}},{"uid":"e9528a7a24135394","reportUrl":"https://vaizcom.github.io/autotests/419/#testresult/e9528a7a24135394","status":"passed","time":{"start":1762505849590,"stop":1762505849769,"duration":179}},{"uid":"e2a2498d4eeee1d9","reportUrl":"https://vaizcom.github.io/autotests/418/#testresult/e2a2498d4eeee1d9","status":"passed","time":{"start":1762354839775,"stop":1762354840020,"duration":245}},{"uid":"52db1684dff5c0dd","reportUrl":"https://vaizcom.github.io/autotests/417/#testresult/52db1684dff5c0dd","status":"passed","time":{"start":1762353802094,"stop":1762353802331,"duration":237}},{"uid":"66e87b3e7743315a","reportUrl":"https://vaizcom.github.io/autotests/416/#testresult/66e87b3e7743315a","status":"passed","time":{"start":1762350382916,"stop":1762350383156,"duration":240}}]},"tags":["backend"]},"source":"cda2906100516d36.json","parameterValues":["400","'1 OR 1=1'"]}