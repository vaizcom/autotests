{"uid":"e001e82879e63600","name":"Проверка доступа к документам: пользователь без доступа (foreign_client)","fullName":"tests.test_backend.document.access_doc.test_matrix_access_docs#test_document_access_denied_for_foreign_client","historyId":"7178898f53000b718b1270e4271b6985","time":{"start":1762939571019,"stop":1762939571324,"duration":305},"description":"\n    Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n    ","descriptionHtml":"<pre><code>Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Ожидался статус 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"request = <FixtureRequest for <Function test_document_access_denied_for_foreign_client>>\nforeign_client = <tests.core.client.APIClient object at 0x7f031510c1d0>\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title('Проверка доступа к документам: пользователь без доступа (foreign_client)')\n    def test_document_access_denied_for_foreign_client(request, foreign_client, main_space):\n        \"\"\"\n        Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n        \"\"\"\n        with allure.step('Отправка запроса для получения доступа к документам'):\n            response = foreign_client.post(**get_document_endpoint(document_id=main_space, space_id=main_space))\n    \n        with allure.step(\"Проверка, что запрос отклонён (ожидается 400 и код ошибки 'NotFound')\"):\n>           assert response.status_code == 400, f'Ожидался статус 400, получен {response.status_code}'\nE           AssertionError: Ожидался статус 400, получен 503\nE           assert 503 == 400\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/access_doc/test_matrix_access_docs.py:16: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1762939434325,"stop":1762939434325,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1762939434325,"stop":1762939434325,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1762939434325,"stop":1762939434325,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1762939434325,"stop":1762939434325,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"foreign_client","time":{"start":1762939436202,"stop":1762939436442,"duration":240},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_client","time":{"start":1762939436802,"stop":1762939437041,"duration":239},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"main_space","time":{"start":1762939437042,"stop":1762939437447,"duration":405},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n    ","status":"failed","statusMessage":"AssertionError: Ожидался статус 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","statusTrace":"request = <FixtureRequest for <Function test_document_access_denied_for_foreign_client>>\nforeign_client = <tests.core.client.APIClient object at 0x7f031510c1d0>\nmain_space = '6866309d85fb8d104544a61e'\n\n    @allure.title('Проверка доступа к документам: пользователь без доступа (foreign_client)')\n    def test_document_access_denied_for_foreign_client(request, foreign_client, main_space):\n        \"\"\"\n        Проверяет, что пользователь foreign_client без доступа к Space получает ошибку.\n        \"\"\"\n        with allure.step('Отправка запроса для получения доступа к документам'):\n            response = foreign_client.post(**get_document_endpoint(document_id=main_space, space_id=main_space))\n    \n        with allure.step(\"Проверка, что запрос отклонён (ожидается 400 и код ошибки 'NotFound')\"):\n>           assert response.status_code == 400, f'Ожидался статус 400, получен {response.status_code}'\nE           AssertionError: Ожидался статус 400, получен 503\nE           assert 503 == 400\nE            +  where 503 = <Response [503]>.status_code\n\ntests/test_backend/document/access_doc/test_matrix_access_docs.py:16: AssertionError","steps":[{"name":"Отправка запроса для получения доступа к документам","time":{"start":1762939571019,"stop":1762939571323,"duration":304},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка, что запрос отклонён (ожидается 400 и код ошибки 'NotFound')","time":{"start":1762939571323,"stop":1762939571324,"duration":1},"status":"failed","statusMessage":"AssertionError: Ожидался статус 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code\n","statusTrace":"  File \"/home/runner/work/autotests/autotests/tests/test_backend/document/access_doc/test_matrix_access_docs.py\", line 16, in test_document_access_denied_for_foreign_client\n    assert response.status_code == 400, f'Ожидался статус 400, получен {response.status_code}'\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"tag","value":"backend"},{"name":"parentSuite","value":"tests.test_backend.document.access_doc"},{"name":"suite","value":"test_matrix_access_docs"},{"name":"host","value":"runnervmw9dnm"},{"name":"thread","value":"2580-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_backend.document.access_doc.test_matrix_access_docs"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":11,"passed":12,"unknown":0,"total":25},"items":[{"uid":"7772fb15418bd348","reportUrl":"https://vaizcom.github.io/autotests/431/#testresult/7772fb15418bd348","status":"passed","time":{"start":1762855635384,"stop":1762855635923,"duration":539}},{"uid":"2623217a7a933d3d","reportUrl":"https://vaizcom.github.io/autotests/430/#testresult/2623217a7a933d3d","status":"passed","time":{"start":1762780787724,"stop":1762780787858,"duration":134}},{"uid":"b26194729f9ca860","reportUrl":"https://vaizcom.github.io/autotests/429/#testresult/b26194729f9ca860","status":"passed","time":{"start":1762778944824,"stop":1762778945152,"duration":328}},{"uid":"8b6a15b497024df8","reportUrl":"https://vaizcom.github.io/autotests/427/#testresult/8b6a15b497024df8","status":"passed","time":{"start":1762773886164,"stop":1762773886599,"duration":435}},{"uid":"f8b12d5b51fd1cf7","reportUrl":"https://vaizcom.github.io/autotests/426/#testresult/f8b12d5b51fd1cf7","status":"passed","time":{"start":1762765429927,"stop":1762765430430,"duration":503}},{"uid":"305cb29de006118c","reportUrl":"https://vaizcom.github.io/autotests/425/#testresult/305cb29de006118c","status":"passed","time":{"start":1762523267761,"stop":1762523267922,"duration":161}},{"uid":"ade4680da3ab661f","reportUrl":"https://vaizcom.github.io/autotests/424/#testresult/ade4680da3ab661f","status":"passed","time":{"start":1762521204027,"stop":1762521204469,"duration":442}},{"uid":"ec53e1b56fe7252","reportUrl":"https://vaizcom.github.io/autotests/424/#testresult/ec53e1b56fe7252","status":"passed","time":{"start":1762520188615,"stop":1762520188990,"duration":375}},{"uid":"e5896c7798286b32","reportUrl":"https://vaizcom.github.io/autotests/422/#testresult/e5896c7798286b32","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762517170629,"stop":1762517170629,"duration":0}},{"uid":"908d087e1734089","reportUrl":"https://vaizcom.github.io/autotests/421/#testresult/908d087e1734089","status":"passed","time":{"start":1762514865906,"stop":1762514866280,"duration":374}},{"uid":"1a021d3de58a34e3","reportUrl":"https://vaizcom.github.io/autotests/420/#testresult/1a021d3de58a34e3","status":"passed","time":{"start":1762507672905,"stop":1762507673365,"duration":460}},{"uid":"8dc107cf9137a590","reportUrl":"https://vaizcom.github.io/autotests/420/#testresult/8dc107cf9137a590","status":"failed","statusDetails":"AssertionError: Ожидался статус 400, получен 503\nassert 503 == 400\n +  where 503 = <Response [503]>.status_code","time":{"start":1762506262778,"stop":1762506263067,"duration":289}},{"uid":"211156ad170fdb74","reportUrl":"https://vaizcom.github.io/autotests/419/#testresult/211156ad170fdb74","status":"passed","time":{"start":1762505484791,"stop":1762505485133,"duration":342}},{"uid":"3f6bdf9395431097","reportUrl":"https://vaizcom.github.io/autotests/418/#testresult/3f6bdf9395431097","status":"passed","time":{"start":1762354462902,"stop":1762354463094,"duration":192}},{"uid":"750f430c1c8b88f2","reportUrl":"https://vaizcom.github.io/autotests/417/#testresult/750f430c1c8b88f2","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762353403937,"stop":1762353403937,"duration":0}},{"uid":"d0d68bfbaadfa310","reportUrl":"https://vaizcom.github.io/autotests/416/#testresult/d0d68bfbaadfa310","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762349993814,"stop":1762349993814,"duration":0}},{"uid":"11c514600bd5b6a8","reportUrl":"https://vaizcom.github.io/autotests/415/#testresult/11c514600bd5b6a8","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762331964575,"stop":1762331964575,"duration":0}},{"uid":"fbb08f89b06ec5d7","reportUrl":"https://vaizcom.github.io/autotests/414/#testresult/fbb08f89b06ec5d7","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762329017863,"stop":1762329017863,"duration":0}},{"uid":"e4f14be7c10959f2","reportUrl":"https://vaizcom.github.io/autotests/413/#testresult/e4f14be7c10959f2","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762270626522,"stop":1762270626522,"duration":0}},{"uid":"eabaa8814a7a6106","reportUrl":"https://vaizcom.github.io/autotests/412/#testresult/eabaa8814a7a6106","status":"skipped","statusDetails":"Skipped: revert","time":{"start":1762269840055,"stop":1762269840055,"duration":0}}]},"tags":["backend"]},"source":"e001e82879e63600.json","parameterValues":[]}